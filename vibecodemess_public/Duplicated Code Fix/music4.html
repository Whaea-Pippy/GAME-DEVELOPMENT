<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Baroque Composers — Drag & Match</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --accent:#4682b4;
    --tile:#fff8dc;
    --ok:#c8f7c5;
    --bad:#ffd7d1;
    --active-cat: #2E8B57; /* SeaGreen for active category */
  }
  /* FIX: Use music4.jpg for the background */
  body{
    font-family:"Poppins",system-ui,Arial;
    background: linear-gradient(rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.8)), url('/images/music4.jpg');
    background-size: cover;
    background-attachment: fixed;
    margin:18px;
    color:#1b2430;
  }
  h2{margin:6px 0 14px;}
  .controls{margin-bottom:12px;}
  .category{margin:6px 6px 6px 0; padding:8px 12px; border-radius:8px; border:none; background:var(--accent); color:#fff; cursor:pointer;}
  .category:hover{opacity:.92}
  .category.active{ background: var(--active-cat); }

  table{width:100%; border-collapse:separate; border-spacing:10px 10px; table-layout:fixed;}
  thead th{background:#bcdffb; padding:10px; text-align:left; border-radius:6px;}
  thead th:first-child{width:35%;}
  /* FIX: Reduced row height */
  tbody td{background:#fff; padding:10px; vertical-align:middle; border-radius:6px; min-height:50px;}
  td:first-child{font-weight:700; text-align:left; padding-left:18px;}

  /* FIX: Reduced dropzone height */
  .dropzone{background: transparent; display:flex; align-items:center; justify-content:flex-start; padding:8px; gap:8px; min-height:50px;}
  .dropzone .placeholder{color:#666; font-size:0.95rem; margin-left:6px;}

  .composer-row.correct td{ background: var(--ok); transition: background .25s; }

  #factBox{
    display: grid;
    grid-template-columns: 1fr;
    gap: 8px;
    margin-top: 18px;
  }
  .fact{
    background:var(--tile);
    border:2px solid #bfb298;
    border-radius:8px;
    padding:10px;
    width: 100%;
    box-sizing: border-box;
    cursor:grab;
    user-select:none;
  }
  .fact.dragging{opacity:.45}
  .fact small{display:block;color:#444;margin-top:6px;font-size:0.85rem}

  .dropzone.over{outline: 2px dashed #7aaed6; border-radius:6px;}

  .row-wrap{display:flex; gap:18px; align-items:center; justify-content:space-between; flex-wrap:wrap;}
  .note{color:#4d5966;font-size:0.95rem;margin-top:8px; display: none;}
  .actions{margin-top:12px}
  .btn{padding:8px 12px;border-radius:8px;border:none;background:#2b7a9b;color:#fff;cursor:pointer}
  .btn:active{transform:translateY(1px)}
  @media (max-width:700px){
    thead th:first-child{width:100%; display:block;}
    tbody, tr, td { display: block; width: 100%; }
    tr { margin-bottom: 10px; }
  }
</style>
</head>
<body>

<h2>Baroque Composers</h2>

<div class="controls row-wrap">
  <div>
    <button class="category" data-cat="Born">Born</button>
    <button class="category" data-cat="Famous">Famous For</button>
    <button class="category" data-cat="Family">Family</button>
    <button class="category" data-cat="Early">Early Life</button>
    <button class="category" data-cat="Instruments">Instruments</button>
    <button class="category" data-cat="Style">Style</button>
    <button class="category" data-cat="Character">Character</button>
    <button class="category" data-cat="Legacy">Legacy</button>
    <button class="category" data-cat="Fun">Fun Fact</button>
  </div>

  <div class="actions">
    <button id="helpBtn" class="btn" style="background:#6c757d">Help</button> 
    <button id="resetBtn" class="btn">Reset</button>
    <button id="shuffleBtn" class="btn" style="margin-left:8px;background:#56a0d3">Shuffle Facts</button>
  </div>
</div>

<table aria-label="Baroque composers matching">
  <thead>
    <tr><th>Composer</th><th>Assigned Fact (drop here)</th></tr>
  </thead>
  <tbody>
    <tr id="Bach" class="composer-row"><td>Bach</td><td class="dropzone" data-composer="Bach"><span class="placeholder">drop fact here</span></td></tr>
    <tr id="Handel" class="composer-row"><td>Handel</td><td class="dropzone" data-composer="Handel"><span class="placeholder">drop fact here</span></td></tr>
    <tr id="Vivaldi" class="composer-row"><td>Vivaldi</td><td class="dropzone" data-composer="Vivaldi"><span class="placeholder">drop fact here</span></td></tr>
    <tr id="Purcell" class="composer-row"><td>Purcell</td><td class="dropzone" data-composer="Purcell"><span class="placeholder">drop fact here</span></td></tr>
  </tbody>
</table>

<p class="note" id="helpText">Click a category to show the four facts below. Drag each fact into the composer row you think it belongs to. The row will glow green when the fact is correct. You can drag facts back to the pool at any time.</p>

<div id="factBox" aria-live="polite"></div>

<script>
/* ---------- facts ---------- */
const facts = {
  Born: {
    Bach: "Born in Germany (1685–1750), one of the greatest Baroque composers.",
    Handel: "Born in Germany (1685–1759), later became a British citizen.",
    Vivaldi: "Born in Venice, Italy (1678–1741), nicknamed ‘The Red Priest.’",
    Purcell: "Born in London (1659–1695), England’s most famous Baroque composer."
  },
  Famous: {
    Bach: "Famous: ‘Brandenburg Concertos’, many church cantatas and keyboard works.",
    Handel: "Famous: ‘Messiah’ (Hallelujah Chorus) and ‘Water Music’.",
    Vivaldi: "Famous: ‘The Four Seasons’ — violin concertos about the seasons.",
    Purcell: "Famous: ‘Dido and Aeneas’ — one of the first English operas."
  },
  Family: {
    Bach: "Family: Came from a long line of musicians — music ran in the Bach family.",
    Handel: "Family: Father wanted him to study law, not music.",
    Vivaldi: "Family: Trained for the priesthood; music became his career.",
    Purcell: "Family: Came from a musical family who worked for the royal court."
  },
  Early: {
    Bach: "Early life: Orphaned young and raised by his older brother.",
    Handel: "Early life: Practised music secretly when young (father wanted law).",
    Vivaldi: "Early life: Worked and taught at a girls’ orphanage in Venice.",
    Purcell: "Early life: Choirboy at the Chapel Royal; studied music early."
  },
  Instruments: {
    Bach: "Instruments: Organ, violin, harpsichord — brilliant keyboard player.",
    Handel: "Instruments: Organ, harpsichord, violin.",
    Vivaldi: "Instruments: A brilliant violinist and teacher.",
    Purcell: "Instruments: Keyboard player and organist (theatre music)."
  },
  Style: {
    Bach: "Style: Complex counterpoint and rich harmony.",
    Handel: "Style: Grand, dramatic, often for royal events.",
    Vivaldi: "Style: Energetic rhythms and bright melodies.",
    Purcell: "Style: Blended English, French and Italian influences."
  },
  Character: {
    Bach: "Character: Serious, hardworking, deeply religious.",
    Handel: "Character: Confident, independent, determined.",
    Vivaldi: "Character: Passionate, innovative, energetic.",
    Purcell: "Character: Brilliant, respected, died young."
  },
  Legacy: {
    Bach: "Legacy: Influenced Mozart and Beethoven; huge composer in history.",
    Handel: "Legacy: Music still performed worldwide at holidays and events.",
    Vivaldi: "Legacy: Rediscovered and hugely popular in the 20th century.",
    Purcell: "Legacy: Helped shape English Baroque and later composers."
  },
  Fun: {
    Bach: "Fun fact: Had 20 children — several became musicians.",
    Handel: "Fun fact: Went blind near the end of his life but still composed.",
    Vivaldi: "Fun fact: Called 'The Red Priest' because of his red hair.",
    Purcell: "Fun fact: Music played at the coronation of Queen Elizabeth II."
  }
};

/* ---------- DOM references ---------- */
const factBox = document.getElementById('factBox');
const dropzones = Array.from(document.querySelectorAll('.dropzone'));
const categoryBtns = Array.from(document.querySelectorAll('.category'));
const resetBtn = document.getElementById('resetBtn');
const shuffleBtn = document.getElementById('shuffleBtn');
const helpBtn = document.getElementById('helpBtn');
const helpText = document.getElementById('helpText');


function shuffleArray(a){ return a.sort(()=>Math.random()-0.5); }

function removeAllFacts(){
  document.querySelectorAll('.fact').forEach(e => e.remove());
}

function loadFacts(categoryKey){
  categoryBtns.forEach(btn => {
    btn.classList.toggle('active', btn.dataset.cat === categoryKey);
  });

  removeAllFacts();
  dropzones.forEach(d => { 
    d.innerHTML = '<span class="placeholder">drop fact here</span>'; 
    d.parentElement.classList.remove('correct'); 
  });

  const data = facts[categoryKey];
  const entries = shuffleArray(Object.entries(data));

  entries.forEach((entry, idx) => {
    const [composerKey, text] = entry;
    const div = document.createElement('div');
    div.className = 'fact';
    div.id = `fact-${composerKey}-${idx}-${Date.now()}`;
    div.draggable = true;
    div.dataset.composer = composerKey;
    div.textContent = text;
    div.addEventListener('dragstart', (e) => {
      e.dataTransfer.setData('text/plain', div.id);
      setTimeout(()=>div.classList.add('dragging'), 0);
    });
    div.addEventListener('dragend', (e) => {
      div.classList.remove('dragging');
    });
    factBox.appendChild(div);
  });
}

dropzones.forEach(zone => {
  zone.addEventListener('dragover', e => { e.preventDefault(); zone.classList.add('over'); });
  zone.addEventListener('dragleave', e => { zone.classList.remove('over'); });
  zone.addEventListener('drop', e => {
    e.preventDefault();
    zone.classList.remove('over');
    const id = e.dataTransfer.getData('text/plain');
    const el = document.getElementById(id);
    if(!el) return;
    const existing = zone.querySelector('.fact');
    if(existing && existing !== el){
      factBox.appendChild(existing);
    }
    zone.innerHTML = '';
    zone.appendChild(el);
    const row = zone.parentElement;
    if(row.id === el.dataset.composer){
      row.classList.add('correct');
    } else {
      row.classList.remove('correct');
    }
  });
});

factBox.addEventListener('dragover', e => e.preventDefault());
factBox.addEventListener('drop', e => {
  e.preventDefault();
  const id = e.dataTransfer.getData('text/plain');
  const el = document.getElementById(id);
  if(!el) return;
  const parentRow = el.closest('tr.composer-row');
  if(parentRow) parentRow.classList.remove('correct');
  factBox.appendChild(el);
});

categoryBtns.forEach(btn => btn.addEventListener('click', () => loadFacts(btn.dataset.cat) ));

resetBtn.addEventListener('click', ()=> {
  loadFacts('Born');
});

shuffleBtn.addEventListener('click', ()=>{
  const factsEls = Array.from(document.querySelectorAll('.fact'));
  shuffleArray(factsEls);
  factsEls.forEach(el => factBox.appendChild(el));
});

helpBtn.addEventListener('click', () => {
  helpText.style.display = helpText.style.display === 'block' ? 'none' : 'block';
});

window.addEventListener('load', () => loadFacts('Born'));
</script>
</body>
</html>

<!doctype html>
<html lang="mi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NCEA Te Reo Flashcards + Matching</title>
  <style>
    body {
      margin: 0;
      font-family: 'Nunito', sans-serif;
      background: #fbfbff;
      color: #222;
      padding: 18px;
    }
    header {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
    }
    h1 {
      margin: 0;
      font-size: 1.4rem;
    }
    .levels, .categories, .sorts {
      margin: 12px 0;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    button {
      border: 0;
      padding: 8px 12px;
      border-radius: 999px;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
      background: #e0e0e0;
      transition: background 0.2s;
    }
    button[aria-pressed="true"] {
      background: #4CAF50;
      color: white;
    }
    button:hover {
      background: #d0d0d0;
    }
    button[aria-pressed="true"]:hover {
      background: #45a049;
    }
    .flash-wrap {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 14px;
      margin-top: 16px;
    }
    .card {
      background: #fff;
      border-radius: 14px;
      min-height: 120px;
      padding: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
      cursor: pointer;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }
    .card.flipped {
      transform: rotateY(180deg);
    }
    .face {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 1.05rem;
      padding: 12px;
      border-radius: 14px;
      backface-visibility: hidden;
    }
    .front {
      background: #fff;
    }
    .back {
      transform: rotateY(180deg);
    }
    .level-1 .front {
      background: #ffe6e6; /* Light Pink */
    }
    .level-2 .front {
      background: #ffebcc; /* Light Orange (Peach) */
    }
    .level-3 .front {
      background: #e6ffe6; /* Light Green */
    }
    .matching {
      margin-top: 28px;
    }
    .match-wrap {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 14px;
      margin-top: 12px;
    }
    .match-card {
      background: #fff;
      padding: 12px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);
      text-align: center;
      cursor: pointer;
      transition: background 0.2s;
    }
    .match-card.selected {
      background: #4CAF50;
      color: white;
    }
    .match-card.matched {
      background: #a0d0a0;
      color: white;
      cursor: default;
    }
    .banner {
      display: none;
      padding: 14px;
      border-radius: 12px;
      margin-top: 14px;
      text-align: center;
      background: linear-gradient(90deg, #ECFDF5, #EEF2FF);
    }
    .banner.show {
      display: block;
    }
  </style>
</head>
<body>
  <header>
    <h1>NCEA te reo ‚Äî Flashcards + Matching</h1>
  </header>

  <!-- Level filter buttons -->
  <div class="levels">
    <button data-level="all" aria-pressed="true">All levels</button>
    <button data-level="1">Level 1</button>
    <button data-level="2">Level 2</button>
    <button data-level="3">Level 3</button>
  </div>

  <!-- Category filter buttons -->
  <div class="categories">
    <button data-category="all" aria-pressed="true">All categories</button>
    <!-- Dynamically populated -->
  </div>

  <!-- Sort control buttons -->
  <div class="sorts">
    <button data-sort="random">üîÄ Random</button>
    <button data-sort="alpha-te">üî§ MƒÅori (A‚ÄìZ)</button>
    <button data-sort="alpha-en">üî§ English (A‚ÄìZ)</button>
    <button data-sort="level">üéì By Level</button>
    <button data-sort="category">üìö By Category</button>
  </div>

  <section aria-labelledby="flashcards-title">
    <h2 id="flashcards-title" class="sr-only">Flashcards</h2>
    <div id="flashcards" class="flash-wrap" aria-live="polite"></div>
  </section>

  <section class="matching" aria-labelledby="matching-title">
    <h2 id="matching-title">Matching exercise ‚Äî groups of 6</h2>
    <button id="new-set">New group</button>
    <div id="match-area" class="match-wrap"></div>
    <div id="banner" class="banner">Kia ora ‚Äî pai rawa! All pairs matched.</div>
  </section>

  <script>
    const sentences = [
      // [Previous merged sentences array, unchanged]
      {level:1, category:'Rereingoa', te:'Ko Hƒìmi t≈çku ingoa.', en:'My name is Hƒìmi.'},
      {level:1, category:'Rereingoa', te:'Ko taku whaea tƒìnƒÅ.', en:'That‚Äôs my mother.'},
      {level:1, category:'Rereingoa', te:'Ko te tumuaki tƒìrƒÅ o te kura.', en:'That‚Äôs the principal of the school.'},
      {level:1, category:'Rereingoa', te:'Ko wai tƒìrƒÅ tamaiti?', en:'Who is that child?'},
      {level:1, category:'Rereingoa', te:'Ko te aha tƒìnei rƒÅ?', en:'What day is it today?'},
      {level:1, category:'Rereingoa', te:'He kuia ngƒÅkau mƒÅhaki ia.', en:'She is a kind old woman.'},
      {level:1, category:'Rereingoa', te:'He kaiako a TƒÅmati.', en:'TƒÅmati is a teacher.'},
      {level:1, category:'Rereingoa', te:'Ko te koroua nihoniho o te marae tƒìrƒÅ.', en:'That‚Äôs the grumpy old man of the marae.'},
      {level:1, category:'Rereingoa', te:'He koroua nihoniho a Hone.', en:'Hone is a grumpy old man.'},
      {level:1, category:'Rereingoa', te:'Ehara au i a Hone.', en:'I am not Hone.'},
      {level:1, category:'Rereingoa', te:'Ehara tƒìnƒÅ i taku whaea.', en:'That‚Äôs not my mother.'},
      {level:1, category:'Rereingoa', te:'Ehara tƒìrƒÅ i te tumuaki o te kura.', en:'That‚Äôs not the principal of the school.'},
      {level:1, category:'Rereingoa', te:'Ehara tƒìrƒÅ i te koroua nihoniho o te marae.', en:'That‚Äôs not the grumpy old man of the marae.'},
      {level:1, category:'Rereingoa', te:'Ehara a Hone i te koroua nihoniho.', en:'Hone isn‚Äôt a grumpy old man.'},
      {level:1, category:'Rereingoa', te:'Ko Mere te kaiako.', en:'Mere is the teacher.'},
      {level:1, category:'Rereingoa', te:'Ko Hƒìmi te tama.', en:'Hƒìmi is the boy.'},
      {level:1, category:'Rereingoa', te:'Ko Pita rƒÅua ko Mere ngƒÅ kaiako.', en:'Pita and Mere are the teachers.'},
      {level:1, category:'Rereingoa', te:'Ko au tƒìnei.', en:'This is me.'},
      {level:1, category:'Rereingoa', te:'He kaiako ahau.', en:'I am a teacher.'},
      {level:1, category:'Rereingoa', te:'He aha tƒìnei?', en:'What is this?'},
      {level:1, category:'Rereingoa', te:'He pene tƒìnei.', en:'This is a pen.'},
      {level:1, category:'Rereingoa', te:'He aha t≈ç ingoa?', en:'What is your name?'},
      {level:1, category:'Rereingoa', te:'Ko Mere t≈çku ingoa.', en:'My name is Mere.'},
      {level:1, category:'Rereingoa', te:'N≈ç TƒÅmaki Makaurau ahau.', en:'I am from Auckland.'},
      {level:1, category:'Rereingoa', te:'He aha tƒìnƒÅ?', en:'What is that?'},
      {level:1, category:'Rereingoa', te:'He ngeru tƒìnƒÅ.', en:'That is a cat.'},
      {level:1, category:'Rereingoa', te:'He aha tƒìrƒÅ?', en:'What is that over there?'},
      {level:1, category:'Rereingoa', te:'He whare tƒìrƒÅ.', en:'That over there is a house.'},
      {level:1, category:'Rereingoa', te:'Ko wai t≈ç hoa?', en:'Who is your friend?'},
      {level:1, category:'Rereingoa', te:'Ko Hƒìmi t≈çku hoa.', en:'Hƒìmi is my friend.'},
      {level:1, category:'Reremahi', te:'I te moe te whƒÅnau.', en:'The family slept.'},
      {level:1, category:'Reremahi', te:'Kua oho a Tƒ´moti.', en:'Tƒ´moti has woken up.'},
      {level:1, category:'Reremahi', te:'Me oma tƒÅtou.', en:'We should run.'},
      {level:1, category:'Reremahi', te:'Ka t≈´ te hui ƒÅp≈çp≈ç.', en:'The meeting is tomorrow.'},
      {level:1, category:'Reremahi', te:'Ka t≈´ rƒÅtou, ka katakata.', en:'They stood and laughed.'},
      {level:1, category:'Reremahi', te:'E oma!', en:'Run!'},
      {level:1, category:'Reremahi', te:'E t≈´!', en:'Stand up!'},
      {level:1, category:'Reremahi', te:'E moe!', en:'Go to sleep!'},
      {level:1, category:'Reremahi', te:'KƒÅore te whƒÅnau i te moe.', en:'The family isn‚Äôt sleeping.'},
      {level:1, category:'Reremahi', te:'KƒÅore an≈ç a Tƒ´moti kia oho.', en:'Tƒ´moti hasn‚Äôt woken up yet.'},
      {level:1, category:'Reremahi', te:'Me kaua tƒÅtou e oma.', en:'We shouldn‚Äôt run.'},
      {level:1, category:'Reremahi', te:'KƒÅore te hui e t≈´ ƒÅp≈çp≈ç.', en:'The meeting won‚Äôt be tomorrow.'},
      {level:1, category:'Reremahi', te:'Kaua e oma.', en:'Don‚Äôt run.'},
      {level:1, category:'Reremahi', te:'He aha a Hone i pukuriri ai?', en:'Why did Hone get angry?'},
      {level:1, category:'Reremahi', te:'He h≈çhƒÅ n≈çna.', en:'He was annoyed.'},
      {level:1, category:'Reremahi', te:'He aha koe i kore ai e haere?', en:'Why didn‚Äôt you go?'},
      {level:1, category:'Reremahi', te:'KƒÅore ahau i pƒ´rangi ki te haere.', en:'Because I didn‚Äôt want to go.'},
      {level:1, category:'Reremahi', te:'NƒÅ te mea i te h≈çhƒÅ ia.', en:'Because he was annoyed.'},
      {level:1, category:'Reremahi', te:'Me whakapaipai koe i te whare.', en:'You should tidy the house.'},
      {level:1, category:'Reremahi', te:'E ako ana au i te reo MƒÅori.', en:'I am learning te reo MƒÅori.'},
      {level:1, category:'Reremahi', te:'Kia tuhi au i ngƒÅ k≈çrero.', en:'I‚Äôll write the words.'},
      {level:1, category:'Reremahi', te:'Me whakamƒÅrama koe i ngƒÅ tohutohu.', en:'You should explain the instructions.'},
      {level:1, category:'Reremahi', te:'E haere ana rƒÅua ki te tƒÅone.', en:'They are both going to town.'},
      {level:1, category:'Reremahi', te:'E hoki mai ana rƒÅua i te tƒÅone.', en:'They are both returning from town.'},
      {level:1, category:'Reremahi', te:'Tunu kai.', en:'To cook food.'},
      {level:1, category:'Reremahi', te:'Tuhi k≈çrero.', en:'To write words.'},
      {level:1, category:'Reremahi', te:'PƒÅnui pukapuka.', en:'To read books.'},
      {level:1, category:'Reremahi', te:'Tuku karere.', en:'To send messages.'},
      {level:1, category:'Reremahi', te:'Kei te oma te kuri.', en:'The dog is running.'},
      {level:1, category:'Reremahi', te:'Kei te noho a Pita.', en:'Pita is sitting.'},
      {level:1, category:'Reremahi', te:'I haere au ki te toa.', en:'I went to the shop.'},
      {level:1, category:'Reremahi', te:'I oma te tamaiti.', en:'The child ran.'},
      {level:1, category:'Reremahi', te:'Ka kai mƒÅtou.', en:'We will eat.'},
      {level:1, category:'Reremahi', te:'Ka haere ia ki te kura.', en:'He/she will go to school.'},
      {level:1, category:'Reremahi', te:'Ka waiata rƒÅtou.', en:'They will sing.'},
      {level:1, category:'Reremahi', te:'Kua tae mai te manuhiri.', en:'The visitor has arrived.'},
      {level:1, category:'Reremahi', te:'Kua kai ngƒÅ tamariki.', en:'The children have eaten.'},
      {level:1, category:'Reremahi', te:'E kai ana au.', en:'I am eating.'},
      {level:1, category:'Reremahi', te:'E k≈çrero ana rƒÅtou.', en:'They are talking.'},
      {level:1, category:'Reremahi', te:'E oma ana te kuri.', en:'The dog is running.'},
      {level:1, category:'Reremahi', te:'Me haere tƒÅtou.', en:'We should go.'},
      {level:1, category:'Reremahi', te:'Me kai koe.', en:'You should eat.'},
      {level:1, category:'Reremahi', te:'Aua atu ki reira.', en:'Go away from there.'},
      {level:1, category:'Reremahi', te:'Haere mai ki konei.', en:'Come here.'},
      {level:1, category:'Reremahi', te:'TƒìnƒÅ koe.', en:'Greetings to you.'},
      {level:1, category:'Reremahi', te:'TƒìnƒÅ k≈çrua.', en:'Greetings to you two.'},
      {level:1, category:'Reremahi', te:'TƒìnƒÅ koutou.', en:'Greetings to you (plural).'},
      {level:1, category:'Reremahi', te:'Haere rƒÅ.', en:'Goodbye (to someone leaving).'},
      {level:1, category:'Reremahi', te:'E noho rƒÅ.', en:'Goodbye (to someone staying).'},
      {level:1, category:'Reremahi', te:'ƒÄe.', en:'Yes.'},
      {level:1, category:'Reremahi', te:'KƒÅo.', en:'No.'},
      {level:1, category:'RerehƒÅng≈´', te:'Horoia ngƒÅ rƒ´hi.', en:'Wash the dishes.'},
      {level:1, category:'RerehƒÅng≈´', te:'Tahitahia te papa.', en:'Sweep the floor.'},
      {level:1, category:'RerehƒÅng≈´', te:'Tapahia ngƒÅ rƒ´wai ki te mƒÅripi.', en:'Cut the potatoes with the knife.'},
      {level:1, category:'RereƒÅhua', te:'He ƒÅtaahua tƒìnei wƒÅhi.', en:'This place is beautiful.'},
      {level:1, category:'RereƒÅhua', te:'Kua maroke ngƒÅ kƒÅkahu.', en:'The clothes are now dry.'},
      {level:1, category:'RereƒÅhua', te:'I wera rawa a roto o te akomanga.', en:'It was too hot in the classroom.'},
      {level:1, category:'RereƒÅhua', te:'Kei te pƒìhea ngƒÅ mahi? Kei te pai.', en:'How‚Äôs your work going? It‚Äôs good.'},
      {level:1, category:'RereƒÅhua', te:'He ƒÅhua reka ngƒÅ kai.', en:'The food is kind of nice.'},
      {level:1, category:'RereƒÅhua', te:'Kua tino ƒÅtaahua te kƒÅinga nei.', en:'This house is now very beautiful.'},
      {level:1, category:'RereƒÅhua', te:'KƒÅore tƒìnei wƒÅhi i te tino ƒÅtaahua.', en:'This place isn‚Äôt very beautiful.'},
      {level:1, category:'RereƒÅhua', te:'KƒÅore e pai ana ngƒÅ mahi.', en:'The work isn‚Äôt good.'},
      {level:1, category:'RereƒÅhua', te:'He pai te rangi.', en:'The day is fine.'},
      {level:1, category:'RereƒÅhua', te:'Kei te pai au.', en:'I am fine.'},
      {level:1, category:'RereƒÅhua', te:'He tino pai tƒìnei rƒÅ.', en:'This day is very good.'},
      {level:1, category:'RereƒÅhua', te:'Kei te pƒìhea koe?', en:'How are you?'},
      {level:1, category:'RereƒÅhua', te:'Kei te ora au.', en:'I am well.'},
      {level:1, category:'RerewƒÅhi', te:'I hea te hui? I Paraparaumu.', en:'Where was the meeting? In Paraparaumu.'},
      {level:1, category:'RerewƒÅhi', te:'Kei te kura te p≈ç whakanui i a Matariki.', en:'The Matariki night celebration is at school.'},
      {level:1, category:'RerewƒÅhi', te:'KƒÅore te hui i Paraparaumu.', en:'The meeting isn‚Äôt in Paraparaumu.'},
      {level:1, category:'RerewƒÅhi', te:'KƒÅore te p≈ç whakanui i a Matariki i te kura.', en:'The Matariki night celebration isn‚Äôt at school.'},
      {level:1, category:'RerewƒÅhi', te:'Kei te kura ia.', en:'He/she is at school.'},
      {level:1, category:'RerewƒÅhi', te:'N≈ç hea koe?', en:'Where are you from?'},
      {level:1, category:'Rerekaimahi', te:'NƒÅ wai te keke i tunu?', en:'Who cooked the cake?'},
      {level:1, category:'Rerekaimahi', te:'MƒÅku te tƒ´ma e whakaako.', en:'I‚Äôll teach the team.'},
      {level:1, category:'Rerekaimahi', te:'Ehara nƒÅku te keke i tunu.', en:'I didn‚Äôt cook the cake.'},
      {level:1, category:'Rerekaimahi', te:'Ehara mƒÅku te tƒ´ma e whakaako.', en:'I didn‚Äôt teach the team.'},
      {level:1, category:'Rerekaimahi', te:'Kaua mƒÅku te tƒ´ma e whakaako.', en:'Don‚Äôt leave it for me to teach the team.'},
      {level:1, category:'RerewƒÅ', te:'I te taenga mai o te kaiwawao, ka tƒ´mata te kƒìmu.', en:'When the referee arrived, the game started.'},
      {level:1, category:'RerewƒÅ', te:'N≈ç te Wenerei, ka t≈´ te whakataetae ki Whitinga.', en:'On Wednesday, the competition was held at Whitianga.'},
      {level:1, category:'RerewƒÅ', te:'Kia oti te mahi, ka hoki mƒÅtou ki te kƒÅinga.', en:'When the work is completed, we will return home.'},
      {level:1, category:'RerewƒÅ', te:'Hiki ana te hui, hokihoki ana ngƒÅ tƒÅngata ki te kƒÅinga.', en:'When the meeting finished, people returned home.'},
      {level:1, category:'RerewƒÅ', te:'Ka tae atu ana te ope ka p≈çwhiritia.', en:'When the group arrived they were welcomed.'},
      {level:1, category:'Reretau', te:'Kotahi mano, e rima rau, e whƒÅ tekau.', en:'One thousand, five hundred and forty.'},
      {level:1, category:'Reretau', te:'E ono mano, e rua rau, tekau mƒÅ tahi.', en:'Six thousand, two hundred and eleven.'},
      {level:1, category:'Reretau', te:'Tekau ngƒÅ manu i te pae.', en:'There were ten birds on the perch.'},
      {level:1, category:'Reretau', te:'TokowhƒÅ ngƒÅ tamariki i tae mai.', en:'Four children arrived.'},
      {level:1, category:'Reretau', te:'I waru ngƒÅ pene i hokona e au.', en:'I bought four pens.'},
      {level:1, category:'Reretau', te:'Ka whitu katoa ngƒÅ pukapuka.', en:'Seven books in total.'},
      {level:1, category:'Reretau', te:'Kua rima ngƒÅ kaitƒÅkaro inƒÅianei.', en:'We now have five players.'},
      {level:1, category:'Reretau', te:'Kia hia ngƒÅ huka i t≈ç tƒ´?', en:'How much sugar is needed in your tea?'},
      {level:2, category:'Rereingoa', te:'Ko Mere rƒÅua ko Pita ngƒÅ kaiako o te kura.', en:'Mere and Pita are the teachers of the school.'},
      {level:2, category:'Rereingoa', te:'Ko wai te kaiako o t≈ç kura?', en:'Who is the teacher of your school?'},
      {level:2, category:'Rereingoa', te:'Ko te kaiako o te reo MƒÅori a Hƒìmi.', en:'Hƒìmi is the MƒÅori-language teacher.'},
      {level:2, category:'Rereingoa', te:'He kaiako pai ia.', en:'He/she is a good teacher.'},
      {level:2, category:'Reremahi', te:'I haere mƒÅtou ki te kura.', en:'We went to school.'},
      {level:2, category:'Reremahi', te:'Ka kai ngƒÅ tamariki i te tina.', en:'The children will eat lunch.'},
      {level:2, category:'Reremahi', te:'E k≈çrero ana rƒÅtou i te akomanga.', en:'They are talking in the classroom.'},
      {level:2, category:'Reremahi', te:'Me haere au ki te toa.', en:'I should go to the shop.'},
      {level:2, category:'Reremahi', te:'Kaua e k≈çrero i te akomanga.', en:'Don‚Äôt talk in the classroom.'},
      {level:2, category:'Reremahi', te:'He pai ki a au te waiata.', en:'I like singing.'},
      {level:2, category:'Reremahi', te:'He kino ki a ia te ngaru.', en:'He/she dislikes the waves.'},
      {level:2, category:'Reremahi', te:'He aha te mahi a te kaiako?', en:'What is the teacher‚Äôs job?'},
      {level:2, category:'Reremahi', te:'He ako i ngƒÅ tamariki.', en:'To teach the children.'},
      {level:2, category:'Reremahi', te:'Kei te moe ngƒÅ tamariki.', en:'The children are sleeping.'},
      {level:2, category:'Reremahi', te:'Kei te kai te whƒÅnau.', en:'The family is eating.'},
      {level:2, category:'Reremahi', te:'I waiata te kaiako.', en:'The teacher sang.'},
      {level:2, category:'Reremahi', te:'Ka haere au ki te kura ƒÅp≈çp≈ç.', en:'I will go to school tomorrow.'},
      {level:2, category:'Reremahi', te:'Kua mutu te mahi.', en:'The work is finished.'},
      {level:2, category:'Reremahi', te:'Kua tae mai te kaiako.', en:'The teacher has arrived.'},
      {level:2, category:'Reremahi', te:'E haere ana mƒÅtou ki te kura.', en:'We are going to school.'},
      {level:2, category:'Reremahi', te:'E kai ana ngƒÅ tamariki i te kai.', en:'The children are eating food.'},
      {level:2, category:'Reremahi', te:'Aua atu ki te papa tƒÅkaro.', en:'Go away to the playground.'},
      {level:2, category:'Reremahi', te:'Ka kite au i a koe ƒÅp≈çp≈ç.', en:'I will see you tomorrow.'},
      {level:2, category:'Reremahi', te:'Kua kite au i a ia.', en:'I have seen him/her.'},
      {level:2, category:'Reremahi', te:'He tƒÅkaro i te papa tƒÅkaro.', en:'He plays at the playground.'},
      {level:2, category:'RerehƒÅng≈´', te:'I tunua te kai e te kuia.', en:'The food was cooked by the grandmother.'},
      {level:2, category:'RerehƒÅng≈´', te:'Ka mauria mai te kai e te kaiako.', en:'The food will be brought by the teacher.'},
      {level:2, category:'RerehƒÅng≈´', te:'Kua kitea te kurƒ´.', en:'The dog has been seen.'},
      {level:2, category:'RerehƒÅng≈´', te:'Ka haria atu te tamaiti e te matua.', en:'The child will be taken away by the parent.'},
      {level:2, category:'RereƒÅhua', te:'He nui te whare.', en:'The house is big.'},
      {level:2, category:'RereƒÅhua', te:'He iti te ngeru.', en:'The cat is small.'},
      {level:2, category:'RereƒÅhua', te:'He mƒÅ te whare.', en:'The house is white.'},
      {level:2, category:'RereƒÅhua', te:'He pai ngƒÅ kai.', en:'The food is good.'},
      {level:2, category:'RereƒÅhua', te:'He aha te tae o te whare?', en:'What is the colour of the house?'},
      {level:2, category:'RereƒÅhua', te:'He aha te rahi o te whare?', en:'What is the size of the house?'},
      {level:2, category:'RerewƒÅhi', te:'Kei te kura ngƒÅ tamariki.', en:'The children are at school.'},
      {level:2, category:'RerewƒÅhi', te:'I runga te pene i te tƒìpu.', en:'The pen was on the table.'},
      {level:2, category:'RerewƒÅhi', te:'Kei raro te ngeru i te tƒìpu.', en:'The cat is under the table.'},
      {level:2, category:'RerewƒÅhi', te:'Kei roto te tamaiti i te whare.', en:'The child is inside the house.'},
      {level:2, category:'RerewƒÅhi', te:'Kei waho te kurƒ´.', en:'The dog is outside.'},
      {level:2, category:'RerewƒÅhi', te:'Kei te papa tƒÅkaro rƒÅtou.', en:'They are at the playground.'},
      {level:2, category:'Rerekaimahi', te:'NƒÅ Hƒìmi te pene.', en:'The pen belongs to Hƒìmi.'},
      {level:2, category:'Rerekaimahi', te:'MƒÅ Mere te pene.', en:'The pen is for Mere.'},
      {level:2, category:'Rerekaimahi', te:'M≈ç wai tƒìnei pukapuka?', en:'For whom is this book?'},
      {level:2, category:'Rerekaimahi', te:'M≈çku tƒìnei pukapuka.', en:'This book is for me.'},
      {level:2, category:'Rerekaimahi', te:'He aha te mahi a te tama?', en:'What does the boy do?'},
      {level:2, category:'RerewƒÅ', te:'I te paraire i haere mƒÅtou ki te whare pikitia.', en:'On Friday we went to the movies.'},
      {level:2, category:'RerewƒÅ', te:'ƒÄ te RƒÅhina ka hoki mƒÅtou ki te kura.', en:'On Monday we will return to school.'},
      {level:2, category:'RerewƒÅ', te:'ƒÄp≈çp≈ç ka haere au ki te toa.', en:'Tomorrow I will go to the shop.'},
      {level:2, category:'RerewƒÅ', te:'I te rƒÅ nei ka oma te tama.', en:'Today the boy is running.'},
      {level:2, category:'Reretau', te:'E rua ngƒÅ pene.', en:'There are two pens.'},
      {level:2, category:'Reretau', te:'E ono ngƒÅ tamariki i te kura.', en:'There are six children at school.'},
      {level:3, category:'Rereingoa', te:'Ko te rangatira o te marae a H≈çne.', en:'H≈çne is the leader of the marae.'},
      {level:3, category:'Reremahi', te:'Ka mutu te mahi, ka hoki mƒÅtou ki te kƒÅinga.', en:'When the work finishes, we go home.'},
      {level:3, category:'Reremahi', te:'Ka kai rƒÅtou i ngƒÅ ƒÅp≈çro me ngƒÅ panana.', en:'They eat apples and bananas.'},
      {level:3, category:'Reremahi', te:'Kua tae atu rƒÅtou ki te kura.', en:'They have arrived at school.'},
      {level:3, category:'Reremahi', te:'Kua oti i a ia te mahi.', en:'He/she has finished the work.'},
      {level:3, category:'Reremahi', te:'Ka haere au ki te toa ki te hoko kai.', en:'I will go to the shop to buy food.'},
      {level:3, category:'Reremahi', te:'Ka tae atu au ki te marae ki te mihi.', en:'I will go to the marae to greet people.'},
      {level:3, category:'Reremahi', te:'I te rƒÅ nei ka whakanui te whƒÅnau i te huritau.', en:'Today the family is celebrating the birthday.'},
      {level:3, category:'Reremahi', te:'He pai ki a au te pƒÅnui pukapuka MƒÅori.', en:'I like reading MƒÅori books.'},
      {level:3, category:'Reremahi', te:'He hiahia n≈çku ki te ako i te reo MƒÅori.', en:'I have a desire to learn the MƒÅori language.'},
      {level:3, category:'RerehƒÅng≈´', te:'MƒÅ te kaiako ngƒÅ pukapuka e tuku.', en:'The books will be given by the teacher.'},
      {level:3, category:'RerehƒÅng≈´', te:'E tukuna ana ngƒÅ pukapuka e te kaiako.', en:'The books are being given by the teacher.'},
      {level:3, category:'RerehƒÅng≈´', te:'I tukuna ngƒÅ pukapuka e te kaiako.', en:'The books were given by the teacher.'},
      {level:3, category:'RerehƒÅng≈´', te:'Ka tukuna ngƒÅ pukapuka e te kaiako.', en:'The books will be given by the teacher.'},
      {level:3, category:'RereƒÅhua', te:'He nui ake te whare i tƒìrƒÅ.', en:'This house is bigger than that one.'},
      {level:3, category:'RereƒÅhua', te:'He pai ake tƒìnei kai i tƒìrƒÅ kai.', en:'This food is better than that food.'},
      {level:3, category:'RereƒÅhua', te:'He kaha rawa ia ki te mahi.', en:'He/she is very strong at work.'},
      {level:3, category:'RereƒÅhua', te:'He tino mƒÅrama t≈ç whakamƒÅrama.', en:'Your explanation is very clear.'},
      {level:3, category:'RerewƒÅhi', te:'Kei te waiata ngƒÅ tamariki i te waiata hou.', en:'The children are singing the new song.'},
      {level:3, category:'RerewƒÅhi', te:'Kua tae mai te manuhiri ki te marae.', en:'The visitor has arrived at the marae.'},
      {level:3, category:'RerewƒÅ', te:'I te wƒÅ e kai ana, ka k≈çrero mƒÅtou.', en:'While eating, we talk.'},
      {level:3, category:'RerewƒÅ', te:'MƒìnƒÅ ka ua, ka noho mƒÅtou ki roto.', en:'If it rains, we will stay inside.'},
      {level:3, category:'RerewƒÅ', te:'Ahakoa te makariri, ka haere tonu rƒÅtou.', en:'Despite the cold, they continue to go.'},
      {level:3, category:'RerewƒÅ', te:'I te wƒÅ i tae mai ai te manuhiri, ka tƒ´mata te hui.', en:'When the visitor arrived, the meeting began.'},
      {level:3, category:'RerewƒÅ', te:'Hei te ata ka haere au ki te mahi.', en:'In the morning I will go to work.'},
      {level:3, category:'Rerekaimahi', te:'NƒÅ wai te keke i tunu?', en:'Who cooked the cake?'},
      {level:3, category:'Rerekaimahi', te:'Ehara nƒÅku te keke i tunu.', en:'I didn‚Äôt cook the cake.'},
      {level:3, category:'Rerekaimahi', te:'E ai ki te kaiako, he pai t≈ç mahi.', en:'According to the teacher, your work is good.'},
      {level:3, category:'Reretau', te:'E waru ngƒÅ ƒÅkonga i t≈ç mƒÅtou r≈çp≈´.', en:'There are eight students in our group.'}
    ];

    let activeLevel = 'all', activeCategory = 'all', sortMode = 'random';
    const flashWrap = document.getElementById('flashcards');
    const matchArea = document.getElementById('match-area');
    const banner = document.getElementById('banner');
    const levelButtons = document.querySelectorAll('.levels button');
    const sortButtons = document.querySelectorAll('.sorts button');
    const categoryWrap = document.querySelector('.categories');

    // Dynamically generate category buttons
    const categories = [...new Set(sentences.map(s => s.category))];
    categories.forEach(cat => {
      const btn = document.createElement('button');
      btn.dataset.category = cat;
      btn.textContent = cat;
      btn.setAttribute('aria-pressed', cat === 'all' ? 'true' : 'false');
      categoryWrap.appendChild(btn);
    });
    const categoryButtons = document.querySelectorAll('.categories button');

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function renderFlashcards() {
      let list = [...sentences];
      if (activeLevel !== 'all') list = list.filter(s => String(s.level) === String(activeLevel));
      if (activeCategory !== 'all') list = list.filter(s => s.category === activeCategory);
      if (sortMode === 'alpha-te') list.sort((a, b) => a.te.localeCompare(b.te));
      else if (sortMode === 'alpha-en') list.sort((a, b) => a.en.localeCompare(b.en));
      else if (sortMode === 'level') list.sort((a, b) => a.level - b.level);
      else if (sortMode === 'category') list.sort((a, b) => a.category.localeCompare(b.category));
      else shuffle(list);

      flashWrap.innerHTML = '';
      list.forEach(s => {
        const card = document.createElement('div');
        card.className = `card level-${s.level}`;
        card.innerHTML = `<div class="face front"><div>${s.te}</div></div><div class="face back"><div>${s.en}</div></div>`;
        card.addEventListener('click', () => card.classList.toggle('flipped'));
        flashWrap.appendChild(card);
      });
    }

    levelButtons.forEach(b => b.addEventListener('click', () => {
      levelButtons.forEach(x => x.setAttribute('aria-pressed', 'false'));
      b.setAttribute('aria-pressed', 'true');
      activeLevel = b.dataset.level;
      renderFlashcards();
      renderMatching(); // Update matching when level changes
    }));

    categoryButtons.forEach(b => b.addEventListener('click', () => {
      categoryButtons.forEach(x => x.setAttribute('aria-pressed', 'false'));
      b.setAttribute('aria-pressed', 'true');
      activeCategory = b.dataset.category;
      renderFlashcards();
      renderMatching(); // Update matching when category changes
    }));

    sortButtons.forEach(b => b.addEventListener('click', () => {
      sortButtons.forEach(x => x.setAttribute('aria-pressed', 'false'));
      b.setAttribute('aria-pressed', 'true');
      sortMode = b.dataset.sort;
      renderFlashcards();
    }));

    // Matching game logic
    let selectedCards = [];
    let matchedPairs = 0;

    function renderMatching() {
      let list = [...sentences];
      if (activeLevel !== 'all') list = list.filter(s => String(s.level) === String(activeLevel));
      if (activeCategory !== 'all') list = list.filter(s => s.category === activeCategory);
      shuffle(list);
      list = list.slice(0, 6); // Take 6 sentences
      const pairs = list.map(s => [
        { text: s.te, type: 'te', match: s.en },
        { text: s.en, type: 'en', match: s.te }
      ]).flat();
      shuffle(pairs);

      matchArea.innerHTML = '';
      pairs.forEach(p => {
        const card = document.createElement('div');
        card.className = 'match-card';
        card.textContent = p.text;
        card.dataset.match = p.match;
        card.dataset.type = p.type;
        card.addEventListener('click', () => handleMatchClick(card));
        matchArea.appendChild(card);
      });
      selectedCards = [];
      matchedPairs = 0;
      banner.classList.remove('show');
    }

    function handleMatchClick(card) {
      if (card.classList.contains('matched') || selectedCards.includes(card)) return;
      card.classList.add('selected');
      selectedCards.push(card);

      if (selectedCards.length === 2) {
        const [card1, card2] = selectedCards;
        if (card1.dataset.match === card2.textContent && card2.dataset.match === card1.textContent) {
          card1.classList.add('matched');
          card2.classList.add('matched');
          matchedPairs++;
          if (matchedPairs === 6) {
            banner.classList.add('show');
          }
        } else {
          setTimeout(() => {
            card1.classList.remove('selected');
            card2.classList.remove('selected');
          }, 1000);
        }
        selectedCards = [];
      }
    }

    document.getElementById('new-set').addEventListener('click', renderMatching);

    // Initialize
    renderFlashcards();
    renderMatching();

    // Accessibility: Add screen reader only class
    document.querySelectorAll('.sr-only').forEach(el => {
      el.style.position = 'absolute';
      el.style.width = '1px';
      el.style.height = '1px';
      el.style.padding = '0';
      el.style.margin = '-1px';
      el.style.overflow = 'hidden';
      el.style.clip = 'rect(0, 0, 0, 0)';
      el.style.border = '0';
    });
  </script>
</body>
</html>

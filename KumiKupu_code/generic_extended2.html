<!DOCTYPE html>
<html>
<head>
<base target="_top">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Te Reo Māori me te Tunukai</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background-color: #fff2cc; }
  .header-container { display: flex; flex-wrap: wrap; align-items: center; gap: 20px; margin-bottom: 20px; }
  .header-container h2 { margin: 0; color: #d2691e; font-size: 2.2rem; }
  .selector-container {
    background-color: #ffd700; border: 3px solid #ff8c00; border-radius: 15px;
    padding: 5px 15px; display: inline-block;
  }
  #category-selector {
    min-width: 320px; background: transparent; border: none;
    font-family: 'Poppins', sans-serif; font-size: clamp(1.8rem, 5vw, 2.5rem);
    font-weight: 700; color: #333; cursor: pointer; text-align: center; text-align-last: center;
  }

  /* Flashcards */
  #flashcards-section { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin: 20px 0; }
  .card { height: 110px; padding: 10px; border: 4px solid #333; border-radius: 12px; cursor: pointer;
          display: flex; align-items: center; justify-content: center; text-align: center;
          font-weight: bold; font-size: 1.4rem; background: #fffacd; transition: all 0.6s; }
  .card.flipped { background: #ffe4b5; }

  /* Quiz & Matching */
  .quiz-options { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px; }
  .quiz-options button { padding: 12px; font-size: 1.1rem; border-radius: 8px; border: none; cursor: pointer; }
  .matched-container { display: flex; flex-direction: column; gap: 10px; margin: 20px 0; }
  .pair { padding: 12px; border-radius: 10px; font-size: 1.4rem; font-weight: bold; text-align: center; }
  .matching-container { display: flex; justify-content: space-between; gap: 20px; margin-top: 20px; }
  .matching-box { flex: 1; display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;
                  min-height: 200px; border: 2px dashed #999; padding: 10px; border-radius: 10px; background: #fafafa; }
  .drag-item { height: 60px; border: 2px solid #666; background: #eee; cursor: pointer;
               display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem; }

  /* Sentence Builder */
  #sentence-builder { margin: 40px 0; padding: 20px; background: #fff8dc; border-radius: 15px; border: 3px solid #d2691e; }
  .builder-sentence { background: white; padding: 18px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
  .english-prompt { font-weight: bold; font-size: 1.35rem; margin-bottom: 14px; color: #d2691e; }
  .answer-area, .word-bank {
    display: flex; flex-wrap: wrap; gap: 10px; min-height: 56px; padding: 12px;
    border: 2px dashed #aaa; border-radius: 10px; margin-top: 10px;
  }
  .answer-area { background: #f9f9f9; min-height: 76px; }
  .word {
    padding: 10px 18px; background: #e0e0e0; border-radius: 8px; cursor: grab;
    user-select: none; transition: all 0.2s; font-weight: 600;
  }
  .word:hover { background: #d0d0d0; }
  .word.in-answer { background: #daa520; color: white; }
  .builder-sentence.correct { background: #f0fff0; border-left: 6px solid #daa520; }

  @media (max-width: 768px) {
    #flashcards-section, .quiz-options, .matching-box { grid-template-columns: repeat(2, 1fr); }
    .matching-container { flex-direction: column; }
  }
</style>
</head>
<body>

<div class="header-container">
  <h2>Te Reo Māori me te Tunukai</h2>
  <div class="selector-container">
    <select id="category-selector" onchange="updateContent()">
      <option value="select" selected>--- Select ---</option>
      <option value="overview">Overview / Key Examples</option>
      <option value="section1">Ngā Utu me ngā Taputapu</option>
      <option value="section2">Ngā Momo Kai</option>
      <option value="section3">Ngā Mahi Tunukai</option>
      <option value="section4">Te Hāngī</option>
      <option value="section5">Te Rewena Parāoa</option>
    </select>
  </div>
</div>

<h3>Flashcards</h3>
<div id="flashcards-section"></div>

<h3>Quiz</h3>
<div id="quiz-section"></div>

<h3>Matching – Click two to pair</h3>
<div class="matched-container" id="matched-pairs"></div>
<div id="matching-section"></div>

<h3 style="margin-top:40px; color:#d2691e;">Sentence Builder</h3>
<div id="sentence-builder">
  <div id="sentences-container"></div>
</div>

<!-- Optional YouTube video (a short silent hāngī video – feel free to change) -->
<div style="text-align:center; margin:40px 0;">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/0rYb-5z3Z1c?si=example" title="Silent Hāngī How-To" frameborder="0" allowfullscreen></iframe>
</div>

<div style="text-align:center; margin-top:20px;">
  <a href="https://github.com/Whaea-Pippy/GAME-DEVELOPMENT/blob/main/KumiKupu_code/generic_extended.html" target="_blank" 
     style="display: inline-block; background-color: #d2691e; color: white; padding: 15px 30px; text-decoration: none; 
            font-size: 1.5rem; border-radius: 10px; font-family: 'Poppins', sans-serif;">
    Link to Code
  </a>
</div>

<script>
// ────────────────── EDIT ONLY THESE TWO BLOCKS ──────────────────
const data = {
  overview: [
    ["tunu", "to cook"], ["kai", "food / to eat"], ["wai", "water"], ["tote", "salt"],
    ["huka", "sugar"], ["miraka", "milk"], ["heti", "to fry"], ["kohua", "to boil"]
  ],
  section1: [ // Ngā Utu me ngā Taputapu (Utensils & Tools)
    ["kōpiro", "spoon"], ["maripi", "knife"], ["pōti", "pot / pan"], ["puru", "fork"],
    ["kapu", "cup"], ["pereti", "plate"], ["umu", "oven"], ["pātē", "bowl"]
  ],
  section2: [ // Ngā Momo Kai (Types of Food)
    ["rīwai", "potato"], ["kāreti", "carrot"], ["kamokamo", "pumpkin"], ["kānga", "corn"],
    ["mīti", "meat"], ["ikia", "fish"], ["huawhenua", "vegetables"], ["paraoa", "bread / flour"]
  ],
  section3: [ // Ngā Mahi Tunukai (Cooking Actions)
    ["tapahi", "to cut"], ["ranu", "to mix"], ["kohua", "to boil"], ["heti", "to fry"],
    ["tunu", "to cook / bake"], ["tao", "to bake"], ["pao", "to stir"], ["tatari", "to wait"]
  ],
  section4: [ // Te Hāngī
    ["hāngī", "earth oven / food cooked in earth oven"], ["kōhatu", "stones"], ["pokepoke", "to wrap"],
    ["rākau", "wood"], ["kōrero", "basket (for food)"], ["whakawera", "to heat"], ["hipoki", "to cover"], ["tīmua", "steam"]
  ],
  section5: [ // Te Rewena Parāoa
    ["rewena", "starter / leaven"], ["paraoa", "bread / flour"], ["pawera", "to rise / ferment"],
    ["penupenu", "to mash"], ["wai māhana", "warm water"], ["huka", "sugar"], ["tote", "salt"], ["whakaranua", "mix together"]
  ]
  // You can add more sections later if you want!
};

const sentenceBuilderData = {
  overview: [
    { en: "I am cooking food.", te: "Kei te tunu kai ahau." },
    { en: "Pour the water.", te: "Ringihia te wai." }
  ],
  section1: [
    { en: "Pass me the spoon.", te: "Homai te kōpiro." },
    { en: "The knife is sharp.", te: "He koi te maripi." }
  ],
  section2: [
    { en: "I like potatoes.", te: "He pai ki ahau ngā rīwai." },
    { en: "Cut the carrots.", te: "Tapahia ngā kāreti." }
  ],
  section3: [
    { en: "Boil the potatoes.", te: "Kohuatia ngā rīwai." },
    { en: "Mix everything together.", te: "Ranua ngā mea katoa." }
  ],
  section4: [
    { en: "We are making a hāngī.", te: "Kei te mahi hāngī mātou." },
    { en: "Heat the stones.", te: "Whakawerahia ngā kōhatu." }
  ],
  section5: [
    { en: "Mash the boiled potatoes.", te: "Penupenua ngā rīwai kohuatia." },
    { en: "Let the rewena rise.", te: "Waiho kia pawera te rewena." }
  ]
};
// ────────────────── STOP EDITING ──────────────────

let selectedWords = [];
let currentCategory = 'overview';

function shuffleArray(arr) { const a = arr.slice(); for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [a[i], a[j]] = [a[j], a[i]]; } return a; }

function showFlashcards() {
  const c = document.getElementById('flashcards-section'); c.innerHTML = '';
  selectedWords.forEach(row => {
    const card = document.createElement('div'); card.className = 'card'; card.textContent = row[0];
    card.onclick = () => { card.classList.toggle('flipped'); card.textContent = card.classList.contains('flipped') ? row[1] : row[0]; };
    c.appendChild(card);
  });
}

function showQuiz() {
  const c = document.getElementById('quiz-section'); c.innerHTML = '';
  if (selectedWords.length < 4) return;
  selectedWords.forEach(row => {
    const q = document.createElement('div'); q.innerHTML = `<b>${row[0]}</b>`;
    const opts = document.createElement('div'); opts.className = 'quiz-options';
    const all = Object.values(data).flat().map(p => p[1]);
    const distractors = []; while (distractors.length < 3) { const r = all[Math.floor(Math.random()*all.length)]; if (r !== row[1] && !distractors.includes(r)) distractors.push(r); }
    shuffleArray([row[1], ...distractors]).forEach(opt => {
      const b = document.createElement('button'); b.textContent = opt;
      b.onclick = () => { b.style.backgroundColor = opt === row[1] ? 'lightgreen' : 'lightcoral'; opts.querySelectorAll('button').forEach(x => x.disabled = true); };
      opts.appendChild(b);
    });
    q.appendChild(opts); c.appendChild(q);
  });
}

function showMatching() {
  const section = document.getElementById('matching-section');
  const matched = document.getElementById('matched-pairs');
  section.innerHTML = ''; matched.innerHTML = '';
  const wrapper = document.createElement('div'); wrapper.className = 'matching-container';
  const left = document.createElement('div'); left.className = 'matching-box';
  const right = document.createElement('div'); right.className = 'matching-box';
  wrapper.append(left, right); section.appendChild(wrapper);
  const lWords = selectedWords.map(p => p[0]);
  const rWords = shuffleArray(selectedWords.map(p => p[1]));
  let first = null;
  const colors = ['#ff9e9e','#ffd89e','#fff599','#b5ffbd','#99f2ff','#d0bbff','#ffb3ff','#ff99cc'];
  [...lWords, ...rWords].forEach((word, i) => {
    const box = document.createElement('div'); box.className = 'drag-item'; box.textContent = word; box.dataset.word = word;
    (i < lWords.length ? left : right).appendChild(box);
    box.onclick = function() {
      if (box.style.backgroundColor) return;
      if (!first) { first = box; box.style.border = '4px solid #0066ff'; }
      else if (first !== box) {
        const l = first.parentElement === left ? first.dataset.word : box.dataset.word;
        const r = first.parentElement === right ? first.dataset.word : box.dataset.word;
        const correct = selectedWords.some(p => p[0] === l && p[1] === r);
        if (correct) {
          const col = colors[matched.children.length % colors.length];
          [first, box].forEach(el => { el.style.backgroundColor = col; el.style.border = 'none'; el.onclick = null; });
          const chip = document.createElement('div'); chip.className = 'pair'; chip.style.backgroundColor = col;
          chip.innerHTML = `${l} ↔ ${r}`; matched.appendChild(chip);
        } else {
          first.style.border = box.style.border = '4px solid red';
          setTimeout(() => { first.style.border = box.style.border = '2px solid #666'; }, 600);
        }
        first.style.border = '2px solid #666'; first = null;
      }
    };
  });
}

function showSentenceBuilder() {
  const container = document.getElementById('sentences-container');
  container.innerHTML = '';
  const sentences = sentenceBuilderData[currentCategory] || sentenceBuilderData.overview;
  sentences.forEach((item, idx) => {
    const div = document.createElement('div');
    div.className = 'builder-sentence';
    div.innerHTML = `
      <div class="english-prompt">${item.en}</div>
      <div class="answer-area" data-index="${idx}"></div>
      <div class="word-bank" data-index="${idx}"></div>
    `;
    container.appendChild(div);
    const correctWords = item.te.trim().split(/\s+/);
    const shuffled = shuffleArray([...correctWords]);
    const bank = div.querySelector('.word-bank');
    shuffled.forEach(word => {
      const span = document.createElement('span');
      span.className = 'word';
      span.textContent = word;
      span.onclick = () => moveWord(span, div, correctWords);
      bank.appendChild(span);
    });
  });
}

function moveWord(el, sentenceDiv, correctOrder) {
  const answerArea = sentenceDiv.querySelector('.answer-area');
  const bank = sentenceDiv.querySelector('.word-bank');
  if (el.parentElement === answerArea) {
    bank.appendChild(el);
    el.classList.remove('in-answer');
  } else {
    answerArea.appendChild(el);
    el.classList.add('in-answer');
  }
  checkIfCorrect(sentenceDiv, correctOrder);
}

function checkIfCorrect(sentenceDiv, correctOrder) {
  const answerArea = sentenceDiv.querySelector('.answer-area');
  const current = Array.from(answerArea.children).map(el => el.textContent);
  if (current.length === correctOrder.length && current.every((w, i) => w === correctOrder[i])) {
    sentenceDiv.classList.add('correct');
  } else {
    sentenceDiv.classList.remove('correct');
  }
}

function updateContent() {
  const cat = document.getElementById('category-selector').value;
  currentCategory = cat === 'select' ? 'overview' : cat;
  selectedWords = data[currentCategory] ? shuffleArray([...data[currentCategory]]) : [];
  document.getElementById('matched-pairs').innerHTML = '';
  showFlashcards();
  showQuiz();
  showMatching();
  showSentenceBuilder();
}

document.getElementById('category-selector').value = 'overview';
updateContent();
</script>

</body>
</html>
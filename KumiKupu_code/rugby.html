<!DOCTYPE html>
<html>
<head>
<base target="_top">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Whutupaoro — Rugby Vocabulary</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">

<style>
body { 
    font-family: Arial, sans-serif; 
    padding: 20px; 
    background-color: #f0f4f8; 
    background-image: url('images/rugby.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
}

.header-container {
    display: flex;
    flex-wrap: wrap; 
    align-items: center;
    gap: 20px;
    margin-bottom: 20px;
    background-color: rgba(240, 244, 248, 0.8);
    padding: 15px;
    border-radius: 15px;
}

.header-container h2 { margin: 0; color: #1a535c; }

.selector-container {
    background-color: #4ecdc4;
    border: 3px solid #1a535c;
    border-radius: 15px;
    padding: 5px 15px;
    display: inline-block;
}

#category-selector {
    min-width: 300px;
    background-color: transparent;
    border: none;
    font-family: 'Poppins', sans-serif;
    font-size: clamp(1.8rem, 5vw, 2.5rem);
    font-weight: 700;
    color: #1a535c;
    cursor: pointer;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    text-align: center;
    text-align-last: center;
}

h3 {
    background-color: rgba(240, 244, 248, 0.8);
    padding: 10px;
    border-radius: 10px;
    color: #1a535c;
}

#flashcards-section, #quiz-section, #matching-section, .matched-container {
    background-color: rgba(240, 244, 248, 0.6);
    padding: 15px;
    border-radius: 15px;
    margin-bottom: 20px;
}

/* Flashcards */
#flashcards-section {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}
#flashcards-section .card {
  height: 100px;
  padding: 10px;
  border: 4px solid #1a535c;
  border-radius: 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-weight: bold;
  font-size: 18px;
  word-wrap: break-word;
  transition: transform 0.6s, background-color 0.6s;
  background-color: rgba(204, 235, 233, 0.7);
}
#flashcards-section .card.flipped { background-color: rgba(221, 221, 221, 0.8); }

/* Quiz */
#quiz-section .quiz-question {
  margin-bottom: 20px;
  border-top: 2px solid #ccc;
  padding-top: 15px;
}
#quiz-section .quiz-question b {
    font-size: 1.2em;
    margin-bottom: 10px;
    display: block;
    color: #1a535c;
}
.quiz-options {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}
#quiz-section .quiz-options button { 
  font-size: 16px; 
  padding: 8px; 
  width: 100%; 
  border-radius: 8px;
  border: 2px solid #1a535c;
}

/* Matching */
.matched-container {
  display: flex;
  flex-direction: column; 
  gap: 10px;
  margin-bottom: 10px;
}
.pair {
  padding: 10px 15px;
  border-radius: 8px;
  font-weight: bold;
  display: flex;
  justify-content: center;
  gap: 8px;
  align-items: center;
  font-size: 1.4rem;
  text-align: center;
}
.pair .sep { font-weight: bold; }

.matching-container {
  display: flex;
  justify-content: space-between;
  gap: 20px;
  margin-top: 20px;
}
.matching-box {
  flex: 1;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  align-content: start;
  gap: 10px;
  min-height: 200px;
  border: 2px dashed #ccc;
  padding: 10px;
  border-radius: 10px;
  background-color: #f0f4f8;
}
#matching-section .drag-item {
  height: 50px;
  border: 2px solid #1a535c;
  background: #ccebe9;
  cursor: pointer;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 18px;
  box-sizing: border-box;
}

/* Source links */
#source-links {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    background-color: rgba(240, 244, 248, 0.8);
    padding: 15px;
    border-radius: 15px;
}

#source-links a {
  color: #1a535c;
  font-weight: bold;
  text-decoration: none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  text-align: center;
}
#source-links a:hover {
  text-decoration: underline;
}

/* Mobile */
@media (max-width: 768px) {
    #flashcards-section { grid-template-columns: repeat(2, 1fr); }
    .quiz-options { grid-template-columns: repeat(2, 1fr); }
    .matching-container { gap: 10px; flex-direction: column; }
    #matching-section .drag-item { font-size: 16px; }
    .pair { font-size: 1.1rem; }
    .matching-box { grid-template-columns: 1fr; }
    #source-links { grid-template-columns: 1fr; }
}
</style>
</head>

<body>
<div class="header-container">
    <h2>Whutupaoro — Rugby Vocabulary</h2>
    <div class="selector-container">
      <select id="category-selector" onchange="updateContent()">
        <option value="select" selected>-- Select --</option>
        <option value="officialTerms">Official Terms</option>
        <option value="positions">Positions</option>
        <option value="gameplay">Game-play</option>
        <option value="sentences">Sentences</option>
        <option value="combined">All Together</option>
      </select>
    </div>
</div>

<h3>Flashcards</h3>
<div id="flashcards-section"></div>

<h3>Quiz</h3>
<div id="quiz-section"></div>

<h3>Matching – Click the matching pair</h3>
<div class="matched-container" id="matched-pairs"></div>
<div id="matching-section"></div>

<h3>Vocab Source Links (Click on the links for Pronunciation)</h3>
<div id="source-links"></div>

<h3>Rugby Kupu Pronunciation</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/NHty-NiMh-s?si=cPsaFCXt-r7XqOxC" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<script>
// ================== DATA ==================
const vocab = {
  select: [
    ["Whutupōro", "Rugby"],
    ["Kaitākaro", "Player"],
    ["Kaiako", "Coach"],
    ["Kaitaki", "Captain"],
    ["Kaiwawao", "Referee"],
    ["Whana", "Kick"],
    ["Rīwhi", "Pass"],
    ["Oma", "Run"],
    ["Pāwhiri", "Tackle"],
    ["Piro", "Try / Point"],
    ["Kaute", "Score"],
    ["Toa", "Winner"]
  ],
  officialTerms: [
    ["Whutupōro", "Rugby"],
    ["Pā whutupōro", "Touch rugby"],
    ["Takiwhitu", "Sevens rugby"],
    ["Whutupōro kōwhaki", "Rippa rugby / non-contact"],
    ["Rīki", "Rugby league"],
    ["Haurua tuatahi", "First half"],
    ["Haurua tuarua", "Second half"],
    ["Kakari", "Scrum / Halfback"],
    ["Kaunuku", "Flanker / Maul participant"],
    ["Kaunuku hinga", "Collapsed maul"],
    ["Āpitinga", "Ruck"],
    ["Kaiwawao", "Referee / Umpire"],
    ["Kaitākaro", "Player"],
    ["Kaitaki", "Captain"],
    ["Whiwhinga", "Number 8 / Points"],
    ["Whana taka", "Drop-kick / Drop goal"],
    ["Whana turuki", "Conversion kick"],
    ["Maka tūtira", "Line-out throw"],
    ["Maka whakamua", "Forward pass"],
    ["Maka tāwhiro", "Spin / Spiral pass"],
    ["Māka (hē)", "Mark"],
    ["Mahi tahi", "Teamwork"]
  ],

  positions: [
    ["Kaitākaro", "Player"],
    ["Kaiako", "Coach"],
    ["Kaitaki", "Captain"],
    ["Kaiwawao", "Referee"],
    ["Kakari", "Halfback"],
    ["Poumua", "Prop"],
    ["Kaunuku", "Flanker / Lock"],
    ["Whiwhinga", "Number 8"],
    ["Haurua tuatahi", "First five-eighth / Fly-half"],
    ["Haurua tuarua", "Second five-eighth / Inside centre"],
    ["Poutāhū", "Centre / Outside centre"],
    ["Maka tūtira", "Line-out throw"],
    ["Maka whakamua", "Forward pass"],
    ["Mahi tahi", "Support / Teamwork"],
    ["Whiwhinga", "Fullback / Goal kicker"]
  ],

  gameplay: [
    ["Whutupōro", "Rugby"],
    ["Whana", "Kick"],
    ["Rīwhi", "Pass"],
    ["Oma", "Run"],
    ["Pāwhiri", "Tackle"],
    ["Āpitinga", "Ruck"],
    ["Kaunuku", "Maul"],
    ["Whana tīmatanga", "Kick-off"],
    ["Rārangi whakapuru", "Scrum"],
    ["Whiu rārangi", "Lineout"],
    ["Piro", "Try / Point"],
    ["Whiwhinga", "Penalty / Score"],
    ["Kaute", "Score"],
    ["Toa", "Winner"],
    ["Hinga", "Loser"]
  ],

  sentences: [
    ["Ko au te kaitākaro pai.", "I am a good player."],
    ["Ko te kaiako e ako ana i te kapa.", "The coach is teaching the team."],
    ["Ko te kaitaki te rangatira o te kapa.", "The captain is the leader of the team."],
    ["Ka whana ahau ki te pōro.", "I kick the ball."],
    ["Ka rīwhi te kaitākaro ki te hoa.", "The player passes to a teammate."],
    ["Ka oma te kapa ki te raina.", "The team runs to the line."],
    ["Ka pāwhiri te kaitākaro i te hoa riri.", "The player tackles the opponent."],
    ["Kei roto te pōro i te āpitinga.", "The ball is in the ruck."],
    ["Ka whiua te pōro ki te tuara.", "The ball is kicked to the back."],
    ["Kua whiwhi piro te kapa.", "The team scored a try."],
    ["Kua toa tātou i te kēmu.", "We won the game."],
    ["Kua hinga tātou i te kēmu.", "We lost the game."],
    ["Ka tīmata te kēmu i te whana tīmatanga.", "The game starts with a kick-off."],
    ["Ka tautoko ngā kaitākaro i te āpitinga.", "The players support in the ruck."],
    ["Ka whana te kakari ki te pōro.", "The halfback kicks the ball."],
    ["Kua pāwhiritia te kaitākaro e te hoa riri.", "The player is tackled by an opponent."]
  ],
combined: []
};

vocab.combined = [...vocab.positions, ...vocab.gameplay, ...vocab.sentences];

// ================= FUNCTIONS =================
let selectedWords = [];

function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function showFlashcards() {
  const container = document.getElementById('flashcards-section');
  container.innerHTML = '';
  if (selectedWords.length === 0) return container.textContent = 'No data found';
  selectedWords.forEach(row => {
    const card = document.createElement('div');
    card.className = 'card';
    card.textContent = row[0];
    card.onclick = () => {
      card.classList.toggle('flipped');
      card.textContent = card.classList.contains('flipped') ? row[1] : row[0];
    };
    container.appendChild(card);
  });
}

function showQuiz(category) {
  const container = document.getElementById('quiz-section');
  container.innerHTML = '';
  const categoryData = vocab[category] || [];
  const questions = selectedWords;
  if (questions.length < 4) return container.innerHTML = '<p>Not enough data for a full quiz.</p>';
  questions.forEach(row => {
    const qDiv = document.createElement('div');
    qDiv.className = 'quiz-question';
    qDiv.innerHTML = `<b>${row[0]}</b>`;
    const optionsContainer = document.createElement('div');
    optionsContainer.className = 'quiz-options';
    const distractors = [];
    while (distractors.length < 3) {
      const r = categoryData[Math.floor(Math.random() * categoryData.length)][1];
      if (r !== row[1] && !distractors.includes(r)) distractors.push(r);
    }
    const options = shuffleArray([row[1], ...distractors]);
    options.forEach(opt => {
      const btn = document.createElement('button');
      btn.textContent = opt;
      btn.onclick = () => {
        if (btn.disabled) return;
        btn.style.backgroundColor = opt === row[1] ? 'lightgreen' : 'lightcoral';
        optionsContainer.querySelectorAll('button').forEach(b => b.disabled = true);
      };
      optionsContainer.appendChild(btn);
    });
    qDiv.appendChild(optionsContainer);
    container.appendChild(qDiv);
  });
}

function showMatching() {
  const sectionContainer = document.getElementById('matching-section');
  const matchedContainer = document.getElementById('matched-pairs');
  sectionContainer.innerHTML = '';
  matchedContainer.innerHTML = '';
  const pairs = selectedWords.filter(row => row[0] && row[1]);
  if (pairs.length === 0) {
      sectionContainer.textContent = 'No data found';
      return;
  }

  const matchingContainer = document.createElement('div');
  matchingContainer.className = 'matching-container';
  sectionContainer.appendChild(matchingContainer);
  const leftCol = document.createElement('div');
  leftCol.className = 'matching-box';
  const rightCol = document.createElement('div');
  rightCol.className = 'matching-box';
  matchingContainer.appendChild(leftCol);
  matchingContainer.appendChild(rightCol);

  const leftWords = pairs.map(p => p[0]);
  const rightWords = shuffleArray(pairs.map(p => p[1]));
  let firstSelection = null;
  const palette = ['#a8e6cf','#dcedc1','#ffd3b6','#ffaaa5','#ff8b94','#a2d5f2','#9bcfb0','#77a0a9'];
  let colorIndex = 0;

  function createBox(word, side) {
    const div = document.createElement('div');
    div.className = 'drag-item';
    div.innerText = word;
    div.dataset.side = side;
    div.dataset.word = word;
    div.onclick = () => handleClick(div);
    return div;
  }

  function handleClick(box) {
    if (box.style.backgroundColor) return;
    if (!firstSelection) {
      firstSelection = box;
      box.style.border = '3px solid #1a535c';
    } else if (box.dataset.side !== firstSelection.dataset.side) {
      const leftWord = firstSelection.dataset.side === 'left' ? firstSelection.dataset.word : box.dataset.word;
      const rightWord = firstSelection.dataset.side === 'right' ? firstSelection.dataset.word : box.dataset.word;
      const correctRight = pairs.find(p => p[0] === leftWord)?.[1];
      if (rightWord === correctRight) {
        const color = palette[colorIndex % palette.length];
        colorIndex++;
        [firstSelection, box].forEach(el => {
          el.style.backgroundColor = color;
          el.style.border = '2px solid #666';
          el.onclick = null;
        });
        const pairChip = document.createElement('div');
        pairChip.className = 'pair';
        pairChip.style.backgroundColor = color;
        pairChip.innerHTML = `<span>${leftWord}</span><span class="sep">↔</span><span>${rightWord}</span>`;
        matchedContainer.appendChild(pairChip);
      } else {
        firstSelection.style.border = '2px solid red';
        box.style.border = '2px solid red';
        setTimeout(() => {
            firstSelection.style.border = '2px solid #1a535c';
            box.style.border = '2px solid #1a535c';
        }, 500);
      }
      firstSelection = null;
    } else { 
        firstSelection.style.border = '2px solid #1a535c';
        firstSelection = box;
        box.style.border = '3px solid #1a535c';
    }
  }

  leftWords.forEach(w => leftCol.appendChild(createBox(w, 'left')));
  rightWords.forEach(w => rightCol.appendChild(createBox(w, 'right')));
}

function updateContent() {
  const category = document.getElementById('category-selector').value;
  const categoryData = vocab[category] || [];
  selectedWords = shuffleArray([...categoryData]).slice(0, 12);
  showFlashcards();
  showQuiz(category);
  showMatching();
}

// ================= SOURCE LINKS =================
const sourceLinks = {
  "Whutupōro (rugby)": "https://paekupu.co.nz/word/whutuporo",  
  "Pā whutupōro (touch rugby)": "https://paekupu.co.nz/word/pa-whutuporo",  
  "Takiwhitu (sevens rugby)": "https://paekupu.co.nz/word/whutuporo-takiwhitu-2",  
  "Whutupōro kōwhaki (rippa rugby/non‑contact rugby)": "https://paekupu.co.nz/word/whutuporo-kowhaki",  
  "Rīki (rugby league)": "https://paekupu.co.nz/word/whutuporo-2",  
  "Haurua tuatahi (first half)": "https://paekupu.co.nz/word/haurua-tuatahi",  
  "Haurua tuarua (second half)": "https://paekupu.co.nz/word/haurua-tuarua",  
  "Kakari (scrum)": "https://paekupu.co.nz/word/kakari",  
  "Kaunuku (maul)": "https://paekupu.co.nz/word/kaunuku-4",  
  "Kaunuku hinga (collapsed maul)": "https://paekupu.co.nz/word/kaunuku-hinga",  
  "Āpitinga (ruck)": "https://paekupu.co.nz/word/ketuketu-2",  
  "Āpititū (mark/oppose in sport)": "https://paekupu.co.nz/word/apititu",  
  "Inaki (overlap)": "https://paekupu.co.nz/word/inaki",  
  "Kaiwawao (referee/umpire)": "https://paekupu.co.nz/word/kaiwawao2",  
  "Kaitākaro (player)": "https://paekupu.co.nz/word/kaitakaro",  
  "Kaitaki (captain)": "https://paekupu.co.nz/word/kaitaki",  
  "Whiwhinga (point/score)": "https://paekupu.co.nz/word/whiwhinga",  
  "Whana taka (drop‑kick/drop goal)": "https://paekupu.co.nz/word/whana-taka",  
  "Whana turuki (conversion kick)": "https://paekupu.co.nz/word/whana-turuki",  
  "Maka tūtira (line‑out throw)": "https://paekupu.co.nz/word/maka-rangitaha",  
  "Maka whakamua (forward pass)": "https://paekupu.co.nz/word/maka-whakamua",  
  "Maka tāwhiro (spin/spiral pass)": "https://paekupu.co.nz/word/maka-tawhiro",  
  "Māka (hē) (mark)": "https://paekupu.co.nz/word/maka-2",  
  "Mahi tahi (teamwork)": "https://paekupu.co.nz/word/mahi-tahi"  
};


function showSourceLinks() {
    const container = document.getElementById('source-links');
    container.innerHTML = '';
    for (const [word, link] of Object.entries(sourceLinks)) {
        const a = document.createElement('a');
        a.href = link;
        a.textContent = word;
        a.target = "_blank"; 
        container.appendChild(a);
    }
}

// Initial Load
updateContent();
showSourceLinks();

</script>
</body>
</html>

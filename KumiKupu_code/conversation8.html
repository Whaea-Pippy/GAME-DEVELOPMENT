<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tikanga Matching Game</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
<style>
    :root {
        --card-width: clamp(180px, 22vw, 250px);
        --card-height: clamp(120px, 18vh, 150px);
        --card-gap: clamp(15px, 2vw, 20px);
    }
    html, body {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #e8ef7e;
    }
    .app-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 20px;
        min-height: 100dvh;
    }
    header {
        width: 100%;
        max-width: 1000px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    .selector-container {
        background-color: #ADD8E6;
        border: 3px solid #00008B;
        border-radius: 15px;
        padding: 5px 15px;
        margin: 0 auto;
    }
    #category-selector {
        min-width: 300px;
        background: transparent;
        border: none;
        font-family: 'Poppins', sans-serif;
        font-size: clamp(1.8rem, 5vw, 2.5rem);
        font-weight: 700;
        color: #333;
        cursor: pointer;
        text-align: center;
    }
    .card-grid {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        max-width: 95%;
        gap: var(--card-gap);
    }
    .card-row {
        display: flex;
        justify-content: center;
        gap: var(--card-gap);
        width: 100%;
    }
    .card {
        width: var(--card-width);
        height: var(--card-height);
        background-color: white;
        border: 3px solid black;
        border-radius: 15px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: 700;
        font-size: clamp(1rem, 2.5vw, 1.5rem);
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        user-select: none;
    }
    .btn {
        padding: 12px 25px;
        font-size: 1rem;
        font-weight: 700;
        color: #fff;
        border: none;
        border-radius: 50px;
        cursor: pointer;
    }
    .btn-secondary { background-color: #1e5dab; }

    /* Light Color Palette */
    .card.matched { border-color: #333; }
    .bg-red { background-color: #ffcccb; color: black; }
    .bg-orange { background-color: #ffddc1; color: black; }
    .bg-yellow { background-color: #ffffcc; color: black; }
    .bg-green { background-color: #d4edda; color: black; }
    .bg-blue { background-color: #cce5ff; color: black; }
    .bg-violet { background-color: #e6e6fa; color: black; }

    @media (max-width:800px){
        :root{
            --card-width: clamp(140px, 40vw, 180px);
            --card-height: clamp(70px, 12vh, 90px);
            --card-gap: 10px;
        }
        .header {
            flex-direction: column;
            gap: 10px;
        }
    }
</style>
</head>
<body>
<div class="app-container">
    <header>
        <button id="reset-btn" class="btn btn-secondary">Reset</button>
        <div class="selector-container">
            <select id="category-selector" onchange="startGame()">
                <option value="select" selected>--Select--</option>
                <option value="greeting">Greeting</option>
                <option value="orca1">Orca 1</option>
                <option value="orca2">Orca 2</option>
                <option value="orcavocab">Orca Vocab</option>
                <option value="tikanga">Tikanga</option>
                <option value="hehonore">He Hōnore</option>
                <option value="kiatau">Kia Tau</option>
                <option value="whakataka">Whakataka te Hau</option>
                <option value="pepeha">Pepeha</option>
                <option value="joiners">Joiners</option>
                <option value="all">ALL</option>
            </select>
        </div>
    </header>
    <div id="card-grid" class="card-grid"></div>
</div>
<script>
const data = {
    select: [ { teReo: "tangata", english: "person / people" }, { teReo: "whenua", english: "land / country" }, { teReo: "kura", english: "school" }, { teReo: "whare", english: "house / building" }, { teReo: "wai", english: "water" }, { teReo: "moana", english: "sea / ocean" }, { teReo: "rangi", english: "sky / day" }, { teReo: "kai", english: "food" }, { teReo: "tamariki", english: "children" }, { teReo: "maunga", english: "mountain" }, { teReo: "waka", english: "canoe / vehicle" }, { teReo: "kāinga", english: "home / village" } ],
    greeting: [ { teReo: "Kia ora", english: "hello / hi" }, { teReo: "pai", english: "good" }, { teReo: "ngenge", english: "tired" }, { teReo: "moe", english: "sleep" }, { teReo: "māuiui", english: "sick / unwell" }, { teReo: "huangō", english: "asthma" }, { teReo: "puehu", english: "dust" }, { teReo: "puāwai", english: "flower / blossom" }, { teReo: "pēpi", english: "baby" }, { teReo: "menemene", english: "smile" }, { teReo: "mahi", english: "work" }, { teReo: "Paraire", english: "Friday" } ],
    orca1: [ { teReo: "Kia ora", english: "hello" }, { teReo: "ata", english: "morning" }, { teReo: "rawe", english: "great / excellent" }, { teReo: "hīkoi", english: "walk" }, { teReo: "pūwaha", english: "estuary" }, { teReo: "orca", english: "orca (killer whale)" }, { teReo: "kau", english: "swim" }, { teReo: "takutai", english: "shore / beach" }, { teReo: "kaihoe", english: "paddler" }, { teReo: "reti wai", english: "paddleboard / surfboard" }, { teReo: "waea", english: "phone" }, { teReo: "moana", english: "ocean" } ],
    orca2: [ { teReo: "titiro", english: "look" }, { teReo: "poti", english: "boat" }, { teReo: "parāoa", english: "whale" }, { teReo: "orca", english: "orca (killer whale)" }, { teReo: "parirau tuarā", english: "dorsal fin" }, { teReo: "nui", english: "big" }, { teReo: "awa", english: "river / estuary" }, { teReo: "iti", english: "small" }, { teReo: "kaihoe", english: "paddler" }, { teReo: "rererangi wai", english: "paddleboard" }, { teReo: "rā", english: "sun / day" }, { teReo: "mārie", english: "calm" } ],
    orcavocab: [ { teReo: "parāoa / orca", english: "whale / orca" }, { teReo: "parirau tuarā", english: "dorsal fin" }, { teReo: "poti mā", english: "white boat" }, { teReo: "kaihoe papa rererangi wai", english: "paddle boarder" }, { teReo: "awa", english: "estuary / river" }, { teReo: "wai mārie", english: "calm water" }, { teReo: "rā e whiti ana", english: "shining sun" }, { teReo: "ata ātaahua", english: "beautiful morning" }, { teReo: "mātakitaki", english: "to watch / observe" }, { teReo: "titiro", english: "look" }, { teReo: "tata", english: "near / close" }, { teReo: "mataku", english: "scared / afraid" } ],
    tikanga: [ { teReo: "tikanga", english: "customs / cultural practices" }, { teReo: "whakaute", english: "respect" }, { teReo: "manaakitanga", english: "kindness / hospitality" }, { teReo: "karakia", english: "prayer" }, { teReo: "marae", english: "meeting grounds" }, { teReo: "wharenui", english: "meeting house" }, { teReo: "tango hū", english: "to take off shoes" }, { teReo: "atua", english: "god / spiritual being" }, { teReo: "kai", english: "food / meal" }, { teReo: "ako", english: "to learn / teach" }, { teReo: "tapu", english: "sacredness" }, { teReo: "noa", english: "ordinary / free from tapu" } ],
    hehonore: [ { teReo: "He Hōnore", english: "The Honour (prayer title)" }, { teReo: "korōria", english: "glory" }, { teReo: "maungārongo", english: "peace" }, { teReo: "whenua", english: "land / earth" }, { teReo: "whakaaro pai", english: "good thoughts" }, { teReo: "tangata", english: "people / mankind" }, { teReo: "aroha", english: "love" }, { teReo: "Atua", english: "God" }, { teReo: "wairua", english: "spirit" }, { teReo: "tapū", english: "sacred / holy" }, { teReo: "āke ake", english: "forever and ever" }, { teReo: "Āmene", english: "amen" } ],
    kiatau: [ { teReo: "kia tau", english: "let it rest / may it settle" }, { teReo: "tātou", english: "us / all of us" }, { teReo: "atawhai", english: "grace / kindness" }, { teReo: "Ariki", english: "Lord" }, { teReo: "Ihu Karaiti", english: "Jesus Christ" }, { teReo: "aroha", english: "love" }, { teReo: "Atua", english: "God" }, { teReo: "whiwhingatahitanga", english: "fellowship / unity" }, { teReo: "Wairua Tapu", english: "Holy Spirit" }, { teReo: "ake ake", english: "forever and ever" }, { teReo: "Amine", english: "amen" }, { teReo: "tau", english: "settle / descend" } ],
    whakataka: [
    ["whakataka", "to prepare / make ready"],
    ["hau", "wind"],
    ["tonga", "south"],
    ["uta", "inland / shore"],
    ["tai", "sea / tide"],
    ["atākura", "red glow of dawn"],
    ["tio", "frost"],
    ["huka", "snow / ice"],
    ["hū", "gust / deep breath / sigh"],
    ["mākinakina", "chilly / cold wind"],
    ["mātaratara", "biting cold / frosty"],
    ["mauri ora", "the life force / breath of life"]
],
    pepeha: [ { teReo: "tēnā koutou katoa", english: "greetings to you all" }, { teReo: "Perehipitīriana", english: "Presbyterian" }, { teReo: "Hāhi", english: "church" }, { teReo: "Hāto Kēneti", english: "Saint Kentigern (St Kent’s)" }, { teReo: "tangata", english: "person / man" }, { teReo: "kura", english: "school" }, { teReo: "me ū", english: "hold fast / be steadfast" }, { teReo: "whakapono", english: "faith / belief" }, { teReo: "tīhei", english: "the sneeze (symbol of life)" }, { teReo: "mauri", english: "life force" }, { teReo: "ora", english: "life / well-being" }, { teReo: "katoa", english: "all / everyone" } ],
    joiners: [ { teReo: "nō reira", english: "therefore, so" }, { teReo: "engari", english: "but" }, { teReo: "heoi anō", english: "however" }, { teReo: "ā", english: "and (link actions/ideas)" }, { teReo: "waihoki", english: "furthermore, also" }, { teReo: "nā te mea", english: "because" }, { teReo: "otirā", english: "but, however (formal/poetic)" }, { teReo: "me", english: "and (link nouns/people)" }, { teReo: "ahakoa", english: "although, even though" }, { teReo: "mēnā / ki te", english: "if" }, { teReo: "ina", english: "when" }, { teReo: "kia", english: "so that / in order to" } ]
};

const colors = ['bg-red', 'bg-orange', 'bg-yellow', 'bg-green', 'bg-blue', 'bg-violet'];

const grid = document.getElementById('card-grid');
const selector = document.getElementById('category-selector');
const resetBtn = document.getElementById('reset-btn');

function shuffle(array) {
    let currentIndex = array.length, randomIndex;
    while (currentIndex !== 0) {
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex--;
        [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
    }
    return array;
}

function startGame(){
    grid.innerHTML = '';
    let category = selector.value;

    let vocabArray = [];
    if(category === 'all'){
        Object.keys(data).forEach(cat => {
            if (cat !== 'select') {
                vocabArray = vocabArray.concat(data[cat]);
            }
        });
    } else {
        vocabArray = [...data[category]];
    }

    vocabArray = shuffle(vocabArray).slice(0, 6);
    let shuffledColors = shuffle([...colors]);

    let cardsArray = [];
    vocabArray.forEach((w, i) => {
        const color = shuffledColors[i];
        cardsArray.push({ text: w.teReo, key: i, color: color });
        cardsArray.push({ text: w.english, key: i, color: color });
    });
    cardsArray = shuffle(cardsArray);

    let rowSize = window.matchMedia("(max-width:800px)").matches ? 2 : 4;
    for(let i = 0; i < cardsArray.length; i += rowSize){
        const row = document.createElement('div');
        row.className = 'card-row';
        cardsArray.slice(i, i + rowSize).forEach(c => {
            const card = document.createElement('div');
            card.className = 'card';
            card.textContent = c.text;
            card.dataset.key = c.key;
            card.dataset.color = c.color;
            card.addEventListener('click', () => handleClick(card));
            row.appendChild(card);
        });
        grid.appendChild(row);
    }
}

let firstCard = null;
let secondCard = null;
let lock = false;

function handleClick(card){
    if(lock || card.classList.contains('matched')) return;
    
    card.style.border = '3px dashed gray';

    if(!firstCard){
        firstCard = card;
    } else if(!secondCard && card !== firstCard){
        secondCard = card;
        lock = true;
        setTimeout(checkMatch, 500);
    } else {
         // If the same card is clicked twice, reset its border
        card.style.border = '3px solid black';
        if(firstCard === card) firstCard = null;
    }
}

function checkMatch(){
    if(firstCard.dataset.key === secondCard.dataset.key){
        const colorClass = firstCard.dataset.color;
        firstCard.classList.add(colorClass, 'matched');
        secondCard.classList.add(colorClass, 'matched');
        // Reset border styles to default (handled by .matched class)
        firstCard.style.border = ''; 
        secondCard.style.border = '';
    } else {
        firstCard.style.border = '3px solid black';
        secondCard.style.border = '3px solid black';
    }
    firstCard = null;
    secondCard = null;
    lock = false;
}

resetBtn.addEventListener('click', startGame);
startGame(); // Initial game start
</script>
</body>
</html>

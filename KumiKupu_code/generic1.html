<!DOCTYPE html>
<html>
<head>
<base target="_top">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic Te Reo Māori Kupu (Words)</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">

<style>
body { font-family: Arial, sans-serif; padding: 20px; background-color: #f0f9ff; }
.header-container { display: flex; flex-wrap: wrap; align-items: center; gap: 20px; margin-bottom: 20px; }
.header-container h2 { margin: 0; color: #adcaf5; font-size: 2.2rem; }

.selector-container {
    background-color: #99efcb; border: 3px solid #00008B; border-radius: 15px;
    padding: 5px 15px; display: inline-block;
}
#category-selector {
    min-width: 320px; background: transparent; border: none;
    font-family: 'Poppins', sans-serif; font-size: clamp(1.8rem, 5vw, 2.5rem);
    font-weight: 700; color: #333; cursor: pointer; text-align: center; text-align-last: center;
}

/* Flashcards */
#flashcards-section {
    display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin: 20px 0;
}
#flashcards-section .card {
    height: 110px; padding: 10px; border: 4px solid #333; border-radius: 12px;
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    text-align: center; font-weight: bold; font-size: 1.4rem; background: #fff9c4;
    transition: all 0.6s;
}
#flashcards-section .card.flipped { background: #b3e5fc; }

/* Quiz & Matching */
.quiz-options { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px; }
.quiz-options button { padding: 12px; font-size: 1.1rem; border-radius: 8px; border: none; cursor: pointer; }

.matched-container { display: flex; flex-direction: column; gap: 10px; margin: 20px 0; }
.pair { padding: 12px; border-radius: 10px; font-size: 1.4rem; font-weight: bold; text-align: center; }

.matching-container { display: flex; justify-content: space-between; gap: 20px; margin-top: 20px; }
.matching-box { flex: 1; display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;
    min-height: 200px; border: 2px dashed #999; padding: 10px; border-radius: 10px; background: #fafafa; }
.drag-item { height: 60px; border: 2px solid #666; background: #eee; cursor: pointer;
    display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem; }

@media (max-width: 768px) {
    #flashcards-section, .quiz-options, .matching-box { grid-template-columns: repeat(2, 1fr); }
    .matching-container { flex-direction: column; }
}
</style>
</head>
<body>

<div class="header-container">
    <h2>Basic Te Reo Māori Kupu (Words)</h2>
    <div class="selector-container">
        <select id="category-selector" onchange="updateContent()">
            <option value="select" selected>--- Select ---</option>
            <option value="overview">Overview / Key Examples</option>
            <option value="section1">Tae - Colours</option>
            <option value="section2">Ngā Tau - Numbers (0, 10-50)</option>
            <option value="section3">Whānau - Family</option>
            <option value="section4">Ngā Wāhanga o te Tinana - Body Parts</option>
        </select>
    </div>
</div>

<h3>Flashcards</h3>
<div id="flashcards-section"></div>

<h3>Quiz</h3>
<div id="quiz-section"></div>

<h3>Matching – Click two to pair</h3>
<div class="matched-container" id="matched-pairs"></div>
<div id="matching-section"></div>

<script>
// ────────────────── UPDATED DATA BLOCK ──────────────────
const data = {
    // Source: Te Aka Māori Dictionary - Basic objects and nature words for general overview
    overview: [
        ["Kore", "Zero / Nothing"],
        ["Tāngata", "Person / People"],
        ["Moutere", "Island"],
        ["Hui", "Gathering / Meeting"],
        ["Whenua", "Land / Country"],
        ["Rangi", "Sky / Heaven"],
        ["Ahi", "Fire"],
        ["Karu", "Eye"]
    ],
    // Source: Te Aka Māori Dictionary - Basic Colours
    section1: [
        ["Māota", "Light Green"],
        ["Waimoana", "Sky Blue"],
        ["Karaka", "Orange"],
        ["Tawai", "Purple"],
        ["Hāura", "Grey"],
        ["Kikowhiti", "Silver"],
        ["Hau", "Gold"],
        ["Wherowhero", "Crimson"]
    ],
    // Source: Te Aka Māori Dictionary - Numbers (Zero and Multiples of 10)
    section2: [
        ["Kore", "Zero (0)"],
        ["Tekau", "Ten (10)"],
        ["Rua Tekau", "Twenty (20)"],
        ["Toru Tekau", "Thirty (30)"],
        ["Whā Tekau", "Forty (40)"],
        ["Rima Tekau", "Fifty (50)"],
        ["Rau", "One Hundred (100)"],
        ["Mano", "One Thousand (1,000)"]
    ],
    // Source: Te Aka Māori Dictionary - Family Terms
    section3: [
        ["Matua", "Father / Parent"],
        ["Whaea", "Mother / Aunt"],
        ["Tūakana", "Older sibling (same gender)"],
        ["Teina", "Younger sibling (same gender)"],
        ["Tuahine", "Sister (of a male)"],
        ["Tungāne", "Brother (of a female)"],
        ["Kuia", "Grandmother / Old woman"],
        ["Koro", "Grandfather / Old man"]
    ],
    // Source: Te Aka Māori Dictionary - Body Parts
    section4: [
        ["Puku", "Stomach / Belly"],
        ["Tuara", "Back"],
        ["Upoko", "Head"],
        ["Arero", "Tongue"],
        ["Niho", "Tooth / Teeth"],
        ["Waewae", "Foot / Leg"],
        ["Maihao", "Finger / Toe"],
        ["Uma", "Chest / Breast"]
    ],
};
// ────────────────── STOP EDITING HERE ──────────────────

let selectedWords = [];

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function showFlashcards() {
    const container = document.getElementById('flashcards-section');
    container.innerHTML = '';
    if (selectedWords.length === 0) return;
    selectedWords.forEach(row => {
        const card = document.createElement('div');
        card.className = 'card';
        card.textContent = row[0];
        card.onclick = () => {
            card.classList.toggle('flipped');
            card.textContent = card.classList.contains('flipped') ? row[1] : row[0];
        };
        container.appendChild(card);
    });
}

function getQuizDistractors(correctAnswer, category) {
    let allTranslations;
    let pool;
    
    // If the category is 'section1' (Colours), we want distractors that are also colours.
    if (category === 'section1') {
        pool = data['section1'].map(p => p[1]); // Use only English colour names
    } else {
        // Otherwise, use all available translations as a distractor pool
        pool = Object.values(data).flat().map(p => p[1]);
    }

    const distractors = [];
    while (distractors.length < 3) {
        const rand = pool[Math.floor(Math.random() * pool.length)];
        // Ensure the random choice is not the correct answer and is not already in the distractors list
        if (rand !== correctAnswer && !distractors.includes(rand)) {
            distractors.push(rand);
        }
    }
    return distractors;
}


function showQuiz() {
    const container = document.getElementById('quiz-section');
    container.innerHTML = '';
    if (selectedWords.length < 4) return;
    
    // Get the current selected category to tailor the quiz distractors
    const cat = document.getElementById('category-selector').value;

    selectedWords.forEach((row, i) => {
        const qDiv = document.createElement('div');
        qDiv.className = 'quiz-question';
        qDiv.innerHTML = `<b>${row[0]}</b>`;
        const optsDiv = document.createElement('div');
        optsDiv.className = 'quiz-options';

        const correctAnswer = row[1];
        const distractors = getQuizDistractors(correctAnswer, cat);
        const options = shuffleArray([correctAnswer, ...distractors]);

        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.textContent = opt;
            btn.onclick = () => {
                if (opt === correctAnswer) btn.style.backgroundColor = 'lightgreen';
                else btn.style.backgroundColor = 'lightcoral';
                optsDiv.querySelectorAll('button').forEach(b => b.disabled = true);
            };
            optsDiv.appendChild(btn);
        });
        qDiv.appendChild(optsDiv);
        container.appendChild(qDiv);
    });
}

function showMatching() {
    const section = document.getElementById('matching-section');
    const matched = document.getElementById('matched-pairs');
    section.innerHTML = ''; matched.innerHTML = '';

    const wrapper = document.createElement('div');
    wrapper.className = 'matching-container';
    const left = document.createElement('div'); left.className = 'matching-box';
    const right = document.createElement('div'); right.className = 'matching-box';
    wrapper.append(left, right);
    section.appendChild(wrapper);

    const māori = selectedWords.map(p => p[0]);
    const english = shuffleArray(selectedWords.map(p => p[1]));

    let first = null;
    const colors = ['#ff9e9e','#ffd89e','#fff599','#b5ffbd','#99f2ff','#d0bbff','#ffb3ff','#ff99cc'];

    [...māori, ...english].forEach((word, i) => {
        const box = document.createElement('div');
        box.className = 'drag-item';
        box.textContent = word;
        box.dataset.word = word;
        (i < māori.length ? left : right).appendChild(box);

        box.onclick = () => {
            if (box.style.backgroundColor) return;
            if (!first) {
                first = box;
                box.style.border = '4px solid #0066ff';
            } else if (first !== box) {
                const leftWord = first.parentElement === left ? first.dataset.word : box.dataset.word;
                const rightWord = first.parentElement === right ? first.dataset.word : box.dataset.word;
                const correct = selectedWords.some(p => p[0] === leftWord && p[1] === rightWord);

                if (correct) {
                    const col = colors[matched.children.length % colors.length];
                    [first, box].forEach(el => {
                        el.style.backgroundColor = col;
                        el.style.border = 'none';
                        el.onclick = null;
                    });
                    const chip = document.createElement('div');
                    chip.className = 'pair';
                    chip.style.backgroundColor = col;
                    chip.innerHTML = `${leftWord} <span class="sep">↔</span> ${rightWord}`;
                    matched.appendChild(chip);
                } else {
                    first.style.border = box.style.border = '4px solid red';
                    setTimeout(() => {
                        first.style.border = box.style.border = '2px solid #666';
                    }, 600);
                }
                first.style.border = '2px solid #666';
                first = null;
            } else {
                first.style.border = '2px solid #666';
                first = box;
                box.style.border = '4px solid #0066ff';
            }
        };
    });
}

function updateContent() {
    const cat = document.getElementById('category-selector').value;
    selectedWords = data[cat] ? shuffleArray([...data[cat]]) : [];
    document.getElementById('matched-pairs').innerHTML = '';
    showFlashcards();
    showQuiz();
    showMatching();
}

// Start with overview
document.getElementById('category-selector').value = 'overview';
updateContent();
</script>

<div style="text-align:center; margin:40px 0;">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/urpk2Rqxo94?si=Fj551AWVIxxE72FY" title="Te Reo Māori Lesson 1 - Greetings" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>

</body>
</html>
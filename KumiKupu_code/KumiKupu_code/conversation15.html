<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kia hia etc</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
<style>
    :root {
        --card-width: clamp(180px, 22vw, 250px);
        --card-height: clamp(120px, 18vh, 150px);
        --card-gap: clamp(15px, 2vw, 20px);
    }
    html, body {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        background-color: #e8ef7e;
    }
    .app-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 20px;
        min-height: 100dvh;
    }
    header {
        width: 100%;
        max-width: 1000px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    .selector-container {
        background-color: #ADD8E6;
        border: 3px solid #00008B;
        border-radius: 15px;
        padding: 5px 15px;
        margin: 0 auto;
    }
    #category-selector {
        min-width: 300px;
        background: transparent;
        border: none;
        font-family: 'Poppins', sans-serif;
        font-size: clamp(1.8rem, 5vw, 2.5rem);
        font-weight: 700;
        color: #333;
        cursor: pointer;
        text-align: center;
    }
    .card-grid {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        max-width: 95%;
        gap: var(--card-gap);
    }
    .card-row {
        display: flex;
        justify-content: center;
        gap: var(--card-gap);
        width: 100%;
    }
    .card {
        width: var(--card-width);
        height: var(--card-height);
        background-color: white;
        border: 3px solid black;
        border-radius: 15px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: 700;
        font-size: clamp(1rem, 2.5vw, 1.5rem);
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        user-select: none;
    }
    .btn {
        padding: 12px 25px;
        font-size: 1rem;
        font-weight: 700;
        color: #fff;
        border: none;
        border-radius: 50px;
        cursor: pointer;
    }
    .btn-secondary { background-color: #1e5dab; }

    /* Light Color Palette */
    .card.matched { border-color: #333; }
    .bg-red { background-color: #ffcccb; color: black; }
    .bg-orange { background-color: #ffddc1; color: black; }
    .bg-yellow { background-color: #ffffcc; color: black; }
    .bg-green { background-color: #d4edda; color: black; }
    .bg-blue { background-color: #cce5ff; color: black; }
    .bg-violet { background-color: #e6e6fa; color: black; }

    @media (max-width:800px){
        :root{
            --card-width: clamp(140px, 40vw, 180px);
            --card-height: clamp(70px, 12vh, 90px);
            --card-gap: 10px;
        }
        .header {
            flex-direction: column;
            gap: 10px;
        }
    }
</style>
</head>
<body>
<div class="app-container">
    <header>
        <button id="reset-btn" class="btn btn-secondary">Reset</button>
        <div class="selector-container">
            <select id="category-selector" onchange="startGame()">
                <option value="select" selected>--Select--</option>
                <option value="number">Numbers</option>
                <option value="ehia">E hia</option>
                <option value="kiahia">Kia hia</option>
                <option value="tokohia">Tokohia</option>
                <option value="all">ALL</option>
            </select>
        </div>
    </header>
    <div id="card-grid" class="card-grid"></div>
</div>
<script>
const data = {
  select: [
    { teReo: "E hia", english: "how many (things)" },
    { teReo: "Kia hia", english: "how many (should / would you like)" },
    { teReo: "Tokohia", english: "how many people" },
    { teReo: "āporo", english: "apple" },
    { teReo: "kaiako", english: "teacher" },
    { teReo: "keke", english: "cake" },
    { teReo: "māu", english: "for you (A category)" },
    { teReo: "mōu", english: "for you (O category)" },
    { teReo: "ngā", english: "the (plural)" },
    { teReo: "pene", english: "pen" },
    { teReo: "pukapuka", english: "book" },
    { teReo: "tamariki", english: "children" }
  ],

  number: [
    { teReo: "kore", english: "zero" },
    { teReo: "kotahi", english: "one" },
    { teReo: "rua", english: "two" },
    { teReo: "toru", english: "three" },
    { teReo: "whā", english: "four" },
    { teReo: "rima", english: "five" },
    { teReo: "ono", english: "six" },
    { teReo: "whitu", english: "seven" },
    { teReo: "waru", english: "eight" },
    { teReo: "iwa", english: "nine" },
    { teReo: "tekau", english: "ten" },
    { teReo: "rau", english: "hundred" }
  ],

  ehia: [
    { teReo: "E iwa ngā keke", english: "nine cakes" },
    { teReo: "E rima ngā āporo", english: "five apples" },
    { teReo: "E rua ngā pene", english: "two pens" },
    { teReo: "E toru ngā pene", english: "three pens" },
    { teReo: "E whā ngā kapu", english: "four cups" },
    { teReo: "E whitu ngā pukapuka", english: "seven books" },
    { teReo: "E hia ngā pene", english: "how many pens" },
    { teReo: "E hia ngā keke", english: "How many cakes" },
    { teReo: "E hia ngā āporo", english: "How many apples" },
    { teReo: "E ono ngā pukapuka", english: "six books" },
    { teReo: "Kotahi te āporo", english: "one apple" },
    { teReo: "Tekau ngā kapu", english: "ten cups" }
  ],

  kiahia: [
    { teReo: "Kia iwa ngā kapu", english: "nine cups are needed" },
    { teReo: "Kia rima ngā āporo", english: "five apples are needed" },
    { teReo: "Kia rua ngā keke", english: "two cakes are needed" },
    { teReo: "Kia toru ngā motokā", english: "three cars are needed" },
    { teReo: "Kia tekau ngā keke", english: "ten cakes are needed" },
    { teReo: "Kia whā ngā pene", english: "four pens are needed" },
    { teReo: "Kia waru ngā pukapuka", english: "eight books are needed" },
    { teReo: "Kia hia ngā pukapuka?", english: "how many books are needed?" },
    { teReo: "Kia hia ngā keke?", english: "how many cakes are needed?" },
    { teReo: "Kia hia ngā pene?", english: "how many pene are needed?" },
    { teReo: "Kia kotahi te pukapuka", english: "one book is needed" },
    { teReo: "Kia ono ngā motokā", english: "six cars are needed" }
  ],

  tokohia: [
    { teReo: "i te akomanga", english: "in the classroom" },
    { teReo: "i te papa", english: "on the field" },
    { teReo: "i te poti", english: "in the boat" },
    { teReo: "Tokoiwa ngā ākonga", english: "nine students" },
    { teReo: "Tekau ngā tamariki", english: "ten children" },
    { teReo: "Tokorima ngā kaiako", english: "five teachers" },
    { teReo: "Tokorua ngā ākonga", english: "two students" },
    { teReo: "Tokowaru ngā tamariki", english: "eight children" },
    { teReo: "Tokowhā ngā kaiako", english: "four teachers" },
    { teReo: "Tokohia ngā tamariki", english: "how many children" },
    { teReo: "Tokotoru ngā tamariki", english: "three children" },
    { teReo: "Tokowhitu ngā kaiako", english: "seven teachers" }
  ]
};
const colors = ['bg-red', 'bg-orange', 'bg-yellow', 'bg-green', 'bg-blue', 'bg-violet'];

const grid = document.getElementById('card-grid');
const selector = document.getElementById('category-selector');
const resetBtn = document.getElementById('reset-btn');

function shuffle(array) {
    let currentIndex = array.length, randomIndex;
    while (currentIndex !== 0) {
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex--;
        [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
    }
    return array;
}

function startGame(){
    grid.innerHTML = '';
    let category = selector.value;

    let vocabArray = [];
    if(category === 'all'){
        Object.keys(data).forEach(cat => {
            if (cat !== 'select') {
                vocabArray = vocabArray.concat(data[cat]);
            }
        });
    } else {
        vocabArray = [...data[category]];
    }

    vocabArray = shuffle(vocabArray).slice(0, 6);
    let shuffledColors = shuffle([...colors]);

    let cardsArray = [];
    vocabArray.forEach((w, i) => {
        const color = shuffledColors[i];
        cardsArray.push({ text: w.teReo, key: i, color: color });
        cardsArray.push({ text: w.english, key: i, color: color });
    });
    cardsArray = shuffle(cardsArray);

    let rowSize = window.matchMedia("(max-width:800px)").matches ? 2 : 4;
    for(let i = 0; i < cardsArray.length; i += rowSize){
        const row = document.createElement('div');
        row.className = 'card-row';
        cardsArray.slice(i, i + rowSize).forEach(c => {
            const card = document.createElement('div');
            card.className = 'card';
            card.textContent = c.text;
            card.dataset.key = c.key;
            card.dataset.color = c.color;
            card.addEventListener('click', () => handleClick(card));
            row.appendChild(card);
        });
        grid.appendChild(row);
    }
}

let firstCard = null;
let secondCard = null;
let lock = false;

function handleClick(card){
    if(lock || card.classList.contains('matched')) return;
    
    card.style.border = '3px dashed gray';

    if(!firstCard){
        firstCard = card;
    } else if(!secondCard && card !== firstCard){
        secondCard = card;
        lock = true;
        setTimeout(checkMatch, 500);
    } else {
         // If the same card is clicked twice, reset its border
        card.style.border = '3px solid black';
        if(firstCard === card) firstCard = null;
    }
}

function checkMatch(){
    if(firstCard.dataset.key === secondCard.dataset.key){
        const colorClass = firstCard.dataset.color;
        firstCard.classList.add(colorClass, 'matched');
        secondCard.classList.add(colorClass, 'matched');
        // Reset border styles to default (handled by .matched class)
        firstCard.style.border = ''; 
        secondCard.style.border = '';
    } else {
        firstCard.style.border = '3px solid black';
        secondCard.style.border = '3px solid black';
    }
    firstCard = null;
    secondCard = null;
    lock = false;
}

resetBtn.addEventListener('click', startGame);
startGame(); // Initial game start

</script>
<div class="wrap" style="text-align: center; margin-top: 40px;">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/PbG1sAAS8vI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  </div>
</body>
</html>

<!DOCTYPE html>
<html lang="mi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Te Reo Māori Wordle</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Poppins', sans-serif;
  background: #fbfbff;
  margin:0; padding:0;
  display:flex; flex-direction:column; align-items:center;
  min-height:100vh;
  box-sizing:border-box;
}
header{
  text-align:center;
  margin:16px;
  width:100%;
}
h1{margin:0;font-size:28px;color:#111}
.sub{font-size:14px;color:#555;margin:4px 0 16px}
#hint{margin-bottom:12px;font-weight:600;font-size:16px;color:#333}
#grid{display:grid;gap:6px;margin-bottom:16px;width:fit-content;}
.row{display:flex;gap:6px;justify-content:center;}
.tile{width:48px;height:48px;border:2px solid #ccc;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:20px;text-transform:uppercase;border-radius:6px;user-select:none;}
.tile.correct{background:#22c55e;color:white;border:none;}
.tile.present{background:#eab308;color:white;border:none;}
.tile.absent{background:#d1d5db;color:white;border:none;}
#keyboard{display:grid;gap:6px;justify-content:center;max-width:100%;width:fit-content;margin:0 auto;}
.key{padding:12px 10px;border:none;border-radius:6px;background:#e5e7eb;font-weight:700;cursor:pointer;user-select:none;min-width:48px;text-align:center;}
.key.correct{background:#22c55e;color:white;}
.key.present{background:#eab308;color:white;}
.key.absent{background:#d1d5db;color:white;}
#message{font-size:20px;font-weight:700;text-align:center;margin:12px;min-height:28px;}
button#restart{padding:10px 18px;font-weight:700;border:none;border-radius:8px;background:linear-gradient(45deg,#f97316,#0ea5a4);color:white;cursor:pointer;margin-bottom:16px;}
.confetti{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:999;}
@media (max-width:600px){.tile,.key{width:48px;height:48px;font-size:18px;}}
</style>
</head>
<body>
<header>
<h1>Te Reo Māori Wordle</h1>
<div id="hint">Hint: fish</div>
</header>
<div id="grid"></div>
<div id="keyboard"></div>
<div id="message"></div>
<button id="restart">Restart</button>
<canvas id="confetti" class="confetti"></canvas>

<script>
// --- VOCABULARY ---
const vocablist = [
  {maori:'āke ake', english:'forever and ever'},
  {maori:'ā muri ake', english:'after'},
  {maori:'āmaimai', english:'nervous'},
  {maori:'āna', english:'his / hers'},
  {maori:'āporo', english:'apple'},
  {maori:'ārani', english:'orange'},
  {maori:'ākuanei', english:'soon'},
  {maori:'āwangawanga', english:'anxious'},
  {maori:'ahau', english:'I / me'},
  {maori:'ako', english:'to learn / teach'},
  {maori:'Amine', english:'amen'},
  {maori:'amene', english:'amen'},
  {maori:'Ariki', english:'Lord'},
  {maori:'ariā', english:'idea, concept'},
  {maori:'ariā matua', english:'main ideas'},
  {maori:'aroha', english:'love'},
  {maori:'ata', english:'morning'},
  {maori:'ata ātaahua', english:'beautiful morning'},
  {maori:'atawhai', english:'grace / kindness'},
  {maori:'atua', english:'god / spiritual being'},
  {maori:'Atua', english:'God'},
  {maori:'au', english:'I / me'},
  {maori:'auaha', english:'creative'},
  {maori:'e … ana', english:'continuous'},
  {maori:'Hāhi', english:'church'},
  {maori:'Hāto Kēneti', english:'Saint Kentigern (St Kent’s)'},
  {maori:'haere', english:'to go'},
  {maori:'Hakihea', english:'December'},
  {maori:'hararei', english:'holidays'},
  {maori:'harikoa', english:'joyful'},
  {maori:'Haratua', english:'May'},
  {maori:'hau', english:'wind'},
  {maori:'hēki', english:'egg'},
  {maori:'Here-turi-kōkā', english:'August'},
  {maori:'hiakai', english:'hungry'},
  {maori:'hipi', english:'sheep'},
  {maori:'hoiho', english:'horse'},
  {maori:'hongongoi', english:'July'},
  {maori:'Hōngongoi', english:'July'},
  {maori:'hōhā', english:'annoyed'},
  {maori:'hōtiti', english:'sausage'},
  {maori:'Hōtoke', english:'winter'},
  {maori:'hua rākau', english:'fruit'},
  {maori:'huangō', english:'asthma'},
  {maori:'huka', english:'snow / ice'},
  {maori:'huka', english:'sugar'},
  {maori:'hunga whakarongo', english:'audience'},
  {maori:'Hui-tanguru', english:'February'},
  {maori:'i', english:'past'},
  {maori:'ia', english:'he / she'},
  {maori:'ihu Karaiti', english:'Jesus Christ'},
  {maori:'ika', english:'fish'},
  {maori:'iti', english:'small'},
  {maori:'ka', english:'future'},
  {maori:'kai', english:'food / meal'},
  {maori:'kaihoe', english:'paddler'},
  {maori:'kaihoe papa rererangi wai', english:'paddle boarder'},
  {maori:'kāhu', english:'hawk'},
  {maori:'kāinga', english:'home / village'},
  {maori:'kākā', english:'parrot'},
  {maori:'kapo', english:'capture (audience attention)'},
  {maori:'karakia', english:'prayer'},
  {maori:'kāroti', english:'carrot'},
  {maori:'kau', english:'swim'},
  {maori:'kauhau', english:'formal speech'},
  {maori:'kei te', english:'present tense'},
  {maori:'kererū', english:'wood pigeon'},
  {maori:'kia', english:'so that / in order to'},
  {maori:'kia ora', english:'hello / hi'},
  {maori:'kīanga whakarite', english:'simile'},
  {maori:'kīanga whakatangata', english:'personification'},
  {maori:'kīwaha', english:'idiom'},
  {maori:'kiatau', english:'fellowship / unity'},
  {maori:'kiore', english:'rat'},
  {maori:'Kirihimete', english:'Christmas'},
  {maori:'koa', english:'happy'},
  {maori:'koe', english:'you (singular)'},
  {maori:'Kohi-tātea', english:'January'},
  {maori:'konā', english:'there (by you)'},
  {maori:'konei', english:'here (by me)'},
  {maori:'kōanga', english:'spring'},
  {maori:'kōrero ōkawa', english:'formal speaking'},
  {maori:'kōrero ōpaki', english:'informal speaking'},
  {maori:'kōrero pono', english:'fact'},
  {maori:'kōrerorero', english:'dialogue, conversation'},
  {maori:'korōria', english:'glory'},
  {maori:'korā', english:'over there'},
  {maori:'kōrua', english:'you two'},
  {maori:'koutou', english:'you (plural)'},
  {maori:'kua', english:'perfect / completed'},
  {maori:'kura', english:'school'},
  {maori:'kurī', english:'dog'},
  {maori:'mahi', english:'work'},
  {maori:'Mahuru', english:'September'},
  {maori:'mākona', english:'satisfied'},
  {maori:'makariri', english:'cold'},
  {maori:'manu', english:'bird'},
  {maori:'manahau', english:'cheerful'},
  {maori:'mango', english:'shark'},
  {maori:'maunga', english:'mountain'},
  {maori:'maungārongo', english:'peace'},
  {maori:'māharahara', english:'worried'},
  {maori:'māia', english:'brave'},
  {maori:'mākinakina', english:'chilly / cold wind'},
  {maori:'mārie', english:'calm'},
  {maori:'marae', english:'courtyard / meeting place'},
  {maori:'marama', english:'moon'},
  {maori:'mataku', english:'scared / afraid'},
  {maori:'matapaki', english:'discussion'},
  {maori:'matewai', english:'thirsty'},
  {maori:'mātakitaki', english:'to watch / observe'},
  {maori:'mātou', english:'we (excl.)'},
  {maori:'māua', english:'we two (excl.)'},
  {maori:'me', english:'and (link nouns/people)'},
  {maori:'me', english:'should'},
  {maori:'menemene', english:'smile'},
  {maori:'merā', english:'they two'},
  {maori:'mīti', english:'meat'},
  {maori:'mita o te reo', english:'rhythm, intonation, pronunciation'},
  {maori:'miraka', english:'milk'},
  {maori:'moana', english:'sea / ocean'},
  {maori:'mōku', english:'for me'},
  {maori:'mōu', english:'for you'},
  {maori:'mua', english:'before / in front'},
  {maori:'muri', english:'behind'},
  {maori:'na te mea', english:'because'},
  {maori:'ngeru', english:'cat'},
  {maori:'Ngahuru', english:'autumn'},
  {maori:'ngā', english:'plural / the'},
  {maori:'ngenge', english:'tired'},
  {maori:'noa', english:'ordinary / free from tapu'},
  {maori:'nō reira', english:'therefore, so'},
  {maori:'nuka reo', english:'language features'},
  {maori:'ohorere', english:'surprised'},
  {maori:'ora', english:'life / well-being'},
  {maori:'otirā', english:'but, however (formal/poetic)'},
  {maori:'pae', english:'area'},
  {maori:'pāka', english:'park'},
  {maori:'pai', english:'good'},
  {maori:'Paenga-whāwhā', english:'April'},
  {maori:'pāpaka', english:'crab'},
  {maori:'parāoa', english:'bread'},
  {maori:'parāoa / orca', english:'whale / orca'},
  {maori:'parirau tuarā', english:'dorsal fin'},
  {maori:'pata', english:'butter'},
  {maori:'pēpi', english:'baby'},
  {maori:'pepeha', english:'aphorisms'},
  {maori:'pīni', english:'beans'},
  {maori:'Pipiri', english:'June'},
  {maori:'pīpī', english:'chick'},
  {maori:'poaka', english:'pig'},
  {maori:'pōuri', english:'sad'},
  {maori:'poti', english:'boat'},
  {maori:'poti mā', english:'white boat'},
  {maori:'Poutū-te-rangi', english:'March'},
  {maori:'puehu', english:'dust'},
  {maori:'puāwai', english:'flower / blossom'},
  {maori:'pūngāwerewere', english:'spider'},
  {maori:'pūwaha', english:'estuary'},
  {maori:'rā', english:'sun / day'},
  {maori:'rā e whiti ana', english:'shining sun'},
  {maori:'Rāapa', english:'Wednesday'},
  {maori:'rāhua', english:'they two'},
  {maori:'Rāhoroi', english:'Saturday'},
  {maori:'Rāhina', english:'Monday'},
  {maori:'Rāmere', english:'Friday'},
  {maori:'rangi', english:'sky / day'},
  {maori:'Rāpare', english:'Thursday'},
  {maori:'rātou', english:'they (plural)'},
  {maori:'Rātapu', english:'Sunday'},
  {maori:'Rātū', english:'Tuesday'},
  {maori:'Raumati', english:'summer'},
  {maori:'raro', english:'below'},
  {maori:'rawe', english:'great / excellent'},
  {maori:'reira', english:'that / there'},
  {maori:'rere', english:'fluent, flowing'},
  {maori:'rererangi wai', english:'paddleboard'},
  {maori:'rēmana', english:'lemon'},
  {maori:'rētihi', english:'lettuce'},
  {maori:'riri', english:'angry'},
  {maori:'rīwai', english:'potato'},
  {maori:'roto', english:'inside'},
  {maori:'runga', english:'above'},
  {maori:'tāku', english:'my'},
  {maori:'tamariki', english:'children'},
  {maori:'tangata', english:'person / people'},
  {maori:'tango hū', english:'to take off shoes'},
  {maori:'tata', english:'near / close'},
  {maori:'tātou', english:'we (incl.)'},
  {maori:'tau', english:'settle / descend'},
  {maori:'tāua', english:'we two (incl.)'},
  {maori:'tai', english:'sea / tide'},
  {maori:'tēnā', english:'that / those'},
  {maori:'tēnei', english:'this (by me)'},
  {maori:'tērā', english:'that (over there)'},
  {maori:'tiakarete', english:'chocolate'},
  {maori:'tīeke', english:'saddleback'},
  {maori:'tīmatanga', english:'beginning / start'},
  {maori:'tīrairaka', english:'fantail'},
  {maori:'tikanga', english:'customs / cultural practices'},
  {maori:'tio', english:'frost'},
  {maori:'tohorā', english:'whale'},
  {maori:'tonga', english:'south'},
  {maori:'toro', english:'to visit'},
  {maori:'tōna taha', english:'beside'},
  {maori:'tōna wā', english:'at that time'},
  {maori:'tuna', english:'eel'},
  {maori:'uta', english:'inland / shore'},
  {maori:'waea', english:'phone'},
  {maori:'waho', english:'outside'},
  {maori:'wai', english:'water'},
  {maori:'wai mārie', english:'calm water'},
  {maori:'waenganui', english:'between'},
  {maori:'wairua', english:'spirit'},
  {maori:'Wairua Tapu', english:'Holy Spirit'},
  {maori:'waka', english:'canoe / vehicle'},
  {maori:'wāhi', english:'place'},
  {maori:'wera', english:'hot'},
  {maori:'whakaaro', english:'opinion'},
  {maori:'whakaaro pai', english:'good thoughts'},
  {maori:'whakapakepake', english:'persuade, motivate'},
  {maori:'whakapuaki', english:'express, articulate'},
  {maori:'whakaputa', english:'delivery'},
  {maori:'whakaraupapa', english:'sequence logically'},
  {maori:'whakatau', english:'conclusion, resolution'},
  {maori:'whakataukī', english:'proverbs'},
  {maori:'whakaū', english:'reinforce'},
  {maori:'whakawhanake', english:'develop'},
  {maori:'whakamā', english:'embarrassed'},
  {maori:'whakamīharo', english:'amazed'},
  {maori:'whare', english:'house / building'},
  {maori:'wharenui', english:'meeting house'},
  {maori:'wheako whaiaro', english:'personal experience'},
  {maori:'whekī', english:'octopus'},
  {maori:'whiwhingatahitanga', english:'fellowship / unity'},
  {maori:'Whiringa-ā-nuku', english:'October'},
  {maori:'Whiringa-ā-rangi', english:'November'}
];

// --- Māori alphabet (includes double letters) ---
const letters = ['a','ā','e','ē','i','ī','o','ō','u','ū','h','k','m','n','p','r','t','w','ng','wh',' '];

// --- State ---
let solutionWord, solutionHint, currentRow=0, currentCol=0, maxRows=5;
let grid=[];

// DOM Elements
const gridEl = document.getElementById('grid');
const keyboardEl = document.getElementById('keyboard');
const messageEl = document.getElementById('message');
const hintEl = document.getElementById('hint');
const confettiEl = document.getElementById('confetti');
const ctx = confettiEl.getContext('2d');
let confettiActive = false;

// --- Canvas ---
function resizeCanvas(){confettiEl.width=window.innerWidth; confettiEl.height=window.innerHeight;}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// --- Helpers for double letters ---
function splitWord(word){
  const result=[];
  for(let i=0;i<word.length;i++){
    const two = word[i]+(word[i+1]||'');
    if(letters.includes(two)){
      result.push(two); i++;
    } else {
      result.push(word[i]);
    }
  }
  return result;
}

// --- Start Game ---
function startGame(){
  currentRow=0; currentCol=0;
  messageEl.textContent=''; confettiActive=false; clearCanvas(); resizeCanvas();

  const isPhone = window.innerWidth < 600;
  const maxLetters = isPhone ? 6 : 20;

  const possibleWords = vocablist.filter(w=>splitWord(w.maori).length<=maxLetters);
  const rand = possibleWords[Math.floor(Math.random()*possibleWords.length)];

  solutionWord = rand.maori.toLowerCase();
  solutionHint = rand.english;
  hintEl.textContent = `Hint: ${solutionHint}`;

  // Grid
  gridEl.innerHTML=''; grid=[];
  for(let r=0;r<maxRows;r++){
    const rowEl = document.createElement('div'); rowEl.className='row';
    let row=[];
    for(let c=0;c<splitWord(solutionWord).length;c++){
      const tile=document.createElement('div'); tile.className='tile';
      rowEl.appendChild(tile); row.push(tile);
    }
    gridEl.appendChild(rowEl); grid.push(row);
  }

  buildKeyboard();
}

// --- Keyboard ---
function buildKeyboard(){
  keyboardEl.innerHTML='';
  const rows = [letters.slice(0,7),letters.slice(7,14),letters.slice(14)];
  rows.forEach(row=>{
    const rowDiv=document.createElement('div');
    rowDiv.style.display='flex'; rowDiv.style.justifyContent='center'; rowDiv.style.gap='6px';
    row.forEach(l=>{
      const key = document.createElement('button'); key.className='key'; key.textContent=l;
      key.addEventListener('click',()=>handleKey(l));
      rowDiv.appendChild(key);
    });
    keyboardEl.appendChild(rowDiv);
  });

  // Enter / Backspace
  const control=document.createElement('div');
  control.style.display='flex'; control.style.justifyContent='center'; control.style.gap='6px'; control.style.marginTop='8px';
  const enter=document.createElement('button'); enter.className='key'; enter.textContent='Enter'; enter.style.minWidth='80px';
  enter.addEventListener('click',()=>handleKey('Enter'));
  control.appendChild(enter);
  const back=document.createElement('button'); back.className='key'; back.textContent='BACK'; back.style.minWidth='80px';
  back.addEventListener('click',()=>handleKey('Backspace'));
  control.appendChild(back);
  keyboardEl.appendChild(control);
}

// --- Input ---
function handleKey(key){
  if(currentRow>=maxRows) return;
  const solutionLength = splitWord(solutionWord).length;

  if(key === 'Enter'){
    if(currentCol === solutionLength) checkRow();
  } else if(key === 'Backspace'){
    if(currentCol > 0){ 
      currentCol--; 
      grid[currentRow][currentCol].textContent = '';
    }
  } else if(currentCol < solutionLength){
    // Special case for 'wh' digraph
    if(key === 'h' && currentCol > 0 && grid[currentRow][currentCol-1].textContent.toLowerCase() === 'w'){
      grid[currentRow][currentCol-1].textContent = 'wh';
    } else {
      grid[currentRow][currentCol].textContent = key;
      currentCol++;
    }
  }
}

// Physical keyboard
document.addEventListener('keydown',e=>{
  const key = e.key.toLowerCase();
  if(key === 'enter'){
    handleKey('Enter');
  } else if(key === 'backspace'){
    handleKey('Backspace');
  } else if(key.length === 1 && (letters.includes(key) || "abcdefghijklmnopqrstuvwxyz".includes(key))) {
    handleKey(key);
  } 
});

// --- Check ---
function checkRow(){
  const guess = grid[currentRow].map(t=>t.textContent.toLowerCase()).join('');
  const solutionArr = splitWord(solutionWord);
  const guessArr = splitWord(guess);
  const solutionCopy = solutionArr.slice();

  guessArr.forEach((l,i)=>{
    if(l===solutionArr[i]){grid[currentRow][i].classList.add('correct'); markKey(l,'correct'); solutionCopy[i]=null;}
  });
  guessArr.forEach((l,i)=>{
    if(grid[currentRow][i].classList.contains('correct')) return;
    if(solutionCopy.includes(l)){grid[currentRow][i].classList.add('present'); markKey(l,'present'); solutionCopy[solutionCopy.indexOf(l)]=null;}
    else {grid[currentRow][i].classList.add('absent'); markKey(l,'absent');}
  });

  if(guessArr.join('')===solutionArr.join('')){
    messageEl.textContent='Tino pai! You guessed it!'; launchConfetti(); currentRow=maxRows;
  } else {
    currentRow++; currentCol=0;
    if(currentRow===maxRows) messageEl.textContent=`Out of tries! The word was "${solutionWord.toUpperCase()}"`;
  }
}

function markKey(l,cls){
  const key=Array.from(document.querySelectorAll('.key')).find(k=>k.textContent===l);
  if(key&&!key.classList.contains('correct')&&!key.classList.contains('present')) key.classList.add(cls);
}

// --- Restart ---
document.getElementById('restart').addEventListener('click',startGame);

// --- Confetti ---
let confettiParticles=[];
function launchConfetti(){
  confettiActive=true; confettiParticles=[];
  for(let i=0;i<150;i++){
    confettiParticles.push({
      x:Math.random()*confettiEl.width,
      y:Math.random()*confettiEl.height-confettiEl.height,
      r:Math.random()*6+2,
      d:Math.random()*20+10,
      color:`hsl(${Math.random()*360},100%,50%)`,
      tilt:Math.floor(Math.random()*10)-10,
      tiltAngleIncrement:Math.random()*0.07+0.05,
      tiltAngle:0
    });
  }
  requestAnimationFrame(updateConfetti);
}
function clearCanvas(){ctx.clearRect(0,0,confettiEl.width,confettiEl.height);}
function updateConfetti(){
  if(!confettiActive) return;
  resizeCanvas(); clearCanvas();
  confettiParticles.forEach(p=>{
    p.tiltAngle+=p.tiltAngleIncrement;
    p.y+=(Math.cos(p.d)+3+p.r/2)/2;
    p.x+=Math.sin(p.tiltAngle);
    ctx.beginPath(); ctx.lineWidth=p.r/2; ctx.strokeStyle=p.color;
    ctx.moveTo(p.x+p.tilt,p.y); ctx.lineTo(p.x+p.tilt+p.tilt/2,p.y+p.tilt+p.r/2); ctx.stroke();
  });
  requestAnimationFrame(updateConfetti);
}

// --- INIT ---
startGame();
</script>
</body>
</html>
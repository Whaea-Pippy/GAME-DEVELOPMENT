<!doctype html>
<html lang="mi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Makawe Kōura me ngā Pea e Toru</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --card-radius:14px;
    --card-pad:18px;
    --gold: #d4af37;
    --max-width:980px;
  }
  html,body{height:100%;margin:0;font-family:Nunito,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#111;background-color:#f6f6f6;}
  body { background-size: cover; background-position: center; }
  .site { min-height:100%; display:flex; align-items:flex-start; justify-content:center; padding:18px 18px; }
  .card-wrap{ width:100%; max-width:var(--max-width); margin:0 auto; background:transparent; border-radius:18px; padding:22px; box-sizing:border-box; }
  header h1{margin:0;font-size:1.5rem;text-align:center; color: white; text-shadow: 1px 1px 2px black;}
  section.story-section { display:none; padding:20px 8px; }
  section.story-section.active { display:block; }
  .big-card { margin:14px auto; perspective:1200px; width:min(820px,100%); max-width:100%; outline: none; }
  .big-card:focus, .fc-card:focus { outline: none; }
  .big-card .inner { background:linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.7)); border-radius:var(--card-radius); padding:var(--card-pad); box-shadow: 0 6px 18px rgba(0,0,0,0.08); position:relative; transform-style:preserve-3d; transition: transform .6s cubic-bezier(.2,.9,.3,1); min-height:63px; display:flex; align-items:center; justify-content:center; text-align:center; cursor:pointer; user-select:none; }
  .big-card.flipped .inner { transform: rotateY(180deg); }
  .face { position:absolute; inset:0; border-radius:var(--card-radius); display:flex; align-items:center; justify-content:center; padding:18px; box-sizing:border-box; backface-visibility:hidden; -webkit-backface-visibility:hidden; font-weight:800; font-size:1.05rem; line-height:1.3; opacity: 0.85; }
  .front { background: rgba(255,222,173,0.8); }
  .back { background: rgba(220,240,220,0.8); transform:rotateY(180deg); font-weight:700; font-size:1.0rem; }
  .speaker { position:absolute; left:16px; top:12px; font-size:0.85rem; font-weight:800; opacity:0.6; }
  .back .speaker { display: none; }
  .fc-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap:12px; margin-top:18px; }
  .fc-card { perspective:1000px; height:110px; cursor:pointer; outline:none; }
  .fc-inner { width:100%; height:100%; border-radius:12px; transform-style:preserve-3d; transition: transform .5s; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
  .fc-card.flipped .fc-inner { transform: rotateY(180deg); }
  .fc-face { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; text-align:center; padding:10px; box-sizing:border-box; border-radius:12px; font-weight:700; backface-visibility:hidden; opacity: 0.85; }
  .fc-front { background:#c7d2fe; color:#23195a; }
  .fc-back { background:#fecdd3; color:#5a0d24; transform:rotateY(180deg); }
  .controls { display:flex; justify-content:space-between; gap:12px; margin-top:18px; align-items:center; flex-wrap:wrap; }
  button.nav { background: linear-gradient(180deg,#fff1b8,#ffd166); border:0; padding:10px 18px; border-radius:10px; font-weight:800; cursor:pointer; box-shadow:0 6px 14px rgba(0,0,0,0.08); }
  button.nav:disabled { opacity:0.45; cursor:not-allowed; transform:none; }
  .hint { font-size:0.92rem; color:white; text-shadow: 1px 1px 2px black; margin-top:10px; text-align:center; }
  @media (max-width:520px){ .big-card .inner{ padding:14px; min-height:72px; font-size:1rem; } .speaker{ left:10px; top:8px; } }
</style>
</head>
<body>

<div class="site">
  <div class="card-wrap" id="app">
    <header>
      <h1>Makawe Kōura me ngā Pea e Toru</h1>
    </header>

    <main>
      <!-- GOLD 1 -->
      <section id="gold1" class="story-section active" data-bg="images/gold1.jpg">
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Kōpikopiko</span>I tētahi rā, ka kōpikopiko tētahi kōtiro i te ngahere.</div>
            <div class="face back">One day, a girl wandered through the forest.</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Ingoa</span>Ko Makawe Kōura tōna ingoa.</div>
            <div class="face back">Her name was Makawe Kōura.</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Kite</span>I a ia e haereere ana, ka kite ia i tētahi whare iti.</div>
            <div class="face back">As she was wandering, she saw a small house.</div>
          </div>
        </div>
      </section>

      <!-- GOLD 2 -->
      <section id="gold2" class="story-section" data-bg="images/gold2.jpg">
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Kūaha</span>Ka patopato ia ki te kūaha, engari kāore he tangata i te kāinga.</div>
            <div class="face back">She knocked on the door, but no one was home.</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Kuhu</span>Nō reira, ka kuhu ia ki roto.</div>
            <div class="face back">So, she went inside.</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Tēpu</span>I roto i te whare, ka kite ia i e toru ngā pereti o te pāreti i runga i te tēpu.</div>
            <div class="face back">Inside the house, she saw three plates of porridge on the table.</div>
          </div>
        </div>
      </section>

      <!-- GOLD 3 -->
      <section id="gold3" class="story-section" data-bg="images/gold3.jpg">
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Wera</span>Ka whakamātau ia ki te kai i te pereti nui – he wera rawa!</div>
            <div class="face back">She tried the big plate – it was too hot!</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Mātao</span>Ka whakamātau ki te pereti waenga – he mātao rawa!</div>
            <div class="face back">She tried the medium plate – it was too cold!</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Tino pai!</span>Ka whakamātau ki te pereti iti – tino pai! Ka kai katoa ia i tērā.</div>
            <div class="face back">She tried the small plate – just right! She ate it all.</div>
          </div>
        </div>
      </section>

      <!-- GOLD 4 -->
      <section id="gold4" class="story-section" data-bg="images/gold4.jpg">
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Māmā</span>Ka noho ia ki te tūru nui – he māmā rawa!</div>
            <div class="face back">She sat on the big chair – too soft!</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Pakeke</span>Ka noho ki te tūru waenga – he pakeke rawa!</div>
            <div class="face back">She sat on the medium chair – too hard!</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Pakaru</span>Ka noho ki te tūru iti – tino pai! Engari ka pakaru te tūru.</div>
            <div class="face back">She sat on the little chair – just right! But the chair broke.</div>
          </div>
        </div>
      </section>

      <!-- GOLD 5 -->
      <section id="gold5" class="story-section" data-bg="images/gold5.jpg">
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Rūma Moe</span>Ka haere ia ki te rūma moe.</div>
            <div class="face back">She went to the bedroom.</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Moenga nui</span>Ka takoto ia ki te moenga nui – he māmā rawa!</div>
            <div class="face back">She lay on the big bed – too soft!</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Moenga waenga</span>Ka takoto ia ki te moenga waenga – he pakeke rawa!</div>
            <div class="face back">She lay on the middle bed – too hard!</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Moenga iti</span>Ka takoto ia ki te moenga iti – tino pai! Ka moe ia.</div>
            <div class="face back">She lay on the small bed – just right! She fell asleep.</div>
          </div>
        </div>
      </section>

      <!-- GOLD 6 -->
      <section id="gold6" class="story-section" data-bg="images/gold6.jpg">
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Ngā Pea</span>Ka hoki mai ngā Pea e Toru – Papa Pea, Māmā Pea, Pēpi Pea.</div>
            <div class="face back">The Three Bears came home – Papa Bear, Mama Bear, and Baby Bear.</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Pēpi Pea</span>"Kua kainga tāku pāreti!" te tangi a Pēpi Pea.</div>
            <div class="face back">"My porridge has been eaten!" cried Baby Bear.</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Pakaru</span>"Kua noho tētahi atu ki tōku tūru – kua pakaru!"</div>
            <div class="face back">"Someone sat on my chair – it's broken!"</div>
          </div>
        </div>
      </section>

      <!-- GOLD 7 -->
      <section id="gold7" class="story-section" data-bg="images/gold7.jpg">
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Kite</span>Ka kite rātou i a Makawe Kōura e moe ana i te moenga iti.</div>
            <div class="face back">They saw Makawe Kōura sleeping in the little bed.</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Oho</span>Ka oho ake a Makawe Kōura.</div>
            <div class="face back">Makawe Kōura woke up.</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Oma</span>I mataku ia, ka oma atu ki te ngahere.</div>
            <div class="face back">She was scared and ran into the forest.</div>
          </div>
        </div>
        <div class="big-card" tabindex="0" role="button" aria-pressed="false">
          <div class="inner">
            <div class="face front"><span class="speaker">Kāore</span>Kāore ia i hoki anō ki te whare o ngā Pea.</div>
            <div class="face back">She never returned to the Bears' house.</div>
          </div>
        </div>
      </section>

      <!-- GOLD 8: vocab grid -->
      <section id="gold8" class="story-section" data-bg="images/gold8.jpg">
        <h2 style="text-align:center; margin:6px 0 12px 0; color:white; text-shadow: 1px 1px 2px black;">Kupu (vocabulary)</h2>
        <div class="fc-grid" id="vocabGrid"></div>
      </section>
    </main>

    <div class="controls" style="margin-top:20px;">
      <div class="left">
        <button class="nav" id="prevBtn" aria-label="Back (Hoki)">← Hoki</button>
      </div>
      <div style="text-align:center;flex:1">
        <div id="pageNote" style="font-weight:700; color:white; text-shadow: 1px 1px 2px black;"></div>
      </div>
      <div class="right">
        <button class="nav" id="nextBtn" aria-label="Next (Kōkiri)">Kōkiri →</button>
      </div>
    </div>

  </div>
</div>

<script>
  const sections = Array.from(document.querySelectorAll('.story-section'));
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const pageNote = document.getElementById('pageNote');
  const app = document.getElementById('app');

  let current = 0;
  function showPage(index){
    if(index<0||index>=sections.length) return;
    sections.forEach((s,i)=> s.classList.toggle('active', i===index));
    const bg = sections[index].dataset.bg;
    document.body.style.backgroundImage = `url('${bg}')`;
    current = index;
    prevBtn.disabled = index===0;
    nextBtn.disabled = index===sections.length-1;
    pageNote.textContent = `Section ${index+1} of ${sections.length}`;
    const firstFocusable = sections[index].querySelector('[tabindex]');
    if(firstFocusable) firstFocusable.focus();
  }

  prevBtn.addEventListener('click', ()=> showPage(current-1));
  nextBtn.addEventListener('click', ()=> showPage(current+1));
  showPage(0);

  // ---- Card flip handling for big cards ----
  function bindBigCards(root=document){
    const cards = Array.from(root.querySelectorAll('.big-card'));
    cards.forEach(c=>{
      const innerWrapper = c.querySelector('.inner');
      const toggle = ()=> {
        c.classList.toggle('flipped');
        const pressed = innerWrapper.getAttribute('aria-pressed') === 'true';
        innerWrapper.setAttribute('aria-pressed', String(!pressed));
      };
      c.addEventListener('click', toggle);
      c.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          toggle();
        }
      });
    });
  }

  const vocab = [
    { te: "kōpikopiko", en: "wander, meander" },
    { te: "haereere", en: "to walk around" },
    { te: "whare", en: "house" },
    { te: "kūaha", en: "door" },
    { te: "kuhu", en: "enter" },
    { te: "pereti", en: "plate" },
    { te: "pāreti", en: "porridge" },
    { te: "wera", en: "hot" },
    { te: "mātao", en: "cold" },
    { te: "tino pai", en: "just right" },
    { te: "tūru", en: "chair" },
    { te: "pakaru", en: "broken" },
    { te: "rūma moe", en: "bedroom" },
    { te: "moenga", en: "bed" },
    { te: "moe", en: "sleep" },
    { te: "hoki mai", en: "return" },
    { te: "tangi", en: "cry / shout" },
    { te: "mataku", en: "scared" },
    { te: "oma", en: "run" },
    { te: "kāinga", en: "home" }
  ];

  function buildVocabGrid(){
    const grid = document.getElementById('vocabGrid');
    grid.innerHTML = '';
    vocab.forEach((w, idx) => {
      const card = document.createElement('div');
      card.className = 'fc-card';
      card.tabIndex = 0;
      card.setAttribute('aria-pressed','false');

      const inner = document.createElement('div');
      inner.className = 'fc-inner';

      const front = document.createElement('div');
      front.className = 'fc-face fc-front';
      front.innerHTML = `<div style="font-size:1rem">${w.te}</div>`;

      const back = document.createElement('div');
      back.className = 'fc-face fc-back';
      back.innerHTML = `<div style="font-size:0.95rem">${w.en}</div>`;

      inner.appendChild(front);
      inner.appendChild(back);
      card.appendChild(inner);
      grid.appendChild(card);

      const toggle = ()=>{
        card.classList.toggle('flipped');
        const pressed = card.getAttribute('aria-pressed') === 'true';
        card.setAttribute('aria-pressed', String(!pressed));
      };
      card.addEventListener('click', toggle);
      card.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          toggle();
        }
      });
    });
  }

  bindBigCards();
  buildVocabGrid();

  document.addEventListener('keydown', (e)=>{
    if(e.key === 'ArrowRight') { if(!nextBtn.disabled) nextBtn.click(); }
    if(e.key === 'ArrowLeft')  { if(!prevBtn.disabled) prevBtn.click(); }
  });

</script>

</body>
</html>

<!doctype html>
<html lang="mi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>He Arawhata Reo — Grammar Progression (L1–L3)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#fbfbff; --card:#ffffff; --accent1:#ffb4c6; --accent2:#ffd8a8; --accent3:#c7f9cc;
      --pad:1rem; --radius:14px; --gap:1rem; --maxw:1100px;
      --purple:#7c3aed; --blue:#2563eb; --green:#16a34a; --orange:#fb923c; --gold:#f59e0b; --red:#ef4444;
    }
    *{box-sizing:border-box}
    html{font-family:Poppins,system-ui,-apple-system,"Segoe UI",Roboto,Arial; -webkit-font-smoothing:antialiased}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#f7fbff);display:flex;align-items:flex-start;justify-content:center;padding:clamp(12px,3vw,28px)}
    .app{width:100%;max-width:var(--maxw)}
    header{position:sticky;top:0;z-index:10;backdrop-filter:blur(6px);background:rgba(255,255,255,0.7);border-radius:12px;padding:.6rem .9rem;margin-bottom:.8rem;display:flex;align-items:center;gap:.6rem}
    header h1{font-size:clamp(1.1rem,2.2vw,1.5rem);margin:0}
    main{display:grid;gap:var(--gap)}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:var(--gap);justify-items:center}
    .card{background:var(--card);border-radius:var(--radius);padding:clamp(.9rem,2vw,1.2rem);box-shadow:0 6px 18px rgba(20,30,60,0.06);min-height:110px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;width:100%}
    .big-btn{appearance:none;border:0;cursor:pointer;padding:1rem 1.4rem;border-radius:12px;font-weight:700;font-size:clamp(.95rem,1.8vw,1.05rem);width:100%;max-width:320px;transition:transform 0.15s ease}
    .big-btn:hover{transform:scale(1.03)}
    .lvl1{background:linear-gradient(135deg,var(--accent1),#ffd1e8)}
    .lvl2{background:linear-gradient(135deg,var(--accent2),#fff2d0)}
    .lvl3{background:linear-gradient(135deg,var(--accent3),#d9f9e0)}
    .blue-btn{background:linear-gradient(135deg,#3b82f6,#60a5fa);color:white}
    .red-btn{background:linear-gradient(135deg,#ef4444,#f87171);color:white}
    .submenu{display:none;gap:var(--gap)}
    .submenu.active{display:block}
    .sticky-title{position:sticky;top:0;background:transparent;padding:.4rem 0;font-weight:700}
    .content{display:none;background:var(--card);padding:clamp(.8rem,2vw,1.2rem);border-radius:12px;box-shadow:0 10px 30px rgba(12,20,40,0.06)}
    .content.active{display:block}
    .content h2{margin-top:0;font-size:clamp(1.05rem,2vw,1.4rem)}
    .meta{margin-bottom:.6rem;color:#666;font-size:.95rem}
    .examples{display:grid;gap:.6rem}
    .btn-row{display:flex;gap:.6rem;flex-wrap:wrap;margin-top:1rem}
    .ghost{background:transparent;border:1px solid #d6dbe8;padding:.5rem .7rem;border-radius:10px;cursor:pointer}
    footer{margin-top:1rem;color:#666;font-size:.9rem;text-align:center}
    /* Two-button row */
    .two-btn-row{display:flex;justify-content:center;gap:1.5rem;width:100%;flex-wrap:wrap;margin-top:1rem}
    .two-btn-row .big-btn{max-width:420px;flex:1 1 300px}
    @media (max-width:420px){.card{min-height:92px}}
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <h1>He Arawhata Reo — Grammar Progression</h1>
      <div style="margin-left:auto;font-size:.9rem;color:#444">Responsive • NCEA L1–L3</div>
    </header>

    <main>
      <!-- MAIN MENU -->
      <section id="mainMenu">
        <div class="grid" style="justify-items:center;">
          <div class="card"><button class="big-btn lvl1" data-open="level1">NCEA Level 1</button></div>
          <div class="card"><button class="big-btn lvl2" data-open="level2">NCEA Level 2</button></div>
          <div class="card"><button class="big-btn lvl3" data-open="level3">NCEA Level 3</button></div>
        </div>
        <!-- NEW BUTTONS -->
        <div class="two-btn-row">
          <a href="https://www2.nzqa.govt.nz/assets/NCEA/Subject-pages/Te-Reo-Maori/Te-Reo-Maori-grammar-clarifications.pdf" target="_blank">
            <button class="big-btn blue-btn">Grammar Guide</button>
          </a>
          <a href="https://drive.google.com/file/d/1kG-tCbictVubTsPKS38ZMUnHbRpKvuPd/view" target="_blank">
            <button class="big-btn red-btn">Full Grammar Guide</button>
          </a>
        </div>
      </section>

      <!-- SUBMENUS -->
      <section id="level1" class="submenu">
        <div class="sticky-title">Level 1 — sentence structures</div>
        <div class="grid" id="level1Btns"></div>
        <div class="btn-row"><button class="ghost" data-back="mainMenu">Return to Main Menu</button></div>
      </section>

      <section id="level2" class="submenu">
        <div class="sticky-title">Level 2 — sentence structures</div>
        <div class="grid" id="level2Btns"></div>
        <div class="btn-row"><button class="ghost" data-back="mainMenu">Return to Main Menu</button></div>
      </section>

      <section id="level3" class="submenu">
        <div class="sticky-title">Level 3 — sentence structures</div>
        <div class="grid" id="level3Btns"></div>
        <div class="btn-row"><button class="ghost" data-back="mainMenu">Return to Main Menu</button></div>
      </section>
      
      <!-- CONTENT AREA -->
      <section id="contentArea" class="content" aria-live="polite">
        <h2 id="contentTitle">Title</h2>
        <div class="meta" id="contentMeta">Level • Category</div>
        <div class="examples" id="contentExamples"></div>
        <div class="btn-row">
          <button class="ghost" id="backToLevel">Return to NCEA Level</button>
          <button class="ghost" id="backToMain">Return to Main Menu</button>
        </div>
      </section>

    </main>
  </div>

  <script>
    /* COMPLETE DATA: Levels 1–3 with Teaching Tables + examples (sourced from PDF) */
    const data = {
      level1: {
        title: 'NCEA Level 1',
        categories: {
          'Rereingoa': {
            desc: 'Sentences that focus on the NAME of an object, person or other living thing (identity & naming).',
            table: {
              what: 'Identify or name people, objects, places. Focus on identity and labeling.',
              how: 'Ko + (name/noun) or He + noun + adjective; questions: Ko wai? He aha?',
              why: 'To state identity, ask who/what things are, correct assumptions.',
              withWhat: 'Ko, He, tēnei/tēnā/tērā, Kei te, wai, wai?; pūmua: a / o / taku / tō',
              ao: '1.2, 1.4 (Introduce self and others; communicate personal information).'
            },
            examples:[
              'Ko Hēmi tōku ingoa. — My name is Hēmi.',
              'Ko taku whaea tēnā. — That’s my mother.',
              'Ko te tumuaki tērā o te kura. — That’s the principal of the school.',
              'Ko wai tērā tamaiti? — Who is that child?',
              'Ko te aha tēnei rā? — What day is it today?',
              'He kuia ngākau māhaki ia. — She is a kind old woman.',
              'He kaiako a Tāmati. — Tāmati is a teacher.',
              'Ko te koroua nihoniho o te marae tērā. — That’s the grumpy old man of the marae.',
              'He koroua nihoniho a Hone. — Hone is a grumpy old man.',
              'Tērā pea ka haere atu mātou. — Maybe we’ll go.',
              'He aha te kupu Māori mō te car? — What is the Māori word for “car”?',
              'He pātai tāku ki a koe. — I have a question for you.',
              'Kāore e kore ka tae atu ia. — No doubt we will get there.',
              'Ehara au i a Hone. — I am not Hone.',
              'Ehara tēnā i taku whaea. — That’s not my mother.'
            ]
          },
          'Reremahi (Poro & Wheako)':{
            desc:'Action sentences: past/present/future, commands and habitual actions.',
            table:{
              what:'Describe actions done by an actor (events, routines, commands).',
              how:'I (past), Kei te / E...ana (present continuous), Ka / Kia (future/imperative), Me (should).',
              why:'To report events, give instructions, describe routines and experiences.',
              withWhat:'I, Kua, Ka, Kei te, E...ana, Me, imperatives (E ...!), Kāore + i (negative past).',
              ao:'3.1, 5.1 (Communicate past activities; habits and routines).'
            },
            examples:[
              'I te moe te whānau — The family slept.',
              'Kua oho a Tīmoti — Tīmoti has woken up.',
              'Me oma tātou — We should run.',
              'Ka tū te hui āpōpō — The meeting is tomorrow.',
              'Ka tū rātou, ka katakata — They stood and laughed.',
              'E oma! — Run!',
              'E tū! — Stand up!',
              'E moe! — Go to sleep!',
              'Kāore te whānau i te moe. — The family isn’t sleeping.',
              'Kāore anō a Tīmoti kia oho. — Tīmoti hasn’t woken up yet.',
              'Me kaua tātou e oma. — We shouldn’t run.',
              'He aha a Hone i pukuriri ai? — Why did Hone get angry?',
              'He hōhā nōna. — He was annoyed.'
            ]
          },
          'Rereāhua':{
            desc:'Statives: describe states, qualities, feelings and conditions.',
            table:{
              what:'Describe condition, qualities and emotions.',
              how:'He + adjective + (noun); Kei te + adjective; Kua + adjective; Kāore + ... + i te + adjective for negative.',
              why:'To communicate how things are or how people feel.',
              withWhat:'He, Kei te, Kua, Kāore; adjectives (pukuriri, harikoa, ātaahua, mākū, maroke).',
              ao:'2.5, 5.2 (Describe present/past states and feelings).'
            },
            examples:[
              'He ātaahua tēnei wāhi. — This place is beautiful.',
              'Kua maroke ngā kākahu. — The clothes are now dry.',
              'I wera rawa a roto o te akomanga. — It was too hot in the classroom.',
              'Kei te pēhea ngā mahi? Kei te pai. — How’s your work going? It’s good.',
              'He āhua reka ngā kai. — The food is kind of nice.',
              'Kua tino ātaahua te kāinga nei. — This house is now very beautiful.',
              'Kāore tēnei wāhi i te tino ātaahua. — This place isn’t very beautiful.'
            ]
          },
          'Rerewāhi (Place & Location)':{
            desc:'Location and place expressions.',
            table:{
              what:'Locate events, people, and objects in space.',
              how:'I/Kei + location; Questions use I hea?/Kei hea?; postpositional phrases for place.',
              why:'To tell where things are or where events happen.',
              withWhat:'konei/konā/korā, uta, tātahi, runga, raro; particles: i, ki, ki te.',
              ao:'1.5, 3.2 (Communicate about location and events).'
            },
            examples:[
              'I hea te hui? I Paraparaumu. — Where was the meeting? In Paraparaumu.',
              'Kei te kura te pō whakanui i a Matariki. — The Matariki night celebration is at school.'
            ]
          },
          'Rerekaimahi (Actor & Agency)':{
            desc:'Agent and instrument expressions (Nā / Mā / Nō).',
            table:{
              what:'Show who performed an action or who something is for.',
              how:'Nā (by/agent) + actor + i + verb; Mā (for) + person; Nō (belonging to).',
              why:'To attribute agency and ownership or responsibility.',
              withWhat:'Nā, Mā, Nō, Ehara nā... (negation), possessive particles (taku, tōku, ōku).',
              ao:'4.3, 5.3 (Communicate obligations and past habits).'
            },
            examples:[
              'Nā wai te keke i tunu? — Who cooked the cake?',
              'Nāku te keke i tunu. — I cooked the cake.',
              'Ehara nāku te keke i tunu. — I didn’t cook the cake.'
            ]
          },
          'Reretau (Numbers)':{
            desc:'Counting and expressions of quantity.',
            table:{
              what:'Indicate number, amount or quantity.',
              how:'Use kotahi, toko[rua], e + number + ngā + noun, tekau + ngā + noun, or numeric phrases.',
              why:'To count or quantify objects and people.',
              withWhat:'Kotahi, toko..., tekau, mano, rau; E hia? Kia hia?',
              ao:'2.4, 5.3 (Communicate amounts, numbers and time).'
            },
            examples:[
              'Kotahi mano, e rima rau, e whā tekau. — One thousand, five hundred and forty.',
              'E ono mano, e rua rau, tekau mā tahi. — Six thousand, two hundred and eleven.',
              'Tekau ngā manu i te pae. — There were ten birds on the perch.',
              'Tokowhā ngā tamariki i tae mai. — Four children arrived.'
            ]
          }
        }
      },

      level2: {
        title: 'NCEA Level 2',
        categories: {
          'Rereingoa (Possession & Relationships)': {
            desc: 'Names and possession (tā/tō, ā/ō, Ko ... te ... o ...).',
            table: {
              what: 'Express relationships, ownership and description by association.',
              how: 'He + noun + tā/tō or Ko te + noun + o + person; negative: Kāore ā/ō ...',
              why: 'To describe possessions, family relationships and attributes linked to people.',
              withWhat: 'tā/tō, ā/ō, He..., Ko te... o..., pūmuri/pūmua particles.',
              ao: '2.1, 2.2 (Communicate relationships and possessions).'
            },
            examples:[
              'He koti tō Hēnare. — Hēnare has a coat.',
              'He rorohiko tā Hine. — Hine has a computer.',
              'Kāore ō Hēnare koti. — Hēnare does not have a coat.',
              'Kāore ā Hine rorohiko. — Hine doesn’t have a computer.',
              'Pātai: He waka rānei tō tō whānau? — Does your family have a car?'
            ]
          },
          'Reremahi (Wheako / Intentions / Continuity)': {
            desc: 'Experience verbs and intentional/continuous actions.',
            table: {
              what: 'Describe experiences, feelings, ongoing activities and intentions.',
              how: 'I (past experiences) + verb + ki; E ... ana for continuous; Ka/Kua for future/completion; Me/Kia for requirements.',
              why: 'To narrate experiences and express reason, intention, or ongoing action.',
              withWhat: 'rongo/kite (experience verbs), E ... ana, I, Kua, Ki + infinitival phrases.',
              ao: '5.1, 6.4 (Communicate experiences and formal situations).'
            },
            examples:[
              'E whakamomori ana au ki te wā kāinga. — I yearn for home.',
              'Ka aroha au ki tōku kuia. — I love my grandmother.',
              'I rongo au i ērā kōrero. — I heard those comments.',
              'I kite au i ngā waka e tere ana i te moana. — I saw the canoes floating at sea.',
              'Kua mutu ngā mahi — The work has finished.'
            ]
          },
          'Rerehāngū (Passive & Instructional Passives)': {
            desc: 'Passive voice and instructive passives (kawea, paraihia, tukuna).',
            table: {
              what: 'Describe actions done to objects or people; show agent with e or nā.',
              how: 'Passive endings (−ia/−a) with agent phrase: e + actor; negative passive: Kāore i ... e ...',
              why: 'To emphasise the object or result rather than the actor.',
              withWhat: 'I + passive verb + e actor; Ka + passive; Kāore i te + passive for negation.',
              ao: '5.1, 6.1 (Communicate passive voice and instructions).'
            },
            examples:[
              'I te kawea ngā pēke e Hone. — The bags were carried by Hone.',
              'Kua paraihia e Tīmoti ngā hēki. — Tīmoti has fried the eggs.',
              'Ka tukuna e Tame ngā tamariki ki te kura. — Tame will drop off the children to school.',
              'Kāore i te kawea ngā pēke e Hone. — The bags aren’t being carried by Hone.'
            ]
          },
          'Rereāhua (Statives & Resultatives)': {
            desc: 'Stative verbs, result states and postposed particles (ake, iho).',
            table: {
              what: 'Describe results, feelings, and gradual changes in state.',
              how: 'Use stative verbs (wareware, maringi, mate) and pūmuri particles (ake, iho, haere).',
              why: 'To show how conditions changed or to compare states.',
              withWhat: 'Kua + stative, Kei te + stative + haere, postposed particles: ake/atu/īho.',
              ao: '5.2, 5.4 (Describe emotions, compare and contrast).'
            },
            examples:[
              'I mahue au i te pahi. — I was left behind by the bus.',
              'I oti i ngā ākonga ngā mahi. — The work was completed by the students.',
              'I wareware i a au aku mahi i te kāinga. — I forgot my work at home.',
              'Kua pau haere ngā kai. — The food is being consumed.'
            ]
          },
          'Rerewā (Time Expressions & Fronting)': {
            desc: 'Fronted time phrases and scheduled/conditional time clauses.',
            table: {
              what: 'Place events in time or create fronted temporal clauses.',
              how: 'Ē.g. Ā te..., Hei te..., I a ... e ... ana, Nō ... e ... ana.',
              why: 'To emphasise timing, arrange narrative sequence and highlight conditions.',
              withWhat: 'Ā te/Hei te/Mō te, I a... e ... ana, Nō + noun + e ... ana.',
              ao: '7.1, 7.5 (Plan future events and recount past events).'
            },
            examples:[
              'Ā te Mane, ka tīmata te kura. — On Monday, school starts.',
              'Hei te Hatarei, ka pāti tātou. — On Saturday, we will party.',
              'Mō te wiki, ka kōrerotia te reo Māori. — For the week, te reo Māori will be spoken.',
              'I a Pita e hīkoi ana ka hinga ia. — When Pita was walking he fell.'
            ]
          },
          'Rerepānga (Possession & Benefactive)': {
            desc: 'Nā / Nō / Mō / Mā forms; who something is for and origin.',
            table: {
              what: 'Express origin, possession and beneficiary relationships.',
              how: 'Use Nā (agent/possession), Nō (origin/possession), Mō/Mā (for/benefactive).',
              why: 'To mark relationships of possession, origin and intended recipient.',
              withWhat: 'Nā, Nō, Mō, Mā, Ehara nā/nō for negation.',
              ao: '7.2, 7.4 (Offer/respond to advice and give ownership).'
            },
            examples:[
              'Nā Hine te īmēra. — The email belongs to Hine.',
              'Nō wai te waka rā? — Whose car is that?',
              'Mō Tāmati te koti. — The coat is for Tāmati.',
              'Mā wai ēnei kai? — Who are these foods for?'
            ]
          },
          'Ngā Nuka Reo (Idioms & Literary Devices)': {
            desc: 'Kīwaha, whakataukī, kupu whakarite and figurative language for L2.',
            table: {
              what: 'Common idioms, proverbs and similes used to enrich language.',
              how: 'Kīwaha (fixed phrases), whakataukī (proverbs), kupu whakarite (metaphors and similes).',
              why: 'To build cultural/idiomatic competence and style in speech and writing.',
              withWhat: 'Examples: Ka pai, Ka rawe, Ehara taku toa..., Ānō nei, He ... pērā ...',
              ao: '5.4, 7.3 (Use idioms and rhetorical devices to express opinion).'
            },
            examples:[
              'Ka pai — Neat',
              'Ka rawe — Excellent',
              'Kia kaha — Be strong!',
              'Ehara taku toa i te toa takitahi... — My success is not just my own.',
              'He manu tīoriori — a beautiful singer (metaphor).'
            ]
          }
        }
      },

      level3: {
        title: 'NCEA Level 3',
        categories: {
          'Rerehāngū (Advanced Passive & Potential)': {
            desc: 'Pseudo-passive, potential and causative passive forms (taea, he mea ... e ...).',
            table: {
              what: 'Advanced passive forms, potentials (ability) and pseudo-passives used in formal texts.',
              how: 'He mea + verb + e + agent; Ka taea e ... te ... for ability; negative: Kāore e taea e ...',
              why: 'To shift focus, show potential/ability and for formal/written constructions.',
              withWhat: 'He mea..., Ka taea e..., I/Ka/Kua/E...ana/Me; negation patterns for potential.',
              ao: '7.1, 7.5 (Formal discourse, advanced grammar).'
            },
            examples:[
              'He mea kōhete ia e te tumuaki. — He was scolded by the principal.',
              'Ka taea e rātou te whare te hanga. — They can build the house.',
              'I taea e rātou ā rātou kai te tunu. — They were able to cook their food.',
              'E riro ai i a koe te tūranga, me taea e koe te kōrero Māori. — To get the job, you must be able to speak Māori.',
              'Kāore e taea e rātou te whare te hanga. — They can’t build the house.'
            ]
          },
          'Rereāhua (Comparatives & Complex Statives)': {
            desc: 'Comparisons, complex statives with postposed particles and result states.',
            table: {
              what: 'Comparatives, resultative forms and complex adjectives/statives.',
              how: 'He + adjective + ake/atu + i ...; Kua + adjective + ake/atu; postposed particles (ake, iho, haere).',
              why: 'To compare, grade and show results or change in condition.',
              withWhat: 'ake/atu/iho, kua + adjective + ake/atu, comparatives: He ... ake/atu i ...',
              ao: '5.4, 7.3 (Describe, compare and contrast at higher complexity).'
            },
            examples:[
              'I wera ake tēnei raumati i tērā raumati. — This summer was hotter than last summer.',
              'Kua iti iho te utu o ngā kai. — The price of food had decreased.',
              'He pai ake tēnei kaupapa i tērā atu. — This topic is better than the other.'
            ]
          },
          'Rerepānga (Complex Relations & Cause/Benefit)': {
            desc: 'Cause/benefit lines, nominal relations and complex possession.',
            table: {
              what: 'Show causal links, beneficiaries and nuanced possession/relations.',
              how: 'Nō/Nā/Mō + nouns, Nā te mea + cause; passive/causal connectors.',
              why: 'To explain reasons, attribution, and who benefits from actions.',
              withWhat: 'Nā te mea, Nā, Nō, Mō, Mōku nei (in my opinion), e ai ki (according to).',
              ao: '7.2, 7.4 (Give reasons and show relationships in argument).'
            },
            examples:[
              'Nā Hine te īmēra. — The email was by Hine.',
              'Mō taku whānau tēnei koha. — This gift is for my family.',
              'Nā te ua i whakaroa te haerenga. — The rain delayed the journey.',
              'Mō te ngākau atawhai i whakawhiwhia ai ia ki te tohu. — She received the award for kindness.'
            ]
          },
          'Rerewā (Conditional & Temporal Clauses)': {
            desc: 'Complex time/conditional clauses, advanced fronting and temporal connectors.',
            table: {
              what: 'Complex temporal clauses and conditional sequences for argument and narrative.',
              how: 'I te + noun, ā te/ hei te + noun; I a ... e ... ana; conditional conjunctions and subordinators.',
              why: 'To structure longer narratives, instructions, or formal writing.',
              withWhat: 'I a... e ... ana, Ā te..., Hei te..., Nāwai nāwai, I muri mai.',
              ao: '7.1, 7.5 (Narrative sequencing and future planning).'
            },
            examples:[
              'I te taenga mai o te kaiwawao, ka tīmata te kēmu. — When the referee arrived, the game started.',
              'Kia oti te mahi, ka hoki mātou ki te kāinga. — When the work is completed, we will return home.',
              'Ka tae atu ana ia, ka tukuna ngā kaitaunaki. — When he arrives, the supporters will be sent.'
            ]
          },
          'Ngā Nuka Reo (High-level literary devices)': {
            desc: 'Rhetorical and figurative devices used in speeches and advanced writing.',
            table: {
              what: 'Higher-level metaphors, personification, whakataukī and rhetorical idioms.',
              how: 'Use extended metaphor, juxtaposition, rhetorical questions, repetition for effect.',
              why: 'To enrich oratory, essays and formal texts with cultural resonance and persuasive power.',
              withWhat: 'Whakatangata, Kupu whakarite, Whakataukī, Kīwaha and rhetorical devices.',
              ao: '7.3, 7.5 (Express/respond to approval and disapproval; advanced discourse).'
            },
            examples:[
              'Ānō nei he tōtara haemata — Like a lofty tōtara (metaphor for strength).',
              'He manawa tītī — A person of great endurance.',
              'Whaia te iti kahurangi — Pursue the treasured goal (seek excellence).',
              'Mā te huruhuru ka rere te manu — Adornment enables success.'
            ]
          },
          'Rerewhakamārama (Connectives & Explanatory Forms)': {
            desc: 'Conjunctions and connective phrases used for explanation and argument.',
            table: {
              what: 'Link clauses, give reasons and present contrasts or results.',
              how: 'Use Nā te mea, I te mea, Ahakoa, Nō reira, Inā hoki and similar connectives.',
              why: 'To structure explanations, show cause/effect and to argue a point coherently.',
              withWhat: 'Nā te mea, I te mea, Ahakoa, Nō reira, Me/Ka/Hei for consequence.',
              ao: '7.2, 7.4 (Explain reasons and connect ideas in discourse).'
            },
            examples:[
              'Nō te mea i te ua, kāore mātou i haere ki waho. — Because it rained, we didn’t go outside.',
              'Ahakoa te makariri, i haere tonu rātou. — Despite the cold, they kept going.',
              'Nō reira, me ako tātou i te reo Māori. — Therefore, we must learn Māori.'
            ]
          }
        }
      }
    };

    /* UI Rendering Helpers */
    function makeButtons(levelKey, container){
      const lvl = data[levelKey];
      container.innerHTML = '';
      if(!lvl || !lvl.categories) return;
      for(const cat of Object.keys(lvl.categories)){
        const d = lvl.categories[cat];
        const card = document.createElement('div'); card.className='card';
        const btn = document.createElement('button'); btn.className='big-btn'; btn.textContent = cat; btn.dataset.cat = cat; btn.dataset.level = levelKey;
        // style level-specific
        btn.classList.add(levelKey === 'level1' ? 'lvl1' : levelKey === 'level2' ? 'lvl2' : 'lvl3');
        btn.addEventListener('click', ()=> openContent(levelKey,cat));
        card.appendChild(btn);
        const p = document.createElement('p'); p.style.marginTop='.6rem'; p.style.fontSize='.9rem'; p.style.color='#555'; p.textContent = d.desc || '';
        card.appendChild(p);
        container.appendChild(card);
      }
    }

    makeButtons('level1',document.getElementById('level1Btns'));
    makeButtons('level2',document.getElementById('level2Btns'));
    makeButtons('level3',document.getElementById('level3Btns'));

    // open submenus from main
    document.querySelectorAll('[data-open]').forEach(btn=>btn.addEventListener('click',()=>{
      const id = btn.dataset.open;
      document.getElementById('mainMenu').style.display='none';
      document.querySelectorAll('.submenu').forEach(s=>s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.getElementById('backToLevel').dataset.level = id;
      document.getElementById('contentArea').classList.remove('active');
      window.scrollTo({top:0,behavior:'smooth'});
    }));

    document.querySelectorAll('[data-back]').forEach(b=>b.addEventListener('click',()=>{
      document.querySelectorAll('.submenu').forEach(s=>s.classList.remove('active'));
      document.getElementById('mainMenu').style.display='grid';
      document.getElementById('contentArea').classList.remove('active');
    }));

    // --- openContent (renders Teaching Notes table + examples) ---
    function openContent(levelKey,cat){
      const item = data[levelKey] && data[levelKey].categories ? data[levelKey].categories[cat] : null;
      document.getElementById('contentTitle').textContent = cat || 'Content';
      document.getElementById('contentMeta').textContent = `${(data[levelKey] && data[levelKey].title) ? data[levelKey].title : levelKey} — ${cat}`;

      const examples = document.getElementById('contentExamples');
      examples.innerHTML = '';

      if(item){
        // Teaching notes (table) if present
        if(item.table){
          const tbl = document.createElement('div');
          tbl.className = 'teach-table';
          tbl.innerHTML = `
            <details open>
              <summary>📘 Teaching Notes</summary>
              <div class="tbl">
                <div><strong>🟣 What:</strong> ${item.table.what || ''}</div>
                <div><strong>🔵 How:</strong> ${item.table.how || ''}</div>
                <div><strong>🟢 Why:</strong> ${item.table.why || ''}</div>
                <div><strong>🟠 With what:</strong> ${item.table.withWhat || ''}</div>
                <div><strong>🟡 AO:</strong> ${item.table.ao || ''}</div>
              </div>
            </details>
          `;
          examples.appendChild(tbl);
        }

        // description / intro
        if(item.desc){
          const intro = document.createElement('p');
          intro.style.fontWeight = '600';
          intro.style.margin = '0 0 .6rem 0';
          intro.textContent = item.desc;
          examples.appendChild(intro);
        }

        // Group examples by type if simple markers exist (e.g., include '—' with translation)
        if(Array.isArray(item.examples) && item.examples.length){
          item.examples.forEach(ex=>{
            const det = document.createElement('details');
            const sum = document.createElement('summary');
            // show the Māori clause as summary (before ' — ' if present)
            sum.textContent = ex.split(' — ')[0];
            const p = document.createElement('div');
            p.style.padding = '.6rem 0';
            p.textContent = ex;
            det.appendChild(sum);
            det.appendChild(p);
            examples.appendChild(det);
          });
        } else {
          const p = document.createElement('p'); p.textContent = 'No examples available for this category yet.'; examples.appendChild(p);
        }
      } else {
        const p = document.createElement('p'); p.textContent = 'This category has not been filled yet.'; examples.appendChild(p);
      }

      // Show content area and hide other menus
      document.getElementById('contentArea').classList.add('active');
      document.querySelectorAll('.submenu').forEach(s=>s.classList.remove('active'));

      // remember which level we're in for the "Return to NCEA Level" button
      document.getElementById('backToLevel').dataset.level = levelKey;

      // scroll smoothly to the top of the content area
      document.getElementById('contentArea').scrollIntoView({behavior:'smooth'});
    }

    // Ensure any buttons that opened categories call our openContent function
    // (This protects against earlier elements that might have been created before this script section)
    document.querySelectorAll('.big-btn').forEach(btn=>{
      if(btn.dataset.level && btn.dataset.cat){
        btn.addEventListener('click', ()=> openContent(btn.dataset.level, btn.dataset.cat));
      }
    });

    // Back to level button
    document.getElementById('backToLevel').addEventListener('click',()=>{
      const lvl = document.getElementById('backToLevel').dataset.level || 'level1';
      document.querySelectorAll('.submenu').forEach(s=>s.classList.remove('active'));
      const el = document.getElementById(lvl);
      if(el) el.classList.add('active');
      document.getElementById('contentArea').classList.remove('active');
    });

    // Back to main menu button
    document.getElementById('backToMain').addEventListener('click',()=>{
      document.querySelectorAll('.submenu').forEach(s=>s.classList.remove('active'));
      document.getElementById('mainMenu').style.display='grid';
      document.getElementById('contentArea').classList.remove('active');
    });

    // Accessibility: Escape closes content and returns to main menu
    document.addEventListener('keydown',(e)=>{
      if(e.key === 'Escape'){
        document.querySelectorAll('.submenu').forEach(s=>s.classList.remove('active'));
        document.getElementById('mainMenu').style.display='grid';
        document.getElementById('contentArea').classList.remove('active');
      }
    });

    // Small helper: make sure submenus are accessible via keyboard (enter on focused buttons)
    document.addEventListener('keyup',(e)=>{
      if(e.key === 'Enter' && document.activeElement && document.activeElement.classList.contains('big-btn')){
        const btn = document.activeElement;
        if(btn.dataset.level && btn.dataset.cat){
          openContent(btn.dataset.level, btn.dataset.cat);
        } else if(btn.dataset.open){
          // open submenu
          const id = btn.dataset.open;
          document.getElementById('mainMenu').style.display='none';
          document.querySelectorAll('.submenu').forEach(s=>s.classList.remove('active'));
          const el = document.getElementById(id);
          if(el) el.classList.add('active');
          document.getElementById('backToLevel').dataset.level = id;
        }
      }
    });

  </script>
</body>
</html>
<!doctype html>
<html lang="mi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NCEA Te Reo Sentence Builder</title>
  <style>
    body {
      margin: 0;
      font-family: 'Nunito', sans-serif;
      background: #f5f5f5;
      color: #333;
      padding: 16px;
      min-height: 100vh;
      box-sizing: border-box;
    }
    header {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    h1 {
      margin: 0;
      font-size: 1.5rem;
    }
    .controls {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 20px;
    }
    .levels, .categories {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    button {
      border: 0;
      padding: 8px 12px;
      border-radius: 999px;
      cursor: pointer;
      font-weight: 600;
      background: #e0e0e0;
      transition: background 0.2s;
    }
    button[aria-pressed="true"] {
      background: #4CAF50;
      color: white;
    }
    button:hover {
      background: #d0d0d0;
    }
    button[aria-pressed="true"]:hover {
      background: #45a049;
    }
    #new-set {
      background: #2196F3;
      color: white;
    }
    #new-set:hover {
      background: #1976D3;
    }
    .activity {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .sentence {
      background: #fff;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transition: background 0.3s;
    }
    .sentence.correct {
      background: #e6ffe6; /* Light Green for correct */
    }
    .english {
      font-size: 1.1rem;
      margin-bottom: 12px;
      font-weight: 600;
    }
    .word-bank, .answer-area {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      min-height: 40px;
      padding: 8px;
      border: 2px dashed #ccc;
      border-radius: 8px;
    }
    .answer-area {
      background: #f9f9f9;
      min-height: 60px;
    }
    .word {
      padding: 8px 12px;
      background: #e0e0e0;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .word:hover {
      background: #d0d0d0;
    }
    .word.selected {
      background: #4CAF50;
      color: white;
    }
    .word.disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .banner {
      display: none;
      padding: 14px;
      border-radius: 12px;
      margin-top: 14px;
      text-align: center;
      background: linear-gradient(90deg, #ECFDF5, #EEF2FF);
      font-weight: 600;
    }
    .banner.show {
      display: block;
    }
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }
    @media (max-width: 600px) {
      h1 {
        font-size: 1.2rem;
      }
      button {
        padding: 6px 10px;
        font-size: 0.9rem;
      }
      .sentence {
        padding: 12px;
      }
      .english {
        font-size: 1rem;
      }
      .word {
        padding: 6px 10px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>NCEA Te Reo — Sentence Builder</h1>
  </header>

  <div class="controls">
    <div class="levels">
      <button data-level="all" aria-pressed="true">All Levels</button>
      <button data-level="1">Level 1</button>
      <button data-level="2">Level 2</button>
      <button data-level="3">Level 3</button>
    </div>
    <div class="categories">
      <button data-category="all" aria-pressed="true">All Categories</button>
      <!-- Dynamically populated -->
    </div>
    <button id="new-set">New Sentences</button>
  </div>

  <section aria-labelledby="activity-title">
    <h2 id="activity-title" class="sr-only">Sentence Building Activity</h2>
    <div id="activity" class="activity" aria-live="polite"></div>
    <div id="banner" class="banner">Kia ora — pai rawa! All sentences correct.</div>
  </section>

  <script>
    const sentences = [
      {level:1, category:'Rereingoa', te:'Ko Hēmi tōku ingoa.', en:'My name is Hēmi.'},
      {level:1, category:'Rereingoa', te:'Ko taku whaea tēnā.', en:'That’s my mother.'},
      {level:1, category:'Rereingoa', te:'Ko te tumuaki tērā o te kura.', en:'That’s the principal of the school.'},
      {level:1, category:'Rereingoa', te:'Ko wai tērā tamaiti?', en:'Who is that child?'},
      {level:1, category:'Rereingoa', te:'Ko te aha tēnei rā?', en:'What day is it today?'},
      {level:1, category:'Rereingoa', te:'He kuia ngākau māhaki ia.', en:'She is a kind old woman.'},
      {level:1, category:'Rereingoa', te:'He kaiako a Tāmati.', en:'Tāmati is a teacher.'},
      {level:1, category:'Rereingoa', te:'Ko te koroua nihoniho o te marae tērā.', en:'That’s the grumpy old man of the marae.'},
      {level:1, category:'Rereingoa', te:'He koroua nihoniho a Hone.', en:'Hone is a grumpy old man.'},
      {level:1, category:'Rereingoa', te:'Ehara au i a Hone.', en:'I am not Hone.'},
      {level:1, category:'Rereingoa', te:'Ehara tēnā i taku whaea.', en:'That’s not my mother.'},
      {level:1, category:'Rereingoa', te:'Ehara tērā i te tumuaki o te kura.', en:'That’s not the principal of the school.'},
      {level:1, category:'Rereingoa', te:'Ehara tērā i te koroua nihoniho o te marae.', en:'That’s not the grumpy old man of the marae.'},
      {level:1, category:'Rereingoa', te:'Ehara a Hone i te koroua nihoniho.', en:'Hone isn’t a grumpy old man.'},
      {level:1, category:'Rereingoa', te:'Ko Mere te kaiako.', en:'Mere is the teacher.'},
      {level:1, category:'Rereingoa', te:'Ko Hēmi te tama.', en:'Hēmi is the boy.'},
      {level:1, category:'Rereingoa', te:'Ko Pita rāua ko Mere ngā kaiako.', en:'Pita and Mere are the teachers.'},
      {level:1, category:'Rereingoa', te:'Ko au tēnei.', en:'This is me.'},
      {level:1, category:'Rereingoa', te:'He kaiako ahau.', en:'I am a teacher.'},
      {level:1, category:'Rereingoa', te:'He aha tēnei?', en:'What is this?'},
      {level:1, category:'Rereingoa', te:'He pene tēnei.', en:'This is a pen.'},
      {level:1, category:'Rereingoa', te:'He aha tō ingoa?', en:'What is your name?'},
      {level:1, category:'Rereingoa', te:'Ko Mere tōku ingoa.', en:'My name is Mere.'},
      {level:1, category:'Rereingoa', te:'Nō Tāmaki Makaurau ahau.', en:'I am from Auckland.'},
      {level:1, category:'Rereingoa', te:'He aha tēnā?', en:'What is that?'},
      {level:1, category:'Rereingoa', te:'He ngeru tēnā.', en:'That is a cat.'},
      {level:1, category:'Rereingoa', te:'He aha tērā?', en:'What is that over there?'},
      {level:1, category:'Rereingoa', te:'He whare tērā.', en:'That over there is a house.'},
      {level:1, category:'Rereingoa', te:'Ko wai tō hoa?', en:'Who is your friend?'},
      {level:1, category:'Rereingoa', te:'Ko Hēmi tōku hoa.', en:'Hēmi is my friend.'},
      {level:1, category:'Reremahi', te:'I te moe te whānau.', en:'The family slept.'},
      {level:1, category:'Reremahi', te:'Kua oho a Tīmoti.', en:'Tīmoti has woken up.'},
      {level:1, category:'Reremahi', te:'Me oma tātou.', en:'We should run.'},
      {level:1, category:'Reremahi', te:'Ka tū te hui āpōpō.', en:'The meeting is tomorrow.'},
      {level:1, category:'Reremahi', te:'Ka tū rātou, ka katakata.', en:'They stood and laughed.'},
      {level:1, category:'Reremahi', te:'E oma!', en:'Run!'},
      {level:1, category:'Reremahi', te:'E tū!', en:'Stand up!'},
      {level:1, category:'Reremahi', te:'E moe!', en:'Go to sleep!'},
      {level:1, category:'Reremahi', te:'Kāore te whānau i te moe.', en:'The family isn’t sleeping.'},
      {level:1, category:'Reremahi', te:'Kāore anō a Tīmoti kia oho.', en:'Tīmoti hasn’t woken up yet.'},
      {level:1, category:'Reremahi', te:'Me kaua tātou e oma.', en:'We shouldn’t run.'},
      {level:1, category:'Reremahi', te:'Kāore te hui e tū āpōpō.', en:'The meeting won’t be tomorrow.'},
      {level:1, category:'Reremahi', te:'Kaua e oma.', en:'Don’t run.'},
      {level:1, category:'Reremahi', te:'He aha a Hone i pukuriri ai?', en:'Why did Hone get angry?'},
      {level:1, category:'Reremahi', te:'He hōhā nōna.', en:'He was annoyed.'},
      {level:1, category:'Reremahi', te:'He aha koe i kore ai e haere?', en:'Why didn’t you go?'},
      {level:1, category:'Reremahi', te:'Kāore ahau i pīrangi ki te haere.', en:'Because I didn’t want to go.'},
      {level:1, category:'Reremahi', te:'Nā te mea i te hōhā ia.', en:'Because he was annoyed.'},
      {level:1, category:'Reremahi', te:'Me whakapaipai koe i te whare.', en:'You should tidy the house.'},
      {level:1, category:'Reremahi', te:'E ako ana au i te reo Māori.', en:'I am learning te reo Māori.'},
      {level:1, category:'Reremahi', te:'Kia tuhi au i ngā kōrero.', en:'I’ll write the words.'},
      {level:1, category:'Reremahi', te:'Me whakamārama koe i ngā tohutohu.', en:'You should explain the instructions.'},
      {level:1, category:'Reremahi', te:'E haere ana rāua ki te tāone.', en:'They are both going to town.'},
      {level:1, category:'Reremahi', te:'E hoki mai ana rāua i te tāone.', en:'They are both returning from town.'},
      {level:1, category:'Reremahi', te:'Tunu kai.', en:'To cook food.'},
      {level:1, category:'Reremahi', te:'Tuhi kōrero.', en:'To write words.'},
      {level:1, category:'Reremahi', te:'Pānui pukapuka.', en:'To read books.'},
      {level:1, category:'Reremahi', te:'Tuku karere.', en:'To send messages.'},
      {level:1, category:'Reremahi', te:'Kei te oma te kuri.', en:'The dog is running.'},
      {level:1, category:'Reremahi', te:'Kei te noho a Pita.', en:'Pita is sitting.'},
      {level:1, category:'Reremahi', te:'I haere au ki te toa.', en:'I went to the shop.'},
      {level:1, category:'Reremahi', te:'I oma te tamaiti.', en:'The child ran.'},
      {level:1, category:'Reremahi', te:'Ka kai mātou.', en:'We will eat.'},
      {level:1, category:'Reremahi', te:'Ka haere ia ki te kura.', en:'He/she will go to school.'},
      {level:1, category:'Reremahi', te:'Ka waiata rātou.', en:'They will sing.'},
      {level:1, category:'Reremahi', te:'Kua tae mai te manuhiri.', en:'The visitor has arrived.'},
      {level:1, category:'Reremahi', te:'Kua kai ngā tamariki.', en:'The children have eaten.'},
      {level:1, category:'Reremahi', te:'E kai ana au.', en:'I am eating.'},
      {level:1, category:'Reremahi', te:'E kōrero ana rātou.', en:'They are talking.'},
      {level:1, category:'Reremahi', te:'E oma ana te kuri.', en:'The dog is running.'},
      {level:1, category:'Reremahi', te:'Me haere tātou.', en:'We should go.'},
      {level:1, category:'Reremahi', te:'Me kai koe.', en:'You should eat.'},
      {level:1, category:'Reremahi', te:'Aua atu ki reira.', en:'Go away from there.'},
      {level:1, category:'Reremahi', te:'Haere mai ki konei.', en:'Come here.'},
      {level:1, category:'Reremahi', te:'Tēnā koe.', en:'Greetings to you.'},
      {level:1, category:'Reremahi', te:'Tēnā kōrua.', en:'Greetings to you two.'},
      {level:1, category:'Reremahi', te:'Tēnā koutou.', en:'Greetings to you (plural).'},
      {level:1, category:'Reremahi', te:'Haere rā.', en:'Goodbye (to someone leaving).'},
      {level:1, category:'Reremahi', te:'E noho rā.', en:'Goodbye (to someone staying).'},
      {level:1, category:'Reremahi', te:'Āe.', en:'Yes.'},
      {level:1, category:'Reremahi', te:'Kāo.', en:'No.'},
      {level:1, category:'Rerehāngū', te:'Horoia ngā rīhi.', en:'Wash the dishes.'},
      {level:1, category:'Rerehāngū', te:'Tahitahia te papa.', en:'Sweep the floor.'},
      {level:1, category:'Rerehāngū', te:'Tapahia ngā rīwai ki te māripi.', en:'Cut the potatoes with the knife.'},
      {level:1, category:'Rereāhua', te:'He ātaahua tēnei wāhi.', en:'This place is beautiful.'},
      {level:1, category:'Rereāhua', te:'Kua maroke ngā kākahu.', en:'The clothes are now dry.'},
      {level:1, category:'Rereāhua', te:'I wera rawa a roto o te akomanga.', en:'It was too hot in the classroom.'},
      {level:1, category:'Rereāhua', te:'Kei te pēhea ngā mahi? Kei te pai.', en:'How’s your work going? It’s good.'},
      {level:1, category:'Rereāhua', te:'He āhua reka ngā kai.', en:'The food is kind of nice.'},
      {level:1, category:'Rereāhua', te:'Kua tino ātaahua te kāinga nei.', en:'This house is now very beautiful.'},
      {level:1, category:'Rereāhua', te:'Kāore tēnei wāhi i te tino ātaahua.', en:'This place isn’t very beautiful.'},
      {level:1, category:'Rereāhua', te:'Kāore e pai ana ngā mahi.', en:'The work isn’t good.'},
      {level:1, category:'Rereāhua', te:'He pai te rangi.', en:'The day is fine.'},
      {level:1, category:'Rereāhua', te:'Kei te pai au.', en:'I am fine.'},
      {level:1, category:'Rereāhua', te:'He tino pai tēnei rā.', en:'This day is very good.'},
      {level:1, category:'Rereāhua', te:'Kei te pēhea koe?', en:'How are you?'},
      {level:1, category:'Rereāhua', te:'Kei te ora au.', en:'I am well.'},
      {level:1, category:'Rerewāhi', te:'I hea te hui? I Paraparaumu.', en:'Where was the meeting? In Paraparaumu.'},
      {level:1, category:'Rerewāhi', te:'Kei te kura te pō whakanui i a Matariki.', en:'The Matariki night celebration is at school.'},
      {level:1, category:'Rerewāhi', te:'Kāore te hui i Paraparaumu.', en:'The meeting isn’t in Paraparaumu.'},
      {level:1, category:'Rerewāhi', te:'Kāore te pō whakanui i a Matariki i te kura.', en:'The Matariki night celebration isn’t at school.'},
      {level:1, category:'Rerewāhi', te:'Kei te kura ia.', en:'He/she is at school.'},
      {level:1, category:'Rerewāhi', te:'Nō hea koe?', en:'Where are you from?'},
      {level:1, category:'Rerekaimahi', te:'Nā wai te keke i tunu?', en:'Who cooked the cake?'},
      {level:1, category:'Rerekaimahi', te:'Māku te tīma e whakaako.', en:'I’ll teach the team.'},
      {level:1, category:'Rerekaimahi', te:'Ehara nāku te keke i tunu.', en:'I didn’t cook the cake.'},
      {level:1, category:'Rerekaimahi', te:'Ehara māku te tīma e whakaako.', en:'I didn’t teach the team.'},
      {level:1, category:'Rerekaimahi', te:'Kaua māku te tīma e whakaako.', en:'Don’t leave it for me to teach the team.'},
      {level:1, category:'Rerewā', te:'I te taenga mai o te kaiwawao, ka tīmata te kēmu.', en:'When the referee arrived, the game started.'},
      {level:1, category:'Rerewā', te:'Nō te Wenerei, ka tū te whakataetae ki Whitinga.', en:'On Wednesday, the competition was held at Whitianga.'},
      {level:1, category:'Rerewā', te:'Kia oti te mahi, ka hoki mātou ki te kāinga.', en:'When the work is completed, we will return home.'},
      {level:1, category:'Rerewā', te:'Hiki ana te hui, hokihoki ana ngā tāngata ki te kāinga.', en:'When the meeting finished, people returned home.'},
      {level:1, category:'Rerewā', te:'Ka tae atu ana te ope ka pōwhiritia.', en:'When the group arrived they were welcomed.'},
      {level:1, category:'Reretau', te:'Kotahi mano, e rima rau, e whā tekau.', en:'One thousand, five hundred and forty.'},
      {level:1, category:'Reretau', te:'E ono mano, e rua rau, tekau mā tahi.', en:'Six thousand, two hundred and eleven.'},
      {level:1, category:'Reretau', te:'Tekau ngā manu i te pae.', en:'There were ten birds on the perch.'},
      {level:1, category:'Reretau', te:'Tokowhā ngā tamariki i tae mai.', en:'Four children arrived.'},
      {level:1, category:'Reretau', te:'I waru ngā pene i hokona e au.', en:'I bought four pens.'},
      {level:1, category:'Reretau', te:'Ka whitu katoa ngā pukapuka.', en:'Seven books in total.'},
      {level:1, category:'Reretau', te:'Kua rima ngā kaitākaro ināianei.', en:'We now have five players.'},
      {level:1, category:'Reretau', te:'Kia hia ngā huka i tō tī?', en:'How much sugar is needed in your tea?'},
      {level:2, category:'Rereingoa', te:'Ko Mere rāua ko Pita ngā kaiako o te kura.', en:'Mere and Pita are the teachers of the school.'},
      {level:2, category:'Rereingoa', te:'Ko wai te kaiako o tō kura?', en:'Who is the teacher of your school?'},
      {level:2, category:'Rereingoa', te:'Ko te kaiako o te reo Māori a Hēmi.', en:'Hēmi is the Māori-language teacher.'},
      {level:2, category:'Rereingoa', te:'He kaiako pai ia.', en:'He/she is a good teacher.'},
      {level:2, category:'Reremahi', te:'I haere mātou ki te kura.', en:'We went to school.'},
      {level:2, category:'Reremahi', te:'Ka kai ngā tamariki i te tina.', en:'The children will eat lunch.'},
      {level:2, category:'Reremahi', te:'E kōrero ana rātou i te akomanga.', en:'They are talking in the classroom.'},
      {level:2, category:'Reremahi', te:'Me haere au ki te toa.', en:'I should go to the shop.'},
      {level:2, category:'Reremahi', te:'Kaua e kōrero i te akomanga.', en:'Don’t talk in the classroom.'},
      {level:2, category:'Reremahi', te:'He pai ki a au te waiata.', en:'I like singing.'},
      {level:2, category:'Reremahi', te:'He kino ki a ia te ngaru.', en:'He/she dislikes the waves.'},
      {level:2, category:'Reremahi', te:'He aha te mahi a te kaiako?', en:'What is the teacher’s job?'},
      {level:2, category:'Reremahi', te:'He ako i ngā tamariki.', en:'To teach the children.'},
      {level:2, category:'Reremahi', te:'Kei te moe ngā tamariki.', en:'The children are sleeping.'},
      {level:2, category:'Reremahi', te:'Kei te kai te whānau.', en:'The family is eating.'},
      {level:2, category:'Reremahi', te:'I waiata te kaiako.', en:'The teacher sang.'},
      {level:2, category:'Reremahi', te:'Ka haere au ki te kura āpōpō.', en:'I will go to school tomorrow.'},
      {level:2, category:'Reremahi', te:'Kua mutu te mahi.', en:'The work is finished.'},
      {level:2, category:'Reremahi', te:'Kua tae mai te kaiako.', en:'The teacher has arrived.'},
      {level:2, category:'Reremahi', te:'E haere ana mātou ki te kura.', en:'We are going to school.'},
      {level:2, category:'Reremahi', te:'E kai ana ngā tamariki i te kai.', en:'The children are eating food.'},
      {level:2, category:'Reremahi', te:'Aua atu ki te papa tākaro.', en:'Go away to the playground.'},
      {level:2, category:'Reremahi', te:'Ka kite au i a koe āpōpō.', en:'I will see you tomorrow.'},
      {level:2, category:'Reremahi', te:'Kua kite au i a ia.', en:'I have seen him/her.'},
      {level:2, category:'Reremahi', te:'He tākaro i te papa tākaro.', en:'He plays at the playground.'},
      {level:2, category:'Rerehāngū', te:'I tunua te kai e te kuia.', en:'The food was cooked by the grandmother.'},
      {level:2, category:'Rerehāngū', te:'Ka mauria mai te kai e te kaiako.', en:'The food will be brought by the teacher.'},
      {level:2, category:'Rerehāngū', te:'Kua kitea te kurī.', en:'The dog has been seen.'},
      {level:2, category:'Rerehāngū', te:'Ka haria atu te tamaiti e te matua.', en:'The child will be taken away by the parent.'},
      {level:2, category:'Rereāhua', te:'He nui te whare.', en:'The house is big.'},
      {level:2, category:'Rereāhua', te:'He iti te ngeru.', en:'The cat is small.'},
      {level:2, category:'Rereāhua', te:'He mā te whare.', en:'The house is white.'},
      {level:2, category:'Rereāhua', te:'He pai ngā kai.', en:'The food is good.'},
      {level:2, category:'Rereāhua', te:'He aha te tae o te whare?', en:'What is the colour of the house?'},
      {level:2, category:'Rereāhua', te:'He aha te rahi o te whare?', en:'What is the size of the house?'},
      {level:2, category:'Rerewāhi', te:'Kei te kura ngā tamariki.', en:'The children are at school.'},
      {level:2, category:'Rerewāhi', te:'I runga te pene i te tēpu.', en:'The pen was on the table.'},
      {level:2, category:'Rerewāhi', te:'Kei raro te ngeru i te tēpu.', en:'The cat is under the table.'},
      {level:2, category:'Rerewāhi', te:'Kei roto te tamaiti i te whare.', en:'The child is inside the house.'},
      {level:2, category:'Rerewāhi', te:'Kei waho te kurī.', en:'The dog is outside.'},
      {level:2, category:'Rerewāhi', te:'Kei te papa tākaro rātou.', en:'They are at the playground.'},
      {level:2, category:'Rerekaimahi', te:'Nā Hēmi te pene.', en:'The pen belongs to Hēmi.'},
      {level:2, category:'Rerekaimahi', te:'Mā Mere te pene.', en:'The pen is for Mere.'},
      {level:2, category:'Rerekaimahi', te:'Mō wai tēnei pukapuka?', en:'For whom is this book?'},
      {level:2, category:'Rerekaimahi', te:'Mōku tēnei pukapuka.', en:'This book is for me.'},
      {level:2, category:'Rerekaimahi', te:'He aha te mahi a te tama?', en:'What does the boy do?'},
      {level:2, category:'Rerewā', te:'I te paraire i haere mātou ki te whare pikitia.', en:'On Friday we went to the movies.'},
      {level:2, category:'Rerewā', te:'Ā te Rāhina ka hoki mātou ki te kura.', en:'On Monday we will return to school.'},
      {level:2, category:'Rerewā', te:'Āpōpō ka haere au ki te toa.', en:'Tomorrow I will go to the shop.'},
      {level:2, category:'Rerewā', te:'I te rā nei ka oma te tama.', en:'Today the boy is running.'},
      {level:2, category:'Reretau', te:'E rua ngā pene.', en:'There are two pens.'},
      {level:2, category:'Reretau', te:'E ono ngā tamariki i te kura.', en:'There are six children at school.'},
      {level:3, category:'Rereingoa', te:'Ko te rangatira o te marae a Hōne.', en:'Hōne is the leader of the marae.'},
      {level:3, category:'Reremahi', te:'Ka mutu te mahi, ka hoki mātou ki te kāinga.', en:'When the work finishes, we go home.'},
      {level:3, category:'Reremahi', te:'Ka kai rātou i ngā āpōro me ngā panana.', en:'They eat apples and bananas.'},
      {level:3, category:'Reremahi', te:'Kua tae atu rātou ki te kura.', en:'They have arrived at school.'},
      {level:3, category:'Reremahi', te:'Kua oti i a ia te mahi.', en:'He/she has finished the work.'},
      {level:3, category:'Reremahi', te:'Ka haere au ki te toa ki te hoko kai.', en:'I will go to the shop to buy food.'},
      {level:3, category:'Reremahi', te:'Ka tae atu au ki te marae ki te mihi.', en:'I will go to the marae to greet people.'},
      {level:3, category:'Reremahi', te:'I te rā nei ka whakanui te whānau i te huritau.', en:'Today the family is celebrating the birthday.'},
      {level:3, category:'Reremahi', te:'He pai ki a au te pānui pukapuka Māori.', en:'I like reading Māori books.'},
      {level:3, category:'Reremahi', te:'He hiahia nōku ki te ako i te reo Māori.', en:'I have a desire to learn the Māori language.'},
      {level:3, category:'Rerehāngū', te:'Mā te kaiako ngā pukapuka e tuku.', en:'The books will be given by the teacher.'},
      {level:3, category:'Rerehāngū', te:'E tukuna ana ngā pukapuka e te kaiako.', en:'The books are being given by the teacher.'},
      {level:3, category:'Rerehāngū', te:'I tukuna ngā pukapuka e te kaiako.', en:'The books were given by the teacher.'},
      {level:3, category:'Rerehāngū', te:'Ka tukuna ngā pukapuka e te kaiako.', en:'The books will be given by the teacher.'},
      {level:3, category:'Rereāhua', te:'He nui ake te whare i tērā.', en:'This house is bigger than that one.'},
      {level:3, category:'Rereāhua', te:'He pai ake tēnei kai i tērā kai.', en:'This food is better than that food.'},
      {level:3, category:'Rereāhua', te:'He kaha rawa ia ki te mahi.', en:'He/she is very strong at work.'},
      {level:3, category:'Rereāhua', te:'He tino mārama tō whakamārama.', en:'Your explanation is very clear.'},
      {level:3, category:'Rerewāhi', te:'Kei te waiata ngā tamariki i te waiata hou.', en:'The children are singing the new song.'},
      {level:3, category:'Rerewāhi', te:'Kua tae mai te manuhiri ki te marae.', en:'The visitor has arrived at the marae.'},
      {level:3, category:'Rerewā', te:'I te wā e kai ana, ka kōrero mātou.', en:'While eating, we talk.'},
      {level:3, category:'Rerewā', te:'Mēnā ka ua, ka noho mātou ki roto.', en:'If it rains, we will stay inside.'},
      {level:3, category:'Rerewā', te:'Ahakoa te makariri, ka haere tonu rātou.', en:'Despite the cold, they continue to go.'},
      {level:3, category:'Rerewā', te:'I te wā i tae mai ai te manuhiri, ka tīmata te hui.', en:'When the visitor arrived, the meeting began.'},
      {level:3, category:'Rerewā', te:'Hei te ata ka haere au ki te mahi.', en:'In the morning I will go to work.'},
      {level:3, category:'Rerekaimahi', te:'Nā wai te keke i tunu?', en:'Who cooked the cake?'},
      {level:3, category:'Rerekaimahi', te:'Ehara nāku te keke i tunu.', en:'I didn’t cook the cake.'},
      {level:3, category:'Rerekaimahi', te:'E ai ki te kaiako, he pai tō mahi.', en:'According to the teacher, your work is good.'},
      {level:3, category:'Reretau', te:'E waru ngā ākonga i tō mātou rōpū.', en:'There are eight students in our group.'}
    ];

    let activeLevel = 'all', activeCategory = 'all';
    const activityArea = document.getElementById('activity');
    const banner = document.getElementById('banner');
    const levelButtons = document.querySelectorAll('.levels button');
    const categoryWrap = document.querySelector('.categories');

    // Dynamically generate category buttons
    const categories = [...new Set(sentences.map(s => s.category))];
    categories.forEach(cat => {
      const btn = document.createElement('button');
      btn.dataset.category = cat;
      btn.textContent = cat;
      btn.setAttribute('aria-pressed', cat === 'all' ? 'true' : 'false');
      categoryWrap.appendChild(btn);
    });
    const categoryButtons = document.querySelectorAll('.categories button');

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function renderActivity() {
      let list = [...sentences];
      if (activeLevel !== 'all') list = list.filter(s => String(s.level) === String(activeLevel));
      if (activeCategory !== 'all') list = list.filter(s => s.category === activeCategory);
      shuffle(list);
      list = list.slice(0, Math.min(6, list.length)); // Up to 6 sentences

      activityArea.innerHTML = '';
      list.forEach((sentence, index) => {
        const sentenceDiv = document.createElement('div');
        sentenceDiv.className = 'sentence';
        sentenceDiv.dataset.index = index;
        sentenceDiv.innerHTML = `
          <div class="english">${sentence.en}</div>
          <div class="answer-area" data-index="${index}"></div>
          <div class="word-bank" data-index="${index}"></div>
        `;
        activityArea.appendChild(sentenceDiv);

        // Split Māori sentence into words
        const words = sentence.te.replace(/[.,!?]/g, '').split(' ').filter(word => word);
        const shuffledWords = shuffle([...words]);

        // Populate word bank
        const wordBank = sentenceDiv.querySelector('.word-bank');
        shuffledWords.forEach((word, i) => {
          const wordEl = document.createElement('span');
          wordEl.className = 'word';
          wordEl.textContent = word;
          wordEl.dataset.index = i;
          wordEl.addEventListener('click', () => handleWordClick(wordEl, sentence, index));
          wordBank.appendChild(wordEl);
        });
      });

      banner.classList.remove('show');
    }

    function handleWordClick(wordEl, sentence, sentenceIndex) {
      if (wordEl.classList.contains('disabled')) return;

      const answerArea = document.querySelector(`.answer-area[data-index="${sentenceIndex}"]`);
      const words = sentence.te.replace(/[.,!?]/g, '').split(' ').filter(word => word);
      const currentAnswer = Array.from(answerArea.children).map(el => el.textContent);
      const isCorrectPosition = currentAnswer.length < words.length && wordEl.textContent === words[currentAnswer.length];

      if (isCorrectPosition) {
        wordEl.classList.add('selected', 'disabled');
        const answerWord = document.createElement('span');
        answerWord.className = 'word selected';
        answerWord.textContent = wordEl.textContent;
        answerWord.addEventListener('click', () => {
          // Move word back to word bank
          wordEl.classList.remove('selected', 'disabled');
          answerWord.remove();
          checkSentence(sentence, sentenceIndex);
        });
        answerArea.appendChild(answerWord);

        checkSentence(sentence, sentenceIndex);
      }
    }

    function checkSentence(sentence, sentenceIndex) {
      const sentenceDiv = document.querySelector(`.sentence[data-index="${sentenceIndex}"]`);
      const answerArea = sentenceDiv.querySelector('.answer-area');
      const currentAnswer = Array.from(answerArea.children).map(el => el.textContent).join(' ');
      const correctAnswer = sentence.te.replace(/[.,!?]/g, '');
      if (currentAnswer === correctAnswer) {
        sentenceDiv.classList.add('correct');
        answerArea.querySelectorAll('.word').forEach(word => word.classList.add('disabled'));
      } else {
        sentenceDiv.classList.remove('correct');
      }

      // Check if all sentences are correct
      const allSentences = document.querySelectorAll('.sentence');
      const allCorrect = Array.from(allSentences).every(s => s.classList.contains('correct'));
      if (allCorrect && allSentences.length > 0) {
        banner.classList.add('show');
      } else {
        banner.classList.remove('show');
      }
    }

    levelButtons.forEach(btn => btn.addEventListener('click', () => {
      levelButtons.forEach(b => b.setAttribute('aria-pressed', 'false'));
      btn.setAttribute('aria-pressed', 'true');
      activeLevel = btn.dataset.level;
      renderActivity();
    }));

    categoryButtons.forEach(btn => btn.addEventListener('click', () => {
      categoryButtons.forEach(b => b.setAttribute('aria-pressed', 'false'));
      btn.setAttribute('aria-pressed', 'true');
      activeCategory = btn.dataset.category;
      renderActivity();
    }));

    document.getElementById('new-set').addEventListener('click', renderActivity);

    // Initialize
    renderActivity();
  </script>
</body>
</html>
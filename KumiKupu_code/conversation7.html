
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tikanga</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
    <style>
        /* DESKTOP STYLES */
        :root {
            --card-width: clamp(180px, 22vw, 250px);
            --card-height: clamp(120px, 18vh, 150px);
            --card-gap: clamp(15px, 2vw, 20px);
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: #e8ef7e;
            font-family: 'Poppins', sans-serif;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            text-align: center;
            width: 100%;
            min-height: 100dvh;
            padding: 20px;
            box-sizing: border-box;
        }

        header {
            width: 100%;
            max-width: 1000px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-shrink: 0;
        }
        
        .selector-container {
            background-color: #ADD8E6;
            border: 3px solid #00008B;
            border-radius: 15px;
            padding: 5px 15px;
            margin: 0 auto;
        }

        #category-selector {
            min-width: 300px;
            background-color: transparent;
            border: none;
            font-family: 'Poppins', sans-serif;
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            font-weight: 700;
            color: #333;
            cursor: pointer;
            text-align: center;
        }

        .card-grid {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
            justify-content: space-evenly;
            width: 100%;
            max-width: 95%;
            gap: var(--card-gap);
        }

        .card-row {
            display: flex;
            justify-content: center;
            gap: var(--card-gap);
            width: 100%;
        }

        .card {
            width: var(--card-width);
            height: var(--card-height);
            perspective: 1000px;
            cursor: pointer;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        .card.flipped .card-inner { transform: rotateY(180deg); }
        
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
            color: black;
            font-weight: 700;
            border: 4px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .card-face-front { font-size: clamp(1rem, 2.5vw, 1.5rem); }
        .card-face-back {
            transform: rotateY(180deg);
            font-size: clamp(0.9rem, 2.2vw, 1.1rem);
        }

        .btn {
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: 700;
            color: #fff;
            border: none;
            border-radius: 50px;
            cursor: pointer;
        }
        .btn-primary { background-color: #8119c7; }
        .btn-secondary { background-color: #1e5dab; }

        /* --- CORRECTED MOBILE-ONLY STYLES --- */
        @media (max-width: 800px) {
            :root {
                /* Sizing for a 2-column layout */
                --card-width: clamp(140px, 40vw, 180px);
                --card-height: clamp(70px, 12vh, 90px);
                --card-gap: 10px;
            }
            body, html {
                height: 100%;
                overflow: hidden; /* Prevent scrolling */
            }
            .app-container {
                height: 100dvh;
                padding: 10px;
            }
            header {
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
                margin-bottom: 10px;
            }
            .selector-container {
                order: -1; 
                width: 100%;
            }
            #category-selector {
                 font-size: 1.5rem;
                 min-width: unset;
            }
            #reset-btn, #flip-all-btn {
                display: none;
            }
        }

        /* Color Gradients */
        .bg-level-1 { background: linear-gradient(135deg,#ba60e7 0%, #3a73d6 100%); } .bg-level-2 { background: linear-gradient(135deg, #3b82f6 0%, #3beb5b 100%); } .bg-level-3 { background: linear-gradient(135deg, #755ded 0%, #39f2dc 100%); } .bg-level-4 { background: linear-gradient(135deg, #22c55e 0%, #86efac 100%); } .bg-level-5 { background: linear-gradient(135deg, #16a34a 0%, #1fb2e4 100%); } .bg-level-6 { background: linear-gradient(135deg, #f6f210 0%, #84fe0b 100%); } .bg-level-7 { background: linear-gradient(135deg, #f39a16 0%, #fbbf24 100%); } .bg-level-8 { background: linear-gradient(135deg, #fffb00 0%, #0babf5 100%); } .bg-level-9 { background: linear-gradient(135deg, #f242c9 0%, #fb923c 100%); } .bg-level-10 { background: linear-gradient(135deg, #ef4444 0%, #f87171 100%); } .bg-level-11 { background: linear-gradient(135deg, #b91c1c 0%, #ef4444 100%); } .bg-level-12 { background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%); }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <button id="reset-btn" class="btn btn-secondary">Reset</button>
            <div class="selector-container">
                <select id="category-selector" onchange="updateGame()">
                    <option value="select" selected>--Select--</option>
                    <option value="greeting">Greeting</option>
                    <option value="orca1">Orca 1</option>
                    <option value="orca2">Orca 2</option>
                    <option value="orcavocab">Orca Vocab</option>
                    <option value="tikanga">Tikanga</option>
                    <option value="hehonore">He Hōnore</option>
                    <option value="kiatau">Kia Tau</option>
                    <option value="whakataka">Whakataka te Hau</option>
                    <option value="pepeha">Pepeha</option>
                     <option value="joiners">Joiners</option>
                </select>
            </div>
            <button id="flip-all-btn" class="btn btn-primary">Flip All</button>
        </header>
        <div id="card-grid" class="card-grid"></div>
    </div>
    <script>
    const data = {
        select: [ { teReo: "tangata", english: "person / people" }, { teReo: "whenua", english: "land / country" }, { teReo: "kura", english: "school" }, { teReo: "whare", english: "house / building" }, { teReo: "wai", english: "water" }, { teReo: "moana", english: "sea / ocean" }, { teReo: "rangi", english: "sky / day" }, { teReo: "kai", english: "food" }, { teReo: "tamariki", english: "children" }, { teReo: "maunga", english: "mountain" }, { teReo: "waka", english: "canoe / vehicle" }, { teReo: "kāinga", english: "home / village" } ],
        greeting: [ { teReo: "Kia ora", english: "hello / hi" }, { teReo: "pai", english: "good" }, { teReo: "ngenge", english: "tired" }, { teReo: "moe", english: "sleep" }, { teReo: "māuiui", english: "sick / unwell" }, { teReo: "huangō", english: "asthma" }, { teReo: "puehu", english: "dust" }, { teReo: "puāwai", english: "flower / blossom" }, { teReo: "pēpi", english: "baby" }, { teReo: "menemene", english: "smile" }, { teReo: "mahi", english: "work" }, { teReo: "Paraire", english: "Friday" } ],
        orca1: [ { teReo: "Kia ora", english: "hello" }, { teReo: "ata", english: "morning" }, { teReo: "rawe", english: "great / excellent" }, { teReo: "hīkoi", english: "walk" }, { teReo: "pūwaha", english: "estuary" }, { teReo: "orca", english: "orca (killer whale)" }, { teReo: "kau", english: "swim" }, { teReo: "takutai", english: "shore / beach" }, { teReo: "kaihoe", english: "paddler" }, { teReo: "reti wai", english: "paddleboard / surfboard" }, { teReo: "waea", english: "phone" }, { teReo: "moana", english: "ocean" } ],
        orca2: [ { teReo: "titiro", english: "look" }, { teReo: "poti", english: "boat" }, { teReo: "parāoa", english: "whale" }, { teReo: "orca", english: "orca (killer whale)" }, { teReo: "parirau tuarā", english: "dorsal fin" }, { teReo: "nui", english: "big" }, { teReo: "awa", english: "river / estuary" }, { teReo: "iti", english: "small" }, { teReo: "kaihoe", english: "paddler" }, { teReo: "rererangi wai", english: "paddleboard" }, { teReo: "rā", english: "sun / day" }, { teReo: "mārie", english: "calm" } ],
        orcavocab: [ { teReo: "parāoa / orca", english: "whale / orca" }, { teReo: "parirau tuarā", english: "dorsal fin" }, { teReo: "poti mā", english: "white boat" }, { teReo: "kaihoe papa rererangi wai", english: "paddle boarder" }, { teReo: "awa", english: "estuary / river" }, { teReo: "wai mārie", english: "calm water" }, { teReo: "rā e whiti ana", english: "shining sun" }, { teReo: "ata ātaahua", english: "beautiful morning" }, { teReo: "mātakitaki", english: "to watch / observe" }, { teReo: "titiro", english: "look" }, { teReo: "tata", english: "near / close" }, { teReo: "mataku", english: "scared / afraid" } ],
        tikanga: [ { teReo: "tikanga", english: "customs / cultural practices" }, { teReo: "whakaute", english: "respect" }, { teReo: "manaakitanga", english: "kindness / hospitality" }, { teReo: "karakia", english: "prayer" }, { teReo: "marae", english: "meeting grounds" }, { teReo: "wharenui", english: "meeting house" }, { teReo: "tango hū", english: "to take off shoes" }, { teReo: "atua", english: "god / spiritual being" }, { teReo: "kai", english: "food / meal" }, { teReo: "ako", english: "to learn / teach" }, { teReo: "tapu", english: "sacredness" }, { teReo: "noa", english: "ordinary / free from tapu" } ],
        hehonore: [ { teReo: "He Hōnore", english: "The Honour (prayer title)" }, { teReo: "korōria", english: "glory" }, { teReo: "maungārongo", english: "peace" }, { teReo: "whenua", english: "land / earth" }, { teReo: "whakaaro pai", english: "good thoughts" }, { teReo: "tangata", english: "people / mankind" }, { teReo: "aroha", english: "love" }, { teReo: "Atua", english: "God" }, { teReo: "wairua", english: "spirit" }, { teReo: "tapū", english: "sacred / holy" }, { teReo: "āke ake", english: "forever and ever" }, { teReo: "Āmene", english: "amen" } ],
        kiatau: [ { teReo: "kia tau", english: "let it rest / may it settle" }, { teReo: "tātou", english: "us / all of us" }, { teReo: "atawhai", english: "grace / kindness" }, { teReo: "Ariki", english: "Lord" }, { teReo: "Ihu Karaiti", english: "Jesus Christ" }, { teReo: "aroha", english: "love" }, { teReo: "Atua", english: "God" }, { teReo: "whiwhingatahitanga", english: "fellowship / unity" }, { teReo: "Wairua Tapu", english: "Holy Spirit" }, { teReo: "ake ake", english: "forever and ever" }, { teReo: "Amine", english: "amen" }, { teReo: "tau", english: "settle / descend" } ],
        whakataka: [
    ["whakataka", "to prepare / make ready"],
    ["hau", "wind"],
    ["tonga", "south"],
    ["uta", "inland / shore"],
    ["tai", "sea / tide"],
    ["atākura", "red glow of dawn"],
    ["tio", "frost"],
    ["huka", "snow / ice"],
    ["hū", "gust / deep breath / sigh"],
    ["mākinakina", "chilly / cold wind"],
    ["mātaratara", "biting cold / frosty"],
    ["mauri ora", "the life force / breath of life"]
],

        pepeha: [ { teReo: "tēnā koutou katoa", english: "greetings to you all" }, { teReo: "Perehipitīriana", english: "Presbyterian" }, { teReo: "Hāhi", english: "church" }, { teReo: "Hāto Kēneti", english: "Saint Kentigern (St Kent’s)" }, { teReo: "tangata", english: "person / man" }, { teReo: "kura", english: "school" }, { teReo: "me ū", english: "hold fast / be steadfast" }, { teReo: "whakapono", english: "faith / belief" }, { teReo: "tīhei", english: "the sneeze (symbol of life)" }, { teReo: "mauri", english: "life force" }, { teReo: "ora", english: "life / well-being" }, { teReo: "katoa", english: "all / everyone" } ],
         joiners: [ { teReo: "nō reira", english: "therefore, so" }, { teReo: "engari", english: "but" }, { teReo: "heoi anō", english: "however" }, { teReo: "ā", english: "and (link actions/ideas)" }, { teReo: "waihoki", english: "furthermore, also" }, { teReo: "nā te mea", english: "because" }, { teReo: "otirā", english: "but, however (formal/poetic)" }, { teReo: "me", english: "and (link nouns/people)" }, { teReo: "ahakoa", english: "although, even though" }, { teReo: "mēnā / ki te", english: "if" }, { teReo: "ina", english: "when" }, { teReo: "kia", english: "so that / in order to" } ]
    };

    const colorClasses = [ 'bg-level-1', 'bg-level-2', 'bg-level-3', 'bg-level-4', 'bg-level-5', 'bg-level-6', 'bg-level-7', 'bg-level-8', 'bg-level-9', 'bg-level-10', 'bg-level-11', 'bg-level-12' ];

    const gridContainer = document.getElementById('card-grid');
    const resetButton = document.getElementById('reset-btn');
    const flipAllButton = document.getElementById('flip-all-btn');
    const categorySelector = document.getElementById('category-selector');

    function shuffle(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex !== 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    function updateGame() {
        gridContainer.innerHTML = '';
        const category = categorySelector.value;
        const vocab = data[category];
        const shuffledWords = shuffle([...vocab]);
        const shuffledColors = shuffle([...colorClasses]);
        let wordIndex = 0;

        // THIS IS THE FIX: Detect mobile view and set layout accordingly
        const isMobile = window.matchMedia("(max-width: 800px)").matches;
        const layout = isMobile ? [2, 2, 2, 2, 2, 2] : [4, 4, 4];

        layout.forEach((numCardsInRow) => {
            if (wordIndex >= shuffledWords.length) return;
            const row = document.createElement('div');
            row.className = 'card-row';
            for (let i = 0; i < numCardsInRow; i++) {
                if (wordIndex >= shuffledWords.length) break;
                
                const wordPair = shuffledWords[wordIndex];
                const colorClass = shuffledColors[wordIndex % shuffledColors.length];
                const card = document.createElement('div');
                card.className = 'card';
                const inner = document.createElement('div');
                inner.className = 'card-inner';
                const front = document.createElement('div');
                front.className = `card-face card-face-front ${colorClass}`;
                front.innerHTML = `<p>${wordPair.teReo}</p>`;
                const back = document.createElement('div');
                back.className = `card-face card-face-back ${colorClass}`;
                back.innerHTML = `<p>${wordPair.english}</p>`;
                inner.appendChild(front);
                inner.appendChild(back);
                card.appendChild(inner);
                row.appendChild(card);
                card.addEventListener('click', () => { card.classList.toggle('flipped'); });
                wordIndex++;
            }
            gridContainer.appendChild(row);
        });
    }

    function flipAllCards() {
        const cards = document.querySelectorAll('.card');
        const allFlipped = Array.from(cards).every(card => card.classList.contains('flipped'));
        cards.forEach(card => card.classList.toggle('flipped', !allFlipped));
    }

    resetButton.addEventListener('click', updateGame);
    flipAllButton.addEventListener('click', flipAllCards);
    window.addEventListener('load', updateGame);
    // Re-run layout on resize to switch between mobile and desktop
    window.addEventListener('resize', updateGame);
    </script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
<base target="_top">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tūtira Mai Ngā Iwi – Learning Resource</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">

<style>
body { font-family: Arial, sans-serif; padding: 20px; background-color: #f0f9ff; margin: 0; }
.header-container { display: flex; flex-wrap: wrap; align-items: center; gap: 20px; margin-bottom: 20px; }
.header-container h2 { margin: 0; color: #0b7a75; font-size: 2.2rem; }

.selector-container {
    background-color: #ADD8E6; border: 3px solid #00008B; border-radius: 15px;
    padding: 5px 15px; display: inline-block;
}
#category-selector {
    min-width: 320px; background: transparent; border: none;
    font-family: 'Poppins', sans-serif; font-size: clamp(1.8rem, 5vw, 2.5rem);
    font-weight: 700; color: #333; cursor: pointer; text-align: center; text-align-last: center;
}

/* Flashcards */
#flashcards-section {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0;
}
#flashcards-section .card {
  height: 110px; padding: 10px; border: 4px solid #333; border-radius: 12px;
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  text-align: center; font-weight: bold; font-size: 1.4rem; background: #fff9c4;
  transition: all 0.6s; box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
#flashcards-section .card.flipped { background: #b3e5fc; }

/* Quiz */
.quiz-question { margin-bottom: 20px; }
.quiz-question b { font-size: 1.5rem; color: #0b7a75; }
.quiz-options { 
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px; 
}
.quiz-options button { 
  padding: 14px; font-size: 1.2rem; background:#fff; border:2px solid #333; 
  border-radius:8px; cursor:pointer; transition: all 0.3s;
}
.quiz-options button:disabled { cursor: not-allowed; opacity: 0.9; }

/* Matching */
.matched-container { display: flex; flex-direction: column; gap: 10px; margin: 20px 0; }
.pair { 
  padding: 12px; border-radius: 10px; font-size: 1.4rem; font-weight: bold; 
  text-align: center; color: #0b7a75; background: #e8f5e9;
}
.matching-container { display: flex; justify-content: space-between; gap: 20px; margin-top: 20px; }
.matching-box { 
  flex: 1; display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;
  min-height: 300px; border: 3px dashed #999; padding: 15px; border-radius: 12px; background: #fafafa; 
}
.drag-item { 
  height: 70px; border: 2px solid #666; background: #fff; cursor: pointer;
  display: flex; align-items: center; justify-content: center; font-weight: bold; 
  font-size: 1.3rem; border-radius: 8px; transition: all 0.3s;
}
.drag-item[selected] { border: 4px solid #0066ff; transform: scale(1.05); }

@media (max-width: 768px) {
  #flashcards-section, .quiz-options, .matching-box { grid-template-columns: repeat(2, 1fr); }
  .matching-container { flex-direction: column; }
}
</style>
</head>
<body>

<div class="header-container">
    <h2>Tūtira Mai Ngā Iwi – Learning Resource</h2>
    <div class="selector-container">
      <select id="category-selector" onchange="updateContent()">         
        <option value="section1">Phrases</option>
        <option value="section2">Key Words</option>
      </select>
    </div>
</div>

<h3>Flashcards</h3>
<div id="flashcards-section"></div>

<h3>Quiz – 8 Questions</h3>
<div id="quiz-section"></div>

<h3>Matching – Click two to pair</h3>
<div class="matched-container" id="matched-pairs"></div>
<div id="matching-section"></div>

<script>
// ============== REAL DATA FOR TŪTIRA MAI NGĀ IWI ==============
const data = {
  section1: [ // Phrases – 8 items
    ["Tūtira mai ngā iwi", "Line up together, people"],
    ["Tātou tātou e", "All of us, all of us"],
    ["Whai-a te māramatanga", "Seek after knowledge"],
    ["Me te aroha", "And love"],
    ["E ngā iwi!", "Everyone!"],
    ["Kia tapatahi, kia kotahi rā", "Be united, be one"],
    ["Hī!", "Yeah! (exclamation)"],
    ["Tātou tātou e!", "All of us, all of us!"]
  ],
  section2: [ // Key Words – 8 items
    ["māramatanga", "knowledge, understanding"],
    ["aroha", "love, compassion"],
    ["tapatahi", "unity, togetherness"],
    ["kotahi", "one"],
    ["ngā iwi", "the people"],
    ["tātou", "all of us (inclusive)"],
    ["tūtira", "line up, stand in rows"],
    ["whai", "seek, pursue"]
  ]
};

let selectedWords = [];

// ============== HELPER ==============
function shuffleArray(array) {
  const arr = [...array];
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// ============== FLASHCARDS ==============
function showFlashcards() {
  const container = document.getElementById('flashcards-section');
  container.innerHTML = '';
  selectedWords.forEach(row => {
    const card = document.createElement('div');
    card.className = 'card';
    card.textContent = row[0];
    card.onclick = () => {
      card.classList.toggle('flipped');
      card.textContent = card.classList.contains('flipped') ? row[1] : row[0];
    };
    container.appendChild(card);
  });
}

// ============== QUIZ – ALL 8 VISIBLE ==============
function showQuiz() {
  const container = document.getElementById('quiz-section');
  container.innerHTML = '';

  selectedWords.forEach((row) => {
    const qDiv = document.createElement('div');
    qDiv.className = 'quiz-question';
    qDiv.innerHTML = `<b>${row[0]}</b>`;

    const optsDiv = document.createElement('div');
    optsDiv.className = 'quiz-options';

    // Get 3 wrong answers from the current set
    let distractors = shuffleArray(selectedWords
      .filter(r => r[1] !== row[1])
      .map(r => r[1])
    ).slice(0, 3);

    const options = shuffleArray([row[1], ...distractors]);

    options.forEach(opt => {
      const btn = document.createElement('button');
      btn.textContent = opt;
      btn.onclick = () => {
        if (opt === row[1]) {
          btn.style.backgroundColor = '#c8e6c9';
          btn.style.color = 'green';
        } else {
          btn.style.backgroundColor = '#ffcdd2';
          btn.style.color = 'red';
        }
        optsDiv.querySelectorAll('button').forEach(b => b.disabled = true);
      };
      optsDiv.appendChild(btn);
    });

    qDiv.appendChild(optsDiv);
    container.appendChild(qDiv);
  });
}

// ============== MATCHING (click two) ==============
function showMatching() {
  const section = document.getElementById('matching-section');
  const matched = document.getElementById('matched-pairs');
  section.innerHTML = ''; 
  matched.innerHTML = '';

  const container = document.createElement('div');
  container.className = 'matching-container';
  section.appendChild(container);

  const left = document.createElement('div'); left.className = 'matching-box';
  const right = document.createElement('div'); right.className = 'matching-box';
  container.append(left, right);

  const maori = selectedWords.map(p => p[0]);
  const english = shuffleArray(selectedWords.map(p => p[1]));

  let first = null;
  const colors = ['#ff9e9e','#ffd89e','#fff599','#b5ffbd','#99f2ff','#d0bbff','#ffb3ff','#ff99cc'];

  maori.forEach(w => left.appendChild(createBox(w, 'left')));
  english.forEach(w => right.appendChild(createBox(w, 'right')));

  function createBox(text, side) {
    const b = document.createElement('div');
    b.className = 'drag-item';
    b.textContent = text;
    b.dataset.side = side;
    b.dataset.word = text;

    b.onclick = () => {
      if (b.style.backgroundColor) return; // already matched

      if (!first) {
        first = b;
        b.setAttribute('selected', '');
      } else if (first !== b && first.dataset.side !== b.dataset.side) {
        const leftWord = first.dataset.side === 'left' ? first.dataset.word : b.dataset.word;
        const rightWord = first.dataset.side === 'right' ? first.dataset.word : b.dataset.word;
        const isCorrect = selectedWords.some(p => p[0] === leftWord && p[1] === rightWord);

        if (isCorrect) {
          const col = colors[matched.children.length % colors.length];
          [first, b].forEach(x => {
            x.style.backgroundColor = col;
            x.style.color = '#0b7a75';
            x.onclick = null;
          });
          const chip = document.createElement('div');
          chip.className = 'pair';
          chip.style.backgroundColor = col;
          chip.innerHTML = `${leftWord} ↔ ${rightWord}`;
          matched.appendChild(chip);
        } else {
          first.style.border = b.style.border = '4px solid red';
          setTimeout(() => {
            first.style.border = b.style.border = '2px solid #666';
            first.removeAttribute('selected');
          }, 800);
        }
        first.removeAttribute('selected');
        first = null;
      } else {
        first.removeAttribute('selected');
        first = b;
        b.setAttribute('selected', '');
      }
    };
    return b;
  }
}

// ============== MAIN UPDATE ==============
function updateContent() {
  const cat = document.getElementById('category-selector').value;
  selectedWords = data[cat] ? [...data[cat]] : [];
  document.getElementById('matched-pairs').innerHTML = '';
  showFlashcards();
  showQuiz();
  showMatching();
}

// Start
updateContent();
</script>

<!-- Lyrics & Videos -->
<div style="text-align:center; margin:60px 0 40px; white-space:pre-line; font-family:'Poppins',sans-serif; font-size:1.6rem; color:#0b7a75;">
  Tūtira mai ngā iwi - Line up together, people<br>
  Tātou tātou e - All of us, all of us<br>
  Tūtira mai ngā iwi - Line up together, people<br>
  Tātou tātou e - All of us, all of us<br>
  Whai-a te māramatanga - Seek after knowledge<br>
  Me te aroha - And love<br>
  E ngā iwi! - Everyone!<br>
  Kia tapatahi, kia kotahi rā - Be united, be one<br>
  Tātou tātou e - All of us, all of us<br>
  Hī! - Yeah! (exclamation)
</div>

<div style="text-align:center; margin:40px 0;">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/kQXrjWfMsbg" title="Tūtira Mai Ngā Iwi" frameborder="0" allowfullscreen></iframe>
</div>

<div style="text-align:center; margin:40px 0;">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/EAq2tFvWrfc" title="With lyrics" frameborder="0" allowfullscreen></iframe>
</div>

</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reremahi Wheāko – Experience Verbs</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background-color: #e0ffed; }
    .header-container { display: flex; flex-wrap: wrap; align-items: center; gap: 20px; margin-bottom: 20px; }
    .header-container h2 { margin: 0; color: #0b7a75; font-size: 2.2rem; }

    .selector-container {
      background-color: #a0f0d8;
      border: 3px solid #006655;
      border-radius: 15px;
      padding: 5px 15px;
      display: inline-block;
    }
    #category-selector {
      min-width: 280px; background: transparent; border: none;
      font-family: 'Poppins', sans-serif; font-size: clamp(1.8rem, 5vw, 2.2rem);
      font-weight: 700; color: #333; cursor: pointer;
      text-align: center; text-align-last: center;
    }

    /* Flashcards */
    #flashcards-section {
      display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin: 20px 0;
    }
    #flashcards-section .card {
      height: 110px; padding: 10px; border: 4px solid #333; border-radius: 12px;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      text-align: center; font-weight: bold; font-size: 1.4rem; background: #ffffcc;
      transition: all 0.6s;
    }
    #flashcards-section .card.flipped { background: #c8f7ff; }

    /* Quiz & Matching */
    .quiz-options { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px; }
    .quiz-options button { padding: 12px; font-size: 1.1rem; }

    .matched-container { display: flex; flex-direction: column; gap: 10px; margin: 20px 0; }
    .pair { padding: 12px; border-radius: 10px; font-size: 1.4rem; font-weight: bold; text-align: center; }

    .matching-container { display: flex; justify-content: space-between; gap: 20px; margin-top: 20px; }
    .matching-box { flex: 1; display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;
                    min-height: 200px; border: 2px dashed #999; padding: 10px; border-radius: 10px; background: #fafafa; }
    .drag-item { height: 60px; border: 2px solid #666; background: #eee; cursor: pointer;
                 display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem; }

    @media (max-width: 768px) {
      #flashcards-section, .quiz-options, .matching-box { grid-template-columns: repeat(2, 1fr); }
      .matching-container { flex-direction: column; }
    }
  </style>
</head>
<body>

<div class="header-container">
    <h2>Reremahi Wheāko – Experience Verbs</h2>
    <div class="selector-container">
      <select id="category-selector" onchange="updateContent()">          
        <option value="select" selected>--- Kōwhiri ---</option>
        <option value="wheakoA">1a. Wheāko (A)</option>
        <option value="wheakoB">1b. Wheāko (B)</option>
        <option value="mixedWheako">2. Whakaranu / Mixed Practice</option>
      </select>
    </div>
</div>

<h3>Flashcards</h3>
<div id="flashcards-section"></div>

<h3>Quiz</h3>
<div id="quiz-section"></div>

<h3>Matching – Click two to pair</h3>
<div class="matched-container" id="matched-pairs"></div>
<div id="matching-section"></div>

<script>
const data = {
  select: [
    ["Tūmahi Wheako", "Experience verbs"],
    ["hiahia", "want"],
    ["whakaaro", "think"],
    ["aroha", "love"],
    ["whakapono", "believe"],
    ["tūmanako", "hope"],
    ["mōhio", "know"],
    ["maumahara", "remember"]
  ],

  wheakoA: [
    ["hiahia", "want / desire"],
    ["pīrangi", "want / wish"],
    ["whakaaro", "think"],
    ["moemoeā", "dream"],
    ["aroha", "love"],
    ["āwangawanga", "worry"],
    ["mōhio", "know"],
    ["maumahara", "remember"]
  ],
  wheakoB: [
    ["whakapono", "believe"],
    ["tūmanako", "hope"],
    ["mārama", "understand"],
    ["ohia", "desire / long for"],
    ["pōhēhē", "misunderstand"],
    ["whaiwhakaaro", "consider"],
    ["huatau", "realise"],
    ["wawata", "yearn / crave"]
  ],

  mixedWheako: [
    ["hiahia", "want"],
    ["whakaaro", "think"],
    ["aroha", "love"],
    ["whakapono", "believe"],
    ["moe", "sleep"],
    ["kai", "eat"],
    ["tākaro", "play"],
    ["whakarongo", "listen"]
  ]
};

let selectedWords = [];

function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function showFlashcards() {
  const container = document.getElementById('flashcards-section');
  container.innerHTML = '';
  if (selectedWords.length === 0) return;
  selectedWords.forEach(pair => {
    const card = document.createElement('div');
    card.className = 'card';
    card.textContent = pair[0];
    card.onclick = () => {
      card.classList.toggle('flipped');
      card.textContent = card.classList.contains('flipped') ? pair[1] : pair[0];
    };
    container.appendChild(card);
  });
}

function showQuiz() {
  const container = document.getElementById('quiz-section');
  container.innerHTML = '';
  if (selectedWords.length < 4) return;

  selectedWords.forEach((pair) => {
    const qDiv = document.createElement('div');
    qDiv.className = 'quiz-question';
    qDiv.innerHTML = `<b>${pair[0]}</b>`;
    const optsDiv = document.createElement('div');
    optsDiv.className = 'quiz-options';

    const distractors = [];
    while (distractors.length < 3) {
      // choose a random gloss from the same data set
      const randPair = selectedWords[Math.floor(Math.random() * selectedWords.length)];
      const rand = randPair[1];
      if (rand !== pair[1] && !distractors.includes(rand)) distractors.push(rand);
    }
    const options = shuffleArray([pair[1], ...distractors]);
    options.forEach(opt => {
      const btn = document.createElement('button');
      btn.textContent = opt;
      btn.onclick = () => {
        if (opt === pair[1]) btn.style.backgroundColor = 'lightgreen';
        else btn.style.backgroundColor = 'lightcoral';
        optsDiv.querySelectorAll('button').forEach(b => b.disabled = true);
      };
      optsDiv.appendChild(btn);
    });
    qDiv.appendChild(optsDiv);
    container.appendChild(qDiv);
  });
}

function showMatching() {
  const section = document.getElementById('matching-section');
  const matched = document.getElementById('matched-pairs');
  section.innerHTML = ''; matched.innerHTML = '';

  const leftBox = document.createElement('div'); leftBox.className = 'matching-box';
  const rightBox = document.createElement('div'); rightBox.className = 'matching-box';
  section.firstChild; // ensure existence
  section.appendChild(leftBox);
  section.appendChild(rightBox);

  const māori = selectedWords.map(p => p[0]);
  const english = shuffleArray(selectedWords.map(p => p[1]));

  let first = null;
  const colours = ['#ffd4d4','#ffe8b3','#fcf8d4','#d7fcd9','#d9f5ff','#e9ddff','#ffd9fa','#ffdfec'];

  function createBox(text, side) {
    const box = document.createElement('div');
    box.className = 'drag-item';
    box.textContent = text;
    box.dataset.side = side;
    box.dataset.word = text;
    box.onclick = () => {
      if (box.style.backgroundColor) return;
      if (!first) {
        first = box;
        box.style.border = '4px solid #0066cc';
      } else if (first.dataset.side !== box.dataset.side) {
        const l = first.dataset.side === 'left' ? first.dataset.word : box.dataset.word;
        const r = first.dataset.side === 'right' ? first.dataset.word : box.dataset.word;
        const match = selectedWords.find(p => p[0] === l)?.[1] === r;
        if (match) {
          const col = colours[matched.children.length % colours.length];
          [first, box].forEach(b => { b.style.backgroundColor = col; b.onclick = null; });
          const chip = document.createElement('div');
          chip.className = 'pair';
          chip.style.backgroundColor = col;
          chip.innerHTML = `${l} ↔ ${r}`;
          matched.appendChild(chip);
        } else {
          first.style.border = box.style.border = '4px solid red';
          setTimeout(() => {
            first.style.border = box.style.border = '2px solid #666';
          }, 600);
        }
        first.style.border = '2px solid #666';
        first = null;
      } else {
        first.style.border = '2px solid #666';
        first = box;
        box.style.border = '4px solid #0066cc';
      }
    };
    return box;
  }

  māori.forEach(w => leftBox.appendChild(createBox(w, 'left')));
  english.forEach(w => rightBox.appendChild(createBox(w, 'right')));
}

function updateContent() {
  const cat = document.getElementById('category-selector').value;
  if (data[cat]) {
    selectedWords = shuffleArray([...data[cat]]);
  } else {
    selectedWords = [];
  }
  document.getElementById('matched-pairs').innerHTML = '';
  showFlashcards();
  showQuiz();
  showMatching();
}

// Initialize
updateContent();
</script>

<div style="text-align:center; margin:40px 0;">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/LAzFcCKJEgo" title="Reremahi Wheāko (Experience Verbs)" frameborder="0" allowfullscreen></iframe>
</div>

</body>
</html>